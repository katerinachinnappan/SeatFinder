<div class="login-register-container">
  <mat-card class="login-register-card">
    <mat-card-header>
      <mat-card-title>Login to SeatFinder</mat-card-title>
      <mat-card-subtitle></mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>

      <mat-tab-group #tab (selectedTabChange)="setTabActive($event)">
        <mat-tab label="Login">

          <div class="toggle-group">
              <mat-button-toggle-group>
                  <mat-button-toggle value="STUDENT" #studentToggle (click)="changeUserType(studentToggle.value)">Student</mat-button-toggle>
                  <mat-button-toggle value="SCHOOL_STAFF" #schoolStaffToggle (click)="changeUserType(schoolStaffToggle.value)">School
                    Staff</mat-button-toggle>
                </mat-button-toggle-group>
          </div>          

          <form class="login-container" [formGroup]="loginFields" (keydown)="keyDownFunction($event)">
            <mat-form-field>
              <input matInput type="text" placeholder="Username" formControlName="loginUsername" required />
              <mat-error>{{getErrorUsername()}}</mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput type="password" placeholder="Password" formControlName="loginPassword" required />
              <mat-error>{{getErrorPassword()}}</mat-error>
            </mat-form-field>
          </form>

          <button mat-button (click)="onLogin()" mat-raised-button color="primary">LOGIN</button>


        </mat-tab>
        <mat-tab label="Register">

          <form class="login-container" [formGroup]="registerFields">
            <mat-form-field>
              <input matInput type="text" placeholder="Username" formControlName="registerUsername" required />
              <mat-error>{{getErrorPassword()}}</mat-error>
            </mat-form-field>
            
            <mat-form-field>
                <input matInput placeholder="Email" formControlName="registerEmail" required>
                <!-- <mat-hint>Errors appear instantly!</mat-hint> -->
                <mat-error  *ngIf="registerFields.get('registerEmail').hasError('email') && !registerFields.get('registerEmail').hasError('required')">
                  Wrong email format
                </mat-error>
                <mat-error *ngIf="registerFields.get('registerEmail').hasError('required')">
                  Email is <strong>required</strong>
                </mat-error>
              </mat-form-field>

            <mat-form-field>
              <input matInput type="password" placeholder="Password" formControlName="registerPassword" required />
              <mat-error>{{getErrorPassword()}}</mat-error>
            </mat-form-field>
            <mat-form-field>
              <input matInput type="password" placeholder="Repeat pasword" formControlName="registerSecondPassword"
                required />
              <mat-error>{{getErrorPassword()}}</mat-error>
            </mat-form-field>
          </form>
          <button mat-button (click)="register(tab)" mat-raised-button color="primary">REGISTER</button>
        </mat-tab>
      </mat-tab-group>


    </mat-card-content>
    <mat-card-actions>
    </mat-card-actions>
  </mat-card>
</div>