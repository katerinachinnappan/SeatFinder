/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/

// Node module: apiconnect-config-to-datapower

'use strict';

const coname = require('./coname');

module.exports = exports = function(settings, options) {
  settings._name = coname.oauthProviderSettings(options, settings.name);
  settings.basePath = settings.basePath || '/';
  settings._clients = settings.clients.join('+');
  settings._scopes = Object.keys(settings.scopes).join('|');
  settings._grants = settings.grants.join('+');
  if (settings['apic-token-secret']) {
    let ats = settings['apic-token-secret'];
    settings._tokenSecret = {
      name: ats.name,
      url: `cert:///${ats.name}-1.txt`,
      key: ats.key,
    };
  }
  return settings;
};
