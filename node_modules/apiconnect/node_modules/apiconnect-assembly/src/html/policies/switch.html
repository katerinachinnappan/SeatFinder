<div data-ng-controller="SwitchController as ctrl" class="infoSection">
	<fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly">
		<div class="switch">
			<md-input-container>
				<label>{{::"assemblyTitle" | translate}}</label>
				<input data-ng-model="selectedNode.title" data-ng-model-options="{debounce:200}"/>
			</md-input-container>
			<md-input-container>
				<label>{{::"assemblyDescription" | translate}}</label>
				<textarea data-ng-model="selectedNode.description" data-ng-model-options="{debounce:200}"></textarea>
			</md-input-container>
			<div class="switchCase" data-ng-repeat="case in selectedNode.case" data-ng-controller="CaseController as caseCtrl">
				<span>
					<div>
						<span class="caseIcon"></span>
						<span data-ng-if="!case.otherwise" style="margin-right: 10px; line-height: 49px; font-size: 1.2em; min-width: 70px;">{{::'assemblyCase' | translate}} {{$index}}</span>
						<span data-ng-if="case.otherwise" style="margin-right: 10px; line-height: 49px; font-size: 1.2em; min-width: 70px;">{{::'assemblyOtherwise' | translate}}</span>
					</div>
					<div>
						<button style="margin: 0px;" class="iconOnlyButton material-icons" data-ng-click="ctrl.removeCase($index)" title="{{::'assemblyRemoveCase' | translate}}">delete</button>
						<button style="margin: 0px;" data-ng-if="caseCtrl.canMoveUp($index);" class="iconOnlyButton material-icons" data-ng-click="ctrl.moveUp($index)" title="{{::'assemblyMoveUp' | translate}}">arrow_upward</button>
						<button style="margin: 0px;" data-ng-if="caseCtrl.canMoveDown($index);" class="iconOnlyButton material-icons" data-ng-click="ctrl.moveDown($index)" title="{{::'assemblyMoveDown' | translate}}">arrow_downward</button>
					</div>
				</span>
				<span class="conditionContent" data-ng-if="!case.otherwise && (!case.condition || highLevelExpression)">
					<md-chips style="display: inline-block; vertical-align: middle; margin-right: 0px; width: calc(100% - 10px);" data-ng-model="chips" md-autocomplete-snap md-require-match="true">
						<md-autocomplete md-min-length="0" md-search-text="caseCtrl.searchText" md-no-cache="true" md-items="operation in caseCtrl.filter()" placeholder="{{::'assemblySearchOperations' | translate}}">
							<md-item-template>
								<span data-ng-if="operation.operationId" md-highlight-text="caseCtrl.searchText">{{operation.operationId}}</span>
								<span data-ng-if="operation.verb" md-highlight-text="caseCtrl.searchText">{{operation.verb.toUpperCase()}} {{operation.path}}</span>
							</md-item-template>					
						</md-autocomplete>
						<md-chip-template>
							<span data-ng-if="$chip.operationId">{{$chip.operationId}}</span>
							<span data-ng-if="$chip.verb && $chip.path">{{$chip.verb.toUpperCase()}} {{$chip.path}}</span>
						</md-chip-template>
					</md-chips>
					<div style="margin: 10px;">{{::'assemblyOr' | translate}} <a data-ng-click="caseCtrl.launchExpressionEditor()">{{::'assemblyLaunchExpressionEditor' | translate}}</a></div>
				</span>
				<span class="conditionContent" data-ng-if="!case.otherwise && !highLevelExpression">
					<md-input-container>
						<label>{{::"assemblyExpression" | translate}}</label>
						<textarea class="expressionTextArea" data-ng-model="case.condition" data-ng-model-options="{debounce:1000}"></textarea>
					</md-input-container>
					<div data-ng-show="!selectedNode.$$readOnly && !selectedNode.$$parentReadOnly" style="margin: 10px;"><a data-ng-click="caseCtrl.launchExpressionEditor()">{{::'assemblyLaunchExpressionEditor' | translate}}</a></div>
				</span>
			</div>
			<button style="margin: 10px;" data-ng-click="ctrl.addCase()" title="{{::'assemblyAddCaseTitle' | translate}}">{{::'assemblyAddCase' | translate}}</button>
			<button style="margin: 10px;" data-ng-show="!hasOtherwise();" data-ng-click="ctrl.addOtherwise()" title="{{::'assemblyAddOtherwise' | translate}}">{{::'assemblyAddOtherwise' | translate}}</button>
		</div>
	</fieldset>
</div>