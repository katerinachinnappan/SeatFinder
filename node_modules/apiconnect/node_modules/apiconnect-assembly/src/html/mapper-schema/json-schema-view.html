<div class="json-schema-view mapper-schema-path" ng-class="{'collapsed': isCollapsed, 'mapper-schema-container': !isPrimitive && !isRoot}" data-ng-attr-path="{{::getPath()}}" data-ng-attr-dimensions="{{::getDimensionArray()}}" data-ng-attr-container="{{::getContainer()}}" data-ng-attr-type="{{schema.type}}">

  <!-- Primitive -->
  <div class="primitive" ng-if="isPrimitive">
    <span data-ng-if="schema.title || schema.$$title || name" class="name">{{schema.title || schema.$$title || name}}</span>
    <span class="type">{{schema.type}}</span>
    <span class="required" ng-if="isRequired(schema)">*</span>
    <span class="format" ng-if="!isCollapsed && schema.format">({{schema.format}})</span>
    <span class="range minimum" ng-if="!isCollapsed && schema.minimum">minimum:{{schema.minimum}}</span>
    <span class="range exclusiveMinimum" ng-if="!isCollapsed && schema.exclusiveMinimum">(ex)minimum:{{schema.exclusiveMinimum}}</span>
    <span class="range maximum" ng-if="!isCollapsed && schema.maximum">maximum:{{schema.maximum}}</span>
    <span class="range exclusiveMaximum" ng-if="!isCollapsed && schema.exclusiveMaximum">(ex)maximum:{{schema.exclusiveMaximum}}</span>
    <span class="range minLength" ng-if="!isCollapsed && schema.minLength">minLength:{{schema.minLength}}</span>
    <span class="range maxLength" ng-if="!isCollapsed && schema.maxLength">maxLength:{{schema.maxLength}}</span>
    <div class="inner description">{{schema.description}}</div>
    <div ng-include="'src/html/mapper-schema/enum.html'" ng-if="!isCollapsed && schema.enum"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="!isCollapsed && schema.allOf" onload="type = 'allOf'"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="!isCollapsed && schema.anyOf" onload="type = 'anyOf'"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="!isCollapsed && schema.oneOf" onload="type = 'oneOf'"></div>
    <button data-ng-if="!isRoot && schemaEditable" class="iconOnlyButton material-icons" data-ng-click="deleteProperty();" title="{{::'delete' | translate}}">delete</button>
  </div>


  <!-- Array -->
  <div ng-if="isArray" class="array">
    <a class="title"><span
      class="toggle-handle" ng-click="toggle()"></span><span data-ng-if="schema.title || schema.$$title || name" class="name">{{schema.title || schema.$$title || name}}</span><span class="extender" data-ng-if="schema.$$extender">{{schema.$$extender}}</span><span class="opening bracket">[</span><span class="closing bracket" ng-if="isCollapsed">]</span>
      <button data-ng-if="!isRoot && schemaEditable" class="iconOnlyButton material-icons" data-ng-click="deleteProperty();" title="{{::'delete' | translate}}">delete</button>
    </a>

    <!--span ng-if="!isCollapsed && (schema.uniqueItems || schema.minItems || schema.maxItems)">
      <span title="items range">({{schema.minItems || 0}}..{{schema.maxItems || '∞'}})</span>
      <span title="unique" class="uniqueItems" ng-if="!isCollapsed && schema.uniqueItems">♦</span>
    </span-->
    <div class="inner">
      <div class="description">{{schema.description}}</div>
      <apic-mapper-schema root="false" editable="schemaEditable" data-ng-class="{'array-container': propertyIsArray(schema.items), 'object-container': propertyIsObject(schema.items)}" schema="schema.items" parent-schema="schema" open="open - 1" definitions="definitions" references="references" data-ng-if="!isCollapsed && schema.items"></apic-mapper-schema>
    </div>
    <div ng-include="'src/html/mapper-schema/enum.html'" ng-if="!isCollapsed && schema.enum"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="schema.allOf" onload="type = 'allOf'"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="schema.anyOf" onload="type = 'anyOf'"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="schema.oneOf" onload="type = 'oneOf'"></div>
    <div data-ng-include="'src/html/mapper-schema/add-property.html'" onload="isArray = true" data-ng-if="!isCollapsed && schemaEditable && !schema.items"></div>
    <span class="closing bracket" style="padding-left: 17px;"a ng-if="!isCollapsed">]</span>
  </div>

  <!-- Object -->
  <div ng-if="!isPrimitive && !isArray" class="object">
    <a class="title"><span
      class="toggle-handle" ng-click="toggle()"></span><span data-ng-if="schema.title || schema.$$title || name" class="name">{{schema.title || schema.$$title || name}}</span><span class="extender" data-ng-if="schema.$$extender">{{schema.$$extender}}</span><span
      class="opening brace">{</span><span class="closing brace" ng-if="isCollapsed">}</span>
      <button data-ng-if="!isRoot && schemaEditable" class="iconOnlyButton material-icons" data-ng-click="deleteProperty();" title="{{::'delete' | translate}}">delete</button>
    </a>

    <div class="inner">
      <div class="description">{{schema.description}}</div>
      <div class="property" ng-repeat="(propertyName, property) in schema.properties" data-ng-if="showProperty(propertyName)" data-ng-controller="SchemaPropertyController as propCtrl">

          <!--span class="toggle-handle" data-ng-if="propertyIsArray || propertyIsObject" ng-click="toggleProperty()"></span><span style="display: inline-block;" class="name">{{property.name}}</span-->
      <!--span class="opening bracket" data-ng-if="propertyIsArray">[</span><span class="opening bracket" data-ng-if="propertyIsObject">{</span><span class="closing bracket" data-ng-if="propertyCollapsed && propertyIsObject">}</span><span class="closing bracket" data-ng-if="propertyCollapsed && propertyIsArray">]</span-->
          <apic-mapper-schema root="false" editable="schemaEditable" data-ng-class="{'array-container': propertyIsArray, 'object-container': propertyIsObject}" schema="property" parent-schema="schema" name="propertyName" open="open - 1" definitions="definitions" references="references"></apic-mapper-schema>
      </div>
    </div>
    <div data-ng-include="'src/html/mapper-schema/discriminator.html'" data-ng-if="!isCollapsed && schema.$$extendingTypes && isDiscriminator"></div>
    <div ng-include="'src/html/mapper-schema/enum.html'" ng-if="!isCollapsed && schema.enum"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="!isCollapsed && schema.allOf" onload="type = 'allOf'"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="!isCollapsed && schema.anyOf" onload="type = 'anyOf'"></div>
    <div ng-include="'src/html/mapper-schema/x_of.html'" ng-if="!isCollapsed && schema.oneOf" onload="type = 'oneOf'"></div>
    <div data-ng-include="'src/html/mapper-schema/add-property.html'" data-ng-if="!isCollapsed && schemaEditable"></div>
    <span class="closing brace" style="padding-left: 17px;" ng-if="!isCollapsed">}</span>
  </div>
</div>
