  <div class="policyList stretch" data-ng-show="!hidePalette && !testMode">
    <div class="searchContainer">
      <div class="filterBoxContainer displayInline" data-ng-class="{'makeSpaceForGateways': config.gateways}">
        <div data-ng-class="{focused: filterBoxFocused}" class="filterBoxFocus" flex>
          <button data-ng-show="!policyFilter" class="iconOnlyButton searchIcon"></button>
          <button data-ng-show="policyFilter" data-ng-click="policyFilter = ''" class="iconOnlyButton clearIcon material-icons">close</button>
          <input
            class="filterBox"
            data-ng-focus="filterBoxFocused = true"
            data-ng-blur="filterBoxFocused = false"
            data-ng-change="nodeFiltered();"
            data-ng-model="policyFilter"
            type="text"
            spellcheck="false"
            title="{{'Filter' | translate}}"
            placeholder="{{'Filter' | translate}}"
          ></input>
        </div>
      </div><div
        class="displayInline alignTop policyFilterIcon"
        data-ng-show="config.gateways"
      >
        <button class="iconOnlyButton material-icons" style="font-size: 16px; padding: 6px 6px 0px 7px;" data-ng-click="showPolicyFilter = !showPolicyFilter" title="{{::'assembly_filter_policies' | translate}}">filter_list</button>
      </div>
    </div>
    <ul class="policyGateways" data-ng-show="config.gateways && showPolicyFilter">
      <md-radio-group data-ng-model="$gateway" data-ng-model-options="{getterSetter: true}">
        <md-radio-button value="micro-gateway" class="md-primary">{{::'assembly_policies_filter_micro' | translate}}</md-radio-button>
        <md-radio-button value="datapower-gateway" class="md-primary">{{::'assembly_policies_filter_dp' | translate}}</md-radio-button>
      </md-radio-group>
    </ul>
    <ul
      class="simpleList policyInner"
      data-ng-class="{'gatewaysShown': config.gateways && showPolicyFilter}"
    >
      <div class="policyCategoryGroup" data-ng-repeat="(category, policies) in filteredCategories">
        <li class="policyCategoryHeader" data-ng-click="closeCategory($event, category);">
          <span>{{::category}}</span>
          <button class="iconOnlyButton minimizeButton">
            <span class="material-icons" data-ng-class="{'rotate180': collapsedCategories[category]}">keyboard_arrow_up</span>
          </button>
        </li>
        <div class="policyCategoryContents" data-ng-show="!collapsedCategories[category]">
          <li data-ng-repeat="policy in policies | orderBy: 'info.title'">
            <apim-assembly-policy></apim-assembly-policy>
          </li>
        </div>
      </div>
    </ul>
  </div>
