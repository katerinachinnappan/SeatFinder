function unwrapOperationSwitch(e,t,a,n,o){if(t["operation-switch"]&&t["operation-switch"]["case"])for(var i=0;i<t["operation-switch"]["case"].length;i++){var s=t["operation-switch"]["case"][i];if(s.operations&&0!==s.operations.length)for(var r=0;r<s.operations.length;r++){var l=[];if(e.verb&&e.path&&e.verb===s.operations[r].verb&&e.path===s.operations[r].path?l=s.execute:"string"==typeof e&&e===s.operations[r]?l=s.execute:"string"==typeof e&&o[e].verb===s.operations[r].verb&&o[e].path===s.operations[r].path?l=s.execute:e.operationId&&e.operationId===s.operations[r]?l=s.execute:e.operationId&&o[e.operationId].verb===s.operations[r].verb&&o[e.operationId].path===s.operations[r].path&&(l=s.execute),l.length>0)return void l.forEach(function(t){var i=Object.keys(t)[0];if("operation-switch"===i)unwrapOperationSwitch(e,t,a,o);else{var r=t[i];r.$$type=i;var l=r.version?i+":"+r.version:i;if(n){var c=n[l]||n[i];c||"assembly"!==i||(c={type:"subflow",info:{display:{color:"#4B68FA",icon:"open_in_browser"}}}),c&&(r.$$display=c.info.display,r.$$schema=c.properties,r.$$classes=c.classes||[],r.$$logic=!!c.logic,r.$$subflow="subflow"===c.type,r.$$application=!!c.application)}void 0===instanceCounters[i]?(instanceCounters[i]=1,r.$$instance=1):(instanceCounters[i]++,r.$$instance=instanceCounters[i]),s.operations.length>1&&(r.$$operations=s.operations.length-1),a.push(r)}})}}}function AssemblerInfoController(e,t){e.minorTab="configure",t.options={ajax:!0,theme:"bootstrap3",show_errors:"change",no_additional_properties:!0,disable_edit_json:!0,required_by_default:!0},e.aceLoaded=function(){window.e.setOption("enableBasicAutocompletion",!1),window.e.setOption("enableLiveAutocompletion",!1)};var a=function(t,a){a&&(e.model=t),angular.extend(e.selectedNode,t),Object.keys(e.selectedNode).forEach(function(a){0!==a.indexOf("$$")&&e.selectedNode.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&delete e.selectedNode[a]})};e.policyAsYaml=function(t){if(!arguments.length){var n=JSON.parse(angular.toJson(e.selectedNode));return _.isEmpty(n)?"":jsyaml.safeDump(n,{lineWidth:-1})}a(jsyaml.safeLoad(t),!0)},e.formChanged=_.debounce(a,200),e.aceChanged=_.debounce(a,200);var n;e.$watch("selectedNode",function(){e.selectedNode&&(Object.keys(e.selectedNode).forEach(function(t){e.selectedNode.hasOwnProperty(t)&&null===e.selectedNode[t]&&delete e.selectedNode[t]}),n&&n===e.selectedNode.$$hashKey||(n=e.selectedNode.$$hashKey,e.schema=e.selectedNode.$$schema,e.model=angular.copy(e.selectedNode)))},!0)}function OperationSwitchController(e){var t=this;t.addCase=function(){e.selectedNode["case"].push({operations:[],execute:[]})},t.removeCase=function(t){e.selectedNode["case"].splice(t,1)}}function OperationCaseController(e){e["case"].operations||(e["case"].operations=[]),e["case"].execute||(e["case"].execute=[]);var t=this;t.filter=function(){var t=this.searchText.toLowerCase();return e.swaggerLegacyOperations.filter(function(a){if("string"==typeof a){if(a.toLowerCase().indexOf(t)===-1)return!1}else if(a.verb.toLowerCase().indexOf(t)===-1&&a.path.toLowerCase().indexOf(t)===-1)return!1;for(var n=0;n<e.selectedNode["case"].length;n++)for(var o=0;o<e.selectedNode["case"][n].operations.length;o++){var i=e.selectedNode["case"][n].operations[o];if("string"==typeof a&&a===i)return!1;if("object"==typeof a&&a.verb===i.verb&&a.path===i.path)return!1}return!0})}}function SwitchController(e){var t=this;t.addCase=function(){e.hasOtherwise()?e.selectedNode["case"].splice(e.selectedNode["case"].length-1,0,{condition:"",execute:[]}):e.selectedNode["case"].push({condition:"",execute:[]})},t.removeCase=function(t){e.selectedNode["case"].splice(t,1)},t.moveUp=function(t){if(!(t<=0)){var a=[];e.selectedNode["case"].forEach(function(n,o){o!==t&&(o===t-1?(a.push(e.selectedNode["case"][t]),a.push(n)):a.push(n))}),e.selectedNode["case"]=a}},t.moveDown=function(t){if(!(t>=e.selectedNode["case"].length-1)){var a=[];e.selectedNode["case"].forEach(function(n,o){o!==t&&(o===t+1?(a.push(n),a.push(e.selectedNode["case"][t])):a.push(n))}),e.selectedNode["case"]=a}},e.hasOtherwise=function(){return void 0!==e.selectedNode["case"][e.selectedNode["case"].length-1].otherwise},t.addOtherwise=function(){e.selectedNode["case"].push({otherwise:[]})}}function CaseController(e,t,a){e["case"].otherwise||e["case"].execute||(e["case"].execute=[]);var n=this;n.filter=function(){if(!e.chips||0===e.chips.length)return e.swaggerOperations;var t=this.searchText.toLowerCase();return e.swaggerOperations.filter(function(a){if(a.operationId&&a.operationId.toLowerCase().indexOf(t)===-1)return!1;if(a.verb&&a.path&&a.verb.toLowerCase().indexOf(t)===-1&&a.path.toLowerCase().indexOf(t)===-1)return!1;for(var n=0;n<e.chips.length;n++){if(a.verb&&e.chips[n].verb&&e.chips[n].verb.toLowerCase()===a.verb.toLowerCase()&&a.path&&e.chips[n].path&&e.chips[n].path===a.path)return!1;if(a.operationId&&e.chips[n].operationId===a.operationId)return!1}return!0})},n.canMoveUp=function(t){return!e["case"].otherwise&&t>0},n.canMoveDown=function(t){return!e["case"].otherwise&&(e.hasOtherwise()?t<e.selectedNode["case"].length-2:t<e.selectedNode["case"].length-1)},n.convertToExpression=function(){var t;return e["case"].condition.operations&&0!==e["case"].condition.operations.length?(e["case"].condition.operations.forEach(function(e){t+="string"==typeof e?"$(operation.operationId) === '"+e+"' || ":"($(operation.verb) === '"+e.verb+"' && $(operation.path) === '"+e.path+"') || "}),t=t.substring(0,t.length-4)+");\n})();",delete e["case"].condition.operations,void(e["case"].condition.expression=t)):(delete e["case"].condition.operations,void(e["case"].condition.expression="(function() {\n  return false;\n})();"))},n.launchExpressionEditor=function(){t.show({templateUrl:"src/html/expression-editor.html",controller:"ConditionEditorController",locals:{expression:e["case"].condition}}).then(function(t){e["case"].condition=t})},e["case"].otherwise||(e.$watch("case.condition",function(){e["case"].condition&&""!==e["case"].condition?(e.expression=window.jsep(e["case"].condition),e.highLevelExpression=a.highLevelExpression(e.expression),e.highLevelExpression&&(e.chips=a.expressionAsChips(e.expression))):(e.highLevelExpression=!0,e.chips=[])}),e.$watchCollection("chips",function(){e.highLevelExpression&&(e.chips&&0!==e.chips.length?e["case"].condition=a.chipsAsExpressionString(e.chips):e["case"].condition="")}))}function ConditionEditorController(e,t,a){e.expressionString=a,e.$on("condition-change",function(t,a){e.expressionString=a}),e.commit=function(){t.hide(e.expressionString)},e.cancel=function(){t.cancel()}}function CatchController(e){var t=this;t.addCatch=function(){e.selectedNode["catch"]||(e.selectedNode["catch"]=[]);var a=e.selectedNode["catch"].length;t.hasDefault()&&a--,e.selectedNode["catch"].splice(a,0,{errors:[],execute:[]})},t.hasDefault=function(){var t=e.selectedNode["catch"].length-1;return!(t<0)&&void 0!==e.selectedNode["catch"][t]["default"]},t.addCatchDefault=function(){t.hasDefault()||e.selectedNode["catch"].push({"default":[]})},t.removeCatch=function(t){e.selectedNode["catch"].splice(t,1)},t.moveUp=function(t){if(!(t<=0)){var a=[];e.selectedNode["catch"].forEach(function(n,o){o!==t&&(o===t-1?(a.push(e.selectedNode["catch"][t]),a.push(n)):a.push(n))}),e.selectedNode["catch"]=a}},t.moveDown=function(t){if(!(t>=e.selectedNode["catch"].length-1)){var a=[];e.selectedNode["catch"].forEach(function(n,o){o!==t&&(o===t+1?(a.push(n),a.push(e.selectedNode["catch"][t])):a.push(n))}),e.selectedNode["catch"]=a}},t.canMoveUp=function(t){return void 0===e.selectedNode["catch"][t]["default"]&&t>0},t.canMoveDown=function(a){return void 0===e.selectedNode["catch"][a]["default"]&&(t.hasDefault()?a<e.selectedNode["catch"].length-2:a<e.selectedNode["catch"].length-1)}}function ErrorFilterController(e){var t=this;t.errors={ConnectionError:!0,SOAPError:!0,OperationError:!0},e.selectedNode.$$stopOnError=void 0!==e.selectedNode["stop-on-error"],e.$watch("selectedNode.$$stopOnError",function(){e.selectedNode.$$stopOnError?e.selectedNode["stop-on-error"][0]||(e.selectedNode["stop-on-error"]=[]):delete e.selectedNode["stop-on-error"]}),t.filter=function(){var a=this.searchText.toLowerCase();return Object.keys(t.errors).filter(function(t){return t.toLowerCase().indexOf(a)!==-1&&(!e.selectedNode["stop-on-error"]||e.selectedNode["stop-on-error"].indexOf(t)<0)})}}function CatchBlockController(e){var t=this;t.errors={ConnectionError:!0,JavaScriptError:!0,PropertyError:!0,RedactionError:!0,TransformError:!0,RuntimeError:!0,SOAPError:!0,OperationError:!0,BadRequestError:!0,UnauthorizedError:!0,ForbiddenError:!0,ValidateError:!0},e.policies&&e.policies.forEach(function(e){e.errors&&e.errors.forEach(function(e){t.errors[e]=!0})});var a,n=function(e,t){e.forEach(function(e){"throw"===e.$$type&&e.name&&(t[e.name]=!0),e.execute&&a(e.execute,t),e.otherwise&&a(e.otherwise,t),e["case"]&&n(e["case"],t)})};a=function(e,t){e.forEach(function(e){var o=null;Object.keys(e).forEach(function(i){o=e[i],"throw"===o.$$type&&o.name&&(t[o.name]=!0),o.execute&&a(o.execute,t),o["case"]&&n(o["case"],t)})})},a(e.nodes,t.errors),e["catch"]["default"]||e["catch"].errors||(e["catch"].errors=[]),e["catch"]["default"]||e["catch"].execute||(e["catch"].execute=[]),t.filter=function(){var a=this.searchText.toLowerCase();return Object.keys(t.errors).filter(function(t){if(t.toLowerCase().indexOf(a)===-1)return!1;for(var n=0;n<e.selectedNode["catch"].length;n++)if(!e.selectedNode["catch"][n]["default"])for(var o=0;o<e.selectedNode["catch"][n].errors.length;o++){var i=e.selectedNode["catch"][n].errors[o];if(t===i)return!1}return!0})},t.isDefault=function(){return void 0!==e["catch"]["default"]}}function ValidationDefinitionController(e){var t=[{name:"request"},{name:"response"}];e.swaggerDocument.definitions&&Object.keys(e.swaggerDocument.definitions).forEach(function(e){t.push({name:"#/definitions/"+e})}),e.definitions=t}function TLSProfileController(e,t,a){var n=[],o=t.selectedNode["tls-profile"];e.offlineMode||a.query({orgId:e.orgId}).$promise.then(function(e){e.forEach(function(e){n.push({name:e.title,value:e.name})})}),this.tlsProfiles=n,t.$watch("selectedNode['secure-gateway']",function(){t.selectedNode["secure-gateway"]?(t.tlsStyle={color:"#e0e0e0"},o=t.selectedNode["tls-profile"],delete t.selectedNode["tls-profile"]):(t.selectedNode["tls-profile"]=o,t.tlsStyle={})})}function UserRegistryController(e,t,a){var n=[];e.offlineMode||a.query({orgId:e.orgId}).$promise.then(function(e){e.forEach(function(e){n.push({name:e.title,value:e.name})})}),this.userRegistries=n}function SetVariableController(e){var t=this;t.addAction=function(){e.selectedNode.actions.push({set:"",value:""})},t.removeAction=function(t){e.selectedNode.actions.splice(t,1)}}function SetVariableActionController(e){var t=this;e.valueType="string",void 0!==e.action.value&&("boolean"==typeof e.action.value?e.valueType="boolean":"number"==typeof e.action.value&&(e.valueType="number")),e.action.add?e.actionValue="add":e.action.clear?e.actionValue="clear":e.actionValue="set";var a=!1;e.$watch("actionValue",function(){return a?("clear"===e.actionValue&&delete e.action.value,void["set","add","clear"].forEach(function(t){t!==e.actionValue&&void 0!==e.action[t]&&(e.action[e.actionValue]=e.action[t],delete e.action[t])})):void(a=!0)}),t.modifyValue=function(){"boolean"===e.valueType&&"boolean"!=typeof e.action.value?e.action.value=!0:"number"===e.valueType&&"number"!=typeof e.action.value?e.action.value=0:"string"===e.valueType&&"string"!=typeof e.action.value&&(e.action.value="")}}function RedactController(e){var t=this;t.addRedact=function(){e.selectedNode.actions.push({from:[],action:"redact"})},t.removeRedact=function(t){e.selectedNode.actions.splice(t,1)}}function RedactItemController(e){this.allFields=function(){return!!e.action.from&&(1===e.action.from.length&&"all"===e.action.from[0])},e.$watch("action.from",function(){e.action.from&&e.action.from.indexOf("all")>-1&&e.action.from.length>1&&(e.action.from=["all"])},!0)}function mapperController(e,t,a,n,o,i,s,r){function l(t,a,n,o){var s,r,l,c,d,p=40,m=$(t);for(s=0;s<m.length;s++){var u=$(t+":nth("+s+")");if(r=u.position(),0!==r.top||0!==r.left){l=u.height(),e.paths[u.attr("path")]=new i(u.attr("path"),u.attr("dimensions"),u.attr("container"),u.attr("type"));var g=0;n.push({cx:2*I.connectorRadius,cy:r.top-p+g+12,radius:I.connectorRadius,"class":u.hasClass("collapsed")?"collapsed-"+a:a,connectorPath:e.paths[u.attr("path")].getPath(),connectorDimension:e.paths[u.attr("path")].getDimensionality(),connectorParent:c,connectorItem:d}),o&&o.push({width:30,height:20,x:0,y:r.top-p+g+2,"class":"click-zone-input",connectorPath:e.paths[u.attr("path")].getPath(),connectorDimension:e.paths[u.attr("path")].getDimensionality(),connectorParent:c,connectorItem:d,position:"input"})}}}function c(t,a,n,o){var s,r,l,c,d,p=40,m=$("svg.mapper-canvas"),u=$(t);for(s=0;s<u.length;s++)if(c=$(t+":nth("+s+")"),r=c.position(),0!==r.top||0!==r.left){l=c.height(),e.paths[c.attr("path")]=new i(c.attr("path"),c.attr("dimensions"),c.attr("container"),c.attr("type")),d=a,e.map.hasMapping(e.paths[c.attr("path")])&&(d+=" mapped");var g=0;n.push({cx:m.width()-2*I.connectorRadius,cy:r.top-p+g+12,radius:I.connectorRadius,"class":c.hasClass("collapsed")?"collapsed-"+d:d,connectorPath:e.paths[c.attr("path")].getPath(),connectorDimension:e.paths[c.attr("path")].getDimensionality()}),o&&o.push({width:30,height:20,x:m.width()-30,y:r.top-p+g+2,"class":"click-zone-output",connectorPath:e.paths[c.attr("path")].getPath(),connectorDimension:e.paths[c.attr("path")].getDimensionality(),position:"output"})}}function d(e,t){d3.event.stopPropagation(),M&&M.attr("class",M.attr("class").replace(" mapper-group-selected","")),e.attr("class",e.attr("class")+" mapper-group-selected"),M=e;var a=j.filter(function(e){return e.target===t});a.length>0&&a[0].config&&a[0].config.fn&&($(".mapper-function textarea")[0].value=a[0].config.fn,$(".mapper-function textarea")[0].connectorPath=t)}function p(e,t,a,n,o,i){e=1*e,t=1*t,a=1*a,n=1*n,F>0&&(t-=F),L>0&&(t+=L),o&&z>0&&(n-=z),o&&R>0&&(n+=R),e+=I.connectorRadius/2+2,a-=I.connectorRadius/2+2;var s=(a-e)/2+.05*(a-e),r=I.curveFactor*(a-e),l="M "+a+" "+n;if(l+="L "+(a-s)+" "+n,l+="C "+(a-r-s)+" "+n,l+=" "+(e+r)+" "+t,l+=" "+e+" "+t,!D){var c=d3.select("svg.mapper-canvas");D=c.append("g"),D.attr("class","mapper-group")}if(P||(P=D.insert("path",".function-node"),i?P.attr("class","collapsed-mapper-line"):P.attr("class","mapper-line")),P.attr("d",l),o){var p=D;P.attr("connectorPath",o),P.on("click",function(){d(p,o)})}}function m(){var t,a,n,o=e.map.getModel(),i=d3.selectAll("circle.output-node"),s=d3.selectAll("circle.collapsed-output-node"),r=d3.selectAll("circle.input-node"),l=d3.selectAll("circle.collapsed-input-node");o.forEach(function(e){if(e.source&&e.target){var o=!1;if(t=i.filter(function(t){return t.connectorPath===e.target||t.connectorPath+".$item"===e.target||t.connectorPath===e.target+".$item"}).data(),0===t.length){o=!0;for(var c=e.target.split(".");0===t.length&&c.length>0;)n=c.join("."),t=s.filter(function(e){return e.connectorPath===n||e.connectorPath+".$item"===n||e.connectorPath===n+".$item"}).data(),c.pop()}e.source.forEach(function(e){var n=!1;if(0===e.indexOf("#/")&&(e=e.substring(2)),a=r.filter(function(t){return t.connectorPath===e||t.connectorPath+".$item"===e||t.connectorPath===e+".$item"}).data(),0===a.length){n=!0;for(var i=e.split(".");0===a.length&&i.length>0;)e=i.join("."),a=l.filter(function(t){return t.connectorPath===e||t.connectorPath+".$item"===e||t.connectorPath===e+".$item"}).data(),i.pop()}a.forEach(function(e){t.forEach(function(t){p(e.cx,e.cy,t.cx,t.cy,t.connectorPath,n||o),P=null})})})}})}function u(){var e=d3.select("svg.mapper-canvas");e.selectAll("g").remove(),m(),D=null}function g(){if(!e.map.readOnly){if(D&&E){var t=$("svg.mapper-canvas");t.unbind("mousemove"),D.remove()}P=null,D=null,E=null,M=null}}function h(e){var t=e.offsetX,a=e.offsetY;if(e.target&&"svg"!==e.target.nodeName){e.target.getAttribute("position");G&&(t+=1*e.target.getAttribute("x"),a+=1*e.target.getAttribute("y"))}p(8,E.y+10,t-I.backOff,a)}function f(t){if(d3.event.stopPropagation(),E!==t&&!e.map.readOnly){var a=$("svg.mapper-canvas");if("output-node"===t["class"]||"click-zone-output"===t["class"]||"output-node mapped"===t["class"]||"click-zone-output mapped"===t["class"]){if(!E||!D)return void A.showTargetDetails(t);var n=e.paths[E.connectorPath],o=e.paths[t.connectorPath];e.map.setMappingForPath(o,n),e.markDirty(),e.$apply(),p(8,E.y+10,192,t.y+10,t.connectorPath),$(".output-node:not(.mapped)").filter(function(e,a){return a.getAttribute("connectorPath")===t.connectorPath}).attr("class","output-node mapped"),B=!1,a.unbind("mousemove"),P=null,D=null,E=null,u()}}}function y(t){if(E!==t&&(d3.event.stopPropagation(),!e.map.readOnly)){var a=$("svg.mapper-canvas");"input-node"!==t["class"]&&"click-zone-input"!==t["class"]||(E=t,a.bind("mousemove",h))}}function v(){F=$(".mapper-inputs-container")[0].scrollTop,d3.selectAll(".input-node").attr("transform","translate(0, "+(0-F+L)+")"),d3.selectAll(".collapsed-input-node").attr("transform","translate(0, "+(0-F+L)+")"),d3.selectAll(".click-zone-input").attr("transform","translate(0, "+(0-F+L)+")")}function b(){v(),u()}function w(){z=$(".mapper-outputs-container")[0].scrollTop,d3.selectAll(".output-node").attr("transform","translate(0, "+(0-z+R)+")"),d3.selectAll(".collapsed-output-node").attr("transform","translate(0, "+(0-z+R)+")"),d3.selectAll(".click-zone-output").attr("transform","translate(0, "+(0-z+R)+")")}function x(){w(),u()}function C(e){var t;return e.properties||e.items||e.allOf?t=e:e.$ref?t=e:e.type&&(e.$$byref=!0,t=e),t}function S(t){if(e.selectedNode.inputs&&(t||"map"!==A.currentPage||!e.inputSchemas)){var a=[];Object.keys(e.selectedNode.inputs).forEach(function(t){var n=e.selectedNode.inputs[t].schema,o=C(n);o&&(o=o.$ref?angular.copy(o):o,o.$$title=t,a.push(o))}),e.inputSchemas=a}}function O(t){if(e.selectedNode.outputs&&(t||"map"!==A.currentPage||!e.outputSchemas)){var a=[];Object.keys(e.selectedNode.outputs).forEach(function(t){var n=e.selectedNode.outputs[t].schema,o=C(n);o&&(o=o.$ref?angular.copy(o):o,o.$$title=t,a.push(o))}),e.outputSchemas=a}}var A=this;A.unnamed="$item",A.currentPage="map";var N=[{name:n("assembly_inline_definition"),value:"inline"},{name:"integer",type:"integer",format:"int32"},{name:"long",type:"integer",format:"int64"},{name:"float",type:"number",format:"float"},{name:"double",type:"number",format:"double"},{name:"string",type:"string"},{name:"byte",type:"string",format:"byte"},{name:"binary",type:"string",format:"binary"},{name:"boolean",type:"boolean"},{name:"date",type:"string",format:"date"},{name:"dateTime",type:"string",format:"date-time"},{name:"password",type:"string",format:"password"},{name:"array",type:"array"},{name:"object",type:"object"}],T=[];e.swaggerDocument.definitions&&(Object.keys(e.swaggerDocument.definitions).forEach(function(e){N.push({name:"#/definitions/"+e,value:"#/definitions/"+e})}),T=Object.keys(e.swaggerDocument.definitions),e.swaggerDefinitions=angular.copy(e.swaggerDocument.definitions)),e.swaggerDocument["x-ibm-configuration"]&&e.swaggerDocument["x-ibm-configuration"].targets&&Object.keys(e.swaggerDocument["x-ibm-configuration"].targets).forEach(function(t){var a=e.swaggerDocument["x-ibm-configuration"].targets[t];Object.keys(a.definitions).forEach(function(e){N.push({name:"#/"+t+"/definitions/"+e,value:"#/x-ibm-configuration/targets/"+t+"/definitions/"+e})})}),e.definitions=N,e.schemas=T;var k=0;window.navigator&&(/firefox/i.test(window.navigator.userAgent)||/AppleWebKit/i.test(window.navigator.userAgent))&&(k=1e3),e.includeEmptyXMLElements=function(t){return"undefined"==typeof t?!e.selectedNode.options||("undefined"==typeof e.selectedNode.options.includeEmptyXMLElements||e.selectedNode.options.includeEmptyXMLElements):void(t?e.selectedNode.options&&delete e.selectedNode.options.includeEmptyXMLElements:(e.selectedNode.options||(e.selectedNode.options={}),e.selectedNode.options.includeEmptyXMLElements=!1))},e.namespaceInheritance=function(t){return"undefined"==typeof t?!e.selectedNode.options||("undefined"==typeof e.selectedNode.options.namespaceInheritance||e.selectedNode.options.namespaceInheritance):void(t?e.selectedNode.options&&delete e.selectedNode.options.namespaceInheritance:(e.selectedNode.options||(e.selectedNode.options={}),e.selectedNode.options.namespaceInheritance=!1))},e.inlineNamespaces=function(t){return"undefined"==typeof t?!e.selectedNode.options||("undefined"==typeof e.selectedNode.options.inlineNamespaces||e.selectedNode.options.inlineNamespaces):void(t?e.selectedNode.options&&delete e.selectedNode.options.inlineNamespaces:(e.selectedNode.options||(e.selectedNode.options={}),e.selectedNode.options.inlineNamespaces=!1))},e.$on("resize",function(){a(A.constructCanvas,k)}),e.markDirty=function(){e.$emit("mark_api_dirty")},A.switchToMap=function(){A.currentPage="map",a(A.constructCanvas,k)},A.addInput=function(t,a,n){a||(a={type:"object"}),n||(n="request.body"),t||(t="input");for(var o=t,i=1;e.selectedNode.inputs.hasOwnProperty(t);)t=o+"_"+i++;e.selectedNode.inputs[t]={schema:a,variable:n}},A.addParametersForOperation=function(t){var a=[],n=e.swaggerDocument.paths[t.path],o=n[t.verb];o.parameters&&(a=a.concat(o.parameters)),n.parameters&&(a=a.concat(n.parameters)),a.forEach(function(t){var a=t.name;t.$ref&&(a=t.$ref.replace("#/parameters/",""),t=e.swaggerDocument.parameters[a]);var n=t.schema?t.schema:{type:t.type},o="body"===t["in"]?"request.body":"header"===t["in"]?"request.headers."+a:"request.parameters."+a;A.addInput(a,n,o)})},A.addOutputsForOperation=function(t){var a=e.swaggerDocument.paths[t.path][t.verb],n=a.responses[200]||a.responses[201]||a.responses["default"];if(n){var o=n.schema?n.schema:{type:"object"},i="message.body";A.addOutput("response",o,i)}},A.addOutput=function(t,a,n){a||(a={type:"object"}),n||(n="message.body"),t||(t="output");for(var o=t,i=1;e.selectedNode.outputs.hasOwnProperty(t);)t=o+"_"+i++;e.selectedNode.outputs[t]={schema:a,variable:n}},A.removeInput=function(t){delete e.selectedNode.inputs[t]},A.removeOutput=function(t){delete e.selectedNode.outputs[t]};var I={connectorRadius:4,backOff:4,indentFactor:8,curveFactor:.3},P=null,D=null,E=null,M=null,j=[],B=!0,L=0,F=0,R=0,z=0;A.updateModelActions=function(t){e.selectedNode.actions=t},e.map=new s(e.selectedNode,e.swaggerDocument,A.updateModelActions),A.showTargetDetails=function(n){var o=e.paths[n.connectorPath],i=e.map.getMappingForPath(o),s=o.type;t.show({controller:"TargetConnectorController",flex:"50",backdrop:"static",keyboard:!1,templateUrl:"src/html/target-connector.html",parent:angular.element(document.body),focusOnOpen:!1,locals:{mapping:i,target:n,paths:e.paths,valueType:s}}).then(function(t){var n=""+t["default"];if(t.remove===!0||_.isEmpty(t.from)&&_.isEmpty(t.value)&&_.isEmpty(n)&&!t.emptyString?(e.map.deleteMappingForPath(o),e.markDirty()):(i||(e.map.setMappingForPath(o),e.markDirty(),i=e.map.getMappingForPath(o)),t.from&&0!==t.from.length?i.source=t.from:delete i.source),t.value?i.value=t.value:delete i.value,t.foreach?i.foreach=t.foreach:t.from&&delete i.foreach,void 0!==t["default"]){if(t.valueType)switch(t.valueType){case"boolean":n=n.toLowerCase(),"true"!==n&&"false"!==n||(n="true"===n);break;case"number":case"integer":var s=Number(n);isFinite(s)&&(n=s)}i["default"]=n}else delete i["default"];t.merge?i.merge=!0:delete i.merge,A.updateModelActions(e.map.getActions()),a(A.constructCanvas,k)})},e.paths={},r.setHandler(e);var G=window.navigator&&/firefox/i.test(window.navigator.userAgent);A.eventsBound=!1,A.constructCanvas=function(a){if("map"===A.currentPage){var n=$(".mapper-inputs-container")[0],o=$(".mapper-outputs-container")[0];if(n&&o){L=n?n.scrollTop:0,R=o?o.scrollTop:0,A.eventsBound||($(".mapper-inputs-container").on("scroll",_.throttle(b,100,{leading:!0})),$(".mapper-outputs-container").on("scroll",_.throttle(x,100,{leading:!0})));var i=$("svg.mapper-canvas");A.eventsBound||i.on("mouseup",g),A.eventsBound=!0;var s=d3.select("svg.mapper-canvas"),r=[],d=[];l(".mapper-input-schema .mapper-schema-path","input-node",r,d),c(".mapper-output-schema .mapper-schema-path","output-node",r,d);var p=!0;if(a&&(p=!1),e.map&&e.inputSchemas&&e.outputSchemas&&!e.pruneDialog){var m=e.map.pruneModel(e.inputSchemas,e.outputSchemas,p,!0);m.length>0&&(e.pruneDialog=t.show({controller:"PruneConfirmationController",flex:"50",backdrop:"static",keyboard:!1,templateUrl:"src/html/confirmation-dialog.html",parent:angular.element(document.body),focusOnOpen:!1,locals:{parentScope:e,saveDiscriminator:p,unrecognized:m}}))}s.selectAll("circle").remove();var h=s.selectAll("circle").data(r).enter().append("circle");h.attr("cx",function(e){return e.cx}).attr("cy",function(e){return e.cy}).attr("r",function(e){return e.radius}).attr("class",function(e){return e["class"]}).attr("connectorPath",function(e){return e.connectorPath}),s.selectAll("rect").remove();var C=s.selectAll("rect").data(d).enter().append("rect");C.attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).attr("width",function(e){return e.width}).attr("height",function(e){return e.height}).attr("class",function(e){return e["class"]}).attr("connectorPath",function(e){return e.connectorPath}).attr("position",function(e){return e.position}).on("mousedown",y).on("mouseup",f),v(),w(),u()}}},e.$on("input-output-modified",function(){S(),O()}),e.$watch("inputSchemas",function(){a(A.constructCanvas,k)}),e.$watch("outputSchema",function(){a(A.constructCanvas,k)}),e.$watch("selectedNode.inputs",function(){S()},!0),e.$watch("selectedNode.outputs",function(){O()},!0),e.$on("json-schema-view-property-collapsed",function(){a(A.constructCanvas,k)}),e.$on("json-schema-view-property-modified",function(){S(!0),O(!0)}),e.$on("json-schema-view-refresh",function(e,t){a(function(){A.constructCanvas(t)},k)});var q;e.$watch("selectedNode.$$hashKey",function(){q!==e.selectedNode.$$hashKey&&(q||(q=e.selectedNode.$$hashKey),a(function(){e.map=new s(e.selectedNode,e.swaggerDocument,A.updateModelActions),S(!0),O(!0),A.constructCanvas()},k))},!0)}function targetConnectorController(e,t,a,n,o,i){if(a&&a.source&&(e.sources=angular.copy(a.source)),e.valueType=i,e.merge=!(!a||a.merge!==!0),e.emptyString=!(!a||""!==a["default"]),a&&void 0!==a["default"]&&(e["default"]=a["default"]),a&&a.value&&(e.value=a.value),e.mergeable=n.connectorDimension>0,a&&a.target){e.target=a.target;var s=o[a.target],r={};if(s.getDimensionality()>0&&e.sources){var l=s.dimensionality;if(l.forEach(function(e){r[e]=null}),a&&a.foreach){var c="",d="";a.foreach.forEach(function(e){r[d+e.target]=c+e.source,c+=e.source+".",d+=e.target+"."})}e.foreach=r}}var p=[];e.sources&&e.sources.length>0&&e.sources.forEach(function(e){if(e){var t=e.split(".");if(1===t.length)p.push(t[0]);else for(var a=0;a<t.length-1;a++){var n=t.slice(0,a+1).join(".");p.indexOf(n)<0&&p.push(n)}}}),p.length>0&&(e.iterators=p),a&&(e.value=angular.copy(a.value)),e.removeMapping=function(t){e.sources=e.sources.filter(function(e){return t!==e}),0===e.sources.length&&delete e.sources},e.removeStaticValue=function(){delete e.value},e.deleteMapping=function(){t.hide({remove:!0})},e.updateModel=function(){var a={from:e.sources,value:e.value,remove:e.remove};if(e.valueType&&(a.valueType=e.valueType),e.emptyString===!0?(a["default"]="",a.emptyString=e.emptyString):void 0!==e["default"]&&(a["default"]=e["default"]),e.merge===!0&&(a.merge=e.merge),e.foreach){a.foreach=[];var n="",o="";Object.keys(e.foreach).forEach(function(t){e.foreach[t]&&(a.foreach.push({target:t.replace(o,""),source:e.foreach[t].replace(n,"")}),o=t+".",n=e.foreach[t]+".")}),0===a.foreach.length&&delete a.foreach}t.hide(a)},e.cancel=function(){t.cancel()},e.aceLoaded=function(e){e.focus()}}function pruneConfirmationController(e,t,a,n,o){e.unrecognized=o,e.prune=function(){a.map.pruneModel(a.inputSchemas,a.outputSchemas,n,!1),t.cancel(),a.pruneDialog=null,a.$emit("json-schema-view-refresh",!1)},e.cancel=function(){t.cancel(),a.pruneDialog=null}}function MapInputOutputController(e,t,a){var n=this;e.object.schema&&(_.isEmpty(e.object.schema)?e.selectedDefinition="":e.object.schema.$ref?e.selectedDefinition=e.object.schema.$ref:!e.object.schema.type||e.object.schema.items||e.object.schema.properties||e.object.schema.allOf?e.selectedDefinition="inline":e.selectedDefinition=e.object.schema.type),n.contentTypes=[{value:"none",name:a("assemblyContentTypeNone")},{value:"application/json",name:"application/json"},{value:"application/xml",name:"application/xml"},{value:"text/xml",name:"text/xml"},{value:"text/plain",name:"text/plain"}],e.$contentType=function(t){return arguments.length?void(""===t||"none"===t?delete e.object.content:e.object.content=t):e.object.content||"none"},e.contentType=e.object.content||"none",e.$watch("contentType",function(){"string"==typeof e.contentType&&e.$contentType(e.contentType)}),e.$inputName=function(t){if(!arguments.length)return e.name;var a={};for(var n in e.selectedNode.inputs)n===e.name?(a[t]=e.selectedNode.inputs[n],e.map.inputRenamed(t,n)):a[n]=e.selectedNode.inputs[n];e.selectedNode.inputs=a,e.name=t},e.$outputName=function(t){if(!arguments.length)return e.name;var a={};for(var n in e.selectedNode.outputs)n===e.name?(a[t]=e.selectedNode.outputs[n],e.map.outputRenamed(t,n)):a[n]=e.selectedNode.outputs[n];e.selectedNode.outputs=a,e.name=t};var o=!1;e.$watch("selectedDefinition",function(){return o?("inline"===e.selectedDefinition?n.launchInlineEditor():0===e.selectedDefinition.indexOf("#/")?e.object.schema={$ref:e.selectedDefinition}:e.object.schema={type:e.selectedDefinition},void e.$emit("input-output-modified")):void(o=!0)}),n.launchInlineEditor=function(){t.open({templateUrl:"src/html/inline-schema.html",windowTemplateUrl:"apim/partials/main-template.html",controller:"InlineSchemaController",size:"lg",scope:e})}}function InlineSchemaController(e,t){function a(e,t){return 0===e.indexOf("@")&&0===t.indexOf("@")||0===e.indexOf("__")&&0===t.indexOf("__")?0:0===e.indexOf("@")&&0===t.indexOf("@")?0:0===e.indexOf("@")?-1:0===e.indexOf("__")&&0===t.indexOf("__")?0:0===e.indexOf("__")&&0===t.indexOf("@")?1:0===e.indexOf("__")?-1:0===t.indexOf("@")||0===t.indexOf("__")?1:e<t?-1:e>t?1:0}var n;if(n="function"==typeof window.X2JS?new window.X2JS({attributePrefix:"@"}):{xml2js:function(e){return e}},e.selectedTabIndex=0,!_.isEmpty(e.object.schema)&&(e.inlineJsonSchema=angular.toJson(e.object.schema,!0),e.inlineYamlSchema=jsyaml.safeDump(angular.fromJson(angular.toJson(e.object.schema)),{lineWidth:-1}),e.object.schema.example))try{JSON.parse(e.object.schema.example),e.inlineJsonObject=e.object.schema.example}catch(o){e.inlineXMLObject=e.object.schema.example}e.validSchema=!1,e.$watch("inlineYamlSchema",function(){if(0===e.selectedTabIndex)try{jsyaml.safeLoad(e.inlineYamlSchema),e.validSchema=!0}catch(t){e.validSchema=!1}}),e.$watch("inlineJsonSchema",function(){if(1===e.selectedTabIndex)try{JSON.parse(e.inlineJsonSchema),e.validSchema=!0}catch(t){e.validSchema=!1}}),e.$watch("inlineJsonObject",function(){if(2===e.selectedTabIndex)try{window.jsonSchemaGenerator(JSON.parse(e.inlineJsonObject)),e.validSchema=!0}catch(t){e.validSchema=!1}}),e.$watch("inlineXMLObject",function(){if(3===e.selectedTabIndex)try{var t=n.xml2js(e.inlineXMLObject);if(null===t)return void(e.validSchema=!1);window.jsonSchemaGenerator(t),e.validSchema=!0}catch(a){e.validSchema=!1}}),e.generate=function(){var t={type:"object",allOf:[]};e.inputSchemas.forEach(function(e){t.allOf.push(e)}),e.inlineSchema=e.asJson?JSON.stringify(t):jsyaml.safeDump(t)};var i=function(e,t){if(e&&"undefined"!=typeof t){if(delete e.required,delete e.$schema,"object"!=typeof t)return delete e.properties,void(e.type=typeof t);if("array"===e.type)return delete e.uniqueItems,delete e.minItems,e.items&&e.items.properties&&!e.items.type&&(e.items.type="object"),void i(e.items,t[0]);for(var a in e.properties)delete e.properties[a].minLength,
i(e.properties[a],t[a])}},s={},r=function(e,t,n){if(e&&"undefined"!=typeof t){if(delete e.required,delete e.$schema,"object"!=typeof t)return delete e.properties,e.type=typeof t,void(""!==n&&(e.xml={namespace:""}));if("array"===e.type)return delete e.uniqueItems,delete e.minItems,e.items&&e.items.properties&&!e.items.type&&(e.items.type="object"),void r(e.items,t[0],n);var o=Object.keys(e.properties).sort(a);e.xml={namespace:""},o.forEach(function(a){if(delete e.properties[a].minLength,0===a.indexOf("@")){var o,i=a.substring(1);if(0===i.indexOf("xmlns"))delete e.properties[a],e.xml={namespace:t[a]},o=i.split(":"),o=o.length>1?o[1]:"",s[o]=t[a];else{if(i.indexOf(":")>0){var l=i.split(":");i=l[1],o=l[0]}e.properties[i]=e.properties[a],delete e.properties[a],e.properties[i].xml={attribute:!0},o&&(e.properties[i].xml.prefix=o)}}else 0===a.indexOf("__")?("__prefix"===a?t[a]!==n?(n=t[a],e.xml||(e.xml={}),e.xml.prefix=t[a],s[e.xml.prefix]&&(e.xml.namespace=s[e.xml.prefix])):delete e.xml:"__text"===a&&(e.type="string"),delete e.properties[a]):t[a]&&"function"!=typeof t[a]?r(e.properties[a],t[a],n):delete e.properties[a]}),e.properties&&0===Object.keys(e.properties).length&&delete e.properties}};e.generateAndShow=function(){var t,a="";switch(e.selectedTabIndex){case 2:t=JSON.parse(e.inlineJsonObject),a=window.jsonSchemaGenerator(t),i(a,t);var o=JSON.stringify(t);a.example=o;break;case 3:t=n.xml2js(e.inlineXMLObject),a=window.jsonSchemaGenerator(t),s={},r(a,t,""),a.example=e.inlineXMLObject}try{e.inlineYamlSchema=jsyaml.safeDump(a)}catch(l){e.inlineYamlSchema=jsyaml.dump(a)}e.inlineJsonSchema=JSON.stringify(a),e.object.schema=a,e.selectedTabIndex=0},e.commit=function(){var a,o="";switch(e.selectedTabIndex){case 0:o=jsyaml.safeLoad(e.inlineYamlSchema);break;case 1:o=JSON.parse(e.inlineJsonSchema);break;case 2:a=JSON.parse(e.inlineJsonObject),o=window.jsonSchemaGenerator(a),i(o,a),o.example=e.inlineJsonObject;break;case 3:a=n.xml2js(e.inlineXMLObject),o=window.jsonSchemaGenerator(a),s={},r(o,a,""),o.example=e.inlineXMLObject}e.object.schema=o,t.close()},e.cancel=function(){t.close()}}function ConditionController(e){function t(e,a){return e&&a?angular.equals(e.left,a)?e.right:angular.equals(e.right,a)?e.left:(e.left=t(e.left,a),e.right=t(e.right,a),e):e}e.expression=window.jsep(e.condition),e.$watch("expression",function(){var t=window.jseb(e.expression);e.$emit("condition-change",t),console.log(t)},!0),e.deleteExpression=function(a){var n=t(e.expression,a);for(var o in e.expression)e.expression.hasOwnProperty(o)&&delete e.expression[o];angular.extend(e.expression,n)}}function ConditionExpressionController(e,t){e.$watch("expression",function(){e.expressionString=window.jseb(e.expression),t.isOperationExpression(e.expression)?(e.isOperation=!0,e.operationString=t.getOperationString(e.expression)):e.isOperation=!1}),e.expand=function(t){e.expanded=t},e.isLogicalExpression=function(){return"LogicalExpression"===e.expression.type},e.changeOperator=function(t){e.expression.operator=t},e.insertLogicalExpression=function(t){var a=angular.copy(e.expression);for(var n in e.expression)e.expression.hasOwnProperty(n)&&delete e.expression[n];e.expression.operator=t,e.expression.type="LogicalExpression";var o=window.jsep('$(operation.verb) == "get"');o.$$edit=!0,e.expression.right=o,e.expression.left=a},e.commitExpression=function(){try{var t=window.jsep(e.expressionString);for(var a in e.expression)e.expression.hasOwnProperty(a)&&delete e.expression[a];angular.extend(e.expression,t)}catch(n){}}}function ConditionExpressionLeftController(e,t){e.parentExpression=e.expression,e.expression=e.parentExpression.left,e.$watch("parentExpression",function(){e.expression=e.parentExpression.left},!0),t("ConditionExpressionController",{$scope:e})}function ConditionExpressionRightController(e,t){e.parentExpression=e.expression,e.expression=e.parentExpression.right,e.$watch("parentExpression",function(){e.expression=e.parentExpression.right},!0),t("ConditionExpressionController",{$scope:e})}ace.define("ace/theme/atom_dark",["require","exports","module","ace/lib/dom"],function(e,t,a){t.isDark=!0,t.cssClass="ace-atom-dark",t.cssText=".ace-atom-dark .ace_gutter {background: #1a1a1a;color: #868989}.ace-atom-dark .ace_print-margin {width: 1px;background: #1a1a1a}.ace-atom-dark {background-color: #1d1f21;color: #A8FF60}.ace-atom-dark .ace_cursor {color: white}.ace-atom-dark .ace_marker-layer .ace_selection {background: #444444}.ace-atom-dark.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #000000;border-radius: 2px}.ace-atom-dark .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-atom-dark .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #888888}.ace-atom-dark .ace_marker-layer .ace_highlight {border: 1px solid rgb(110, 119, 0);border-bottom: 0;box-shadow: inset 0 -1px rgb(110, 119, 0);margin: -1px 0 0 -1px;background: rgba(255, 235, 0, 0.1);}.ace-atom-dark .ace_marker-layer .ace_active-line {background: #2A2A2A}.ace-atom-dark .ace_gutter-active-line {background-color: #2A2A2A}.ace-atom-dark .ace_stack {background-color: rgb(66, 90, 44)}.ace-atom-dark .ace_marker-layer .ace_selected-word {border: 1px solid #888888}.ace-atom-dark .ace_invisible {color: #343434}.ace-atom-dark .ace_keyword,.ace-atom-dark .ace_meta,.ace-atom-dark .ace_storage,.ace-atom-dark .ace_storage.ace_type,.ace-atom-dark .ace_support.ace_type {color: #96CBFE}.ace-atom-dark .ace_keyword.ace_operator {color: #70C0B1}.ace-atom-dark .ace_constant.ace_character,.ace-atom-dark .ace_constant.ace_language,.ace-atom-dark .ace_constant.ace_numeric,.ace-atom-dark .ace_keyword.ace_other.ace_unit,.ace-atom-dark .ace_support.ace_constant,.ace-atom-dark .ace_variable.ace_parameter {color: #fe73fd}.ace-atom-dark .ace_constant.ace_other {color: #EEEEEE}.ace-atom-dark .ace_invalid {color: #CED2CF;background-color: #DF5F5F}.ace-atom-dark .ace_invalid.ace_deprecated {color: #CED2CF;background-color: #B798BF}.ace-atom-dark .ace_fold {background-color: #7AA6DA;border-color: #DEDEDE}.ace-atom-dark .ace_entity.ace_name.ace_function,.ace-atom-dark .ace_support.ace_function,.ace-atom-dark .ace_variable {color: #7AA6DA}.ace-atom-dark .ace_support.ace_class,.ace-atom-dark .ace_support.ace_type {color: #E7C547}.ace-atom-dark .ace_heading,.ace-atom-dark .ace_markup.ace_heading,.ace-atom-dark .ace_string {color: #B9CA4A}.ace-atom-dark .ace_entity.ace_name.ace_tag,.ace-atom-dark .ace_entity.ace_other.ace_attribute-name,.ace-atom-dark .ace_meta.ace_tag,.ace-atom-dark .ace_string.ace_regexp,.ace-atom-dark .ace_variable {color: #96CBFE}.ace-atom-dark .ace_comment {color: #7a7a7a}.ace-atom-dark .ace_c9searchresults.ace_keyword {color: #C2C280;}.ace-atom-dark .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYFBXV/8PAAJoAXX4kT2EAAAAAElFTkSuQmCC) right repeat-y}";var n=e("../lib/dom");n.importCssString(t.cssText,t.cssClass)}),angular.module("apiconnect-assembly",["ang-drag-drop","hc.marked","mohsen1.schema-form","apiconnect-assembly.mapper-schema","apiconnect-assembly.recursion-helper","ngMaterial","ngResource","ngSanitize","ngResize","pascalprecht.translate","apiconnect-assembly-localization","nsPopover","ui.ace"]).controller("AssemblerController",["$rootScope","$scope","$injector","translateFilter","$timeout","$mdSidenav","policyService","AssemblerTracking","triggerService","canvasAnimationService","assemblyModel",function(e,t,a,n,o,i,s,r,l,c,d){function p(e){var a=e.split("/").pop(),o={info:{description:e,name:a,title:a,display:{color:"#4B68FA",icon:"open_in_browser"},categories:[n("api_policy_assemblies")]},type:"subflow",assembly:{$ref:e}};t.subflows.push(o),t.policiesByType[a]=o}function m(){if(t.swaggerDocument){void 0===t.infoPanelBottom&&(t.infoPanelBottom=t.config&&"bottom"===t.config.flyout);var e,a=t.swaggerDocument[t.config.property];if(a&&a.assembly?(t.nodes=a.assembly.execute,e=t.$watch("showCatches",function(){t.showCatches&&(a.assembly["catch"]||(a.assembly["catch"]=[]),t.node={"catch":a.assembly["catch"],$$type:"catch"},e())})):t.swaggerDocument&&t.swaggerDocument.assembly?(t.nodes=t.swaggerDocument.execute,e=t.$watch("showCatches",function(){t.showCatches&&(t.swaggerDocument["catch"]||(t.swaggerDocument["catch"]=[]),t.node={"catch":t.swaggerDocument["catch"],$$type:"catch"},e())})):t.noAssembly=!0,t.swaggerDocument[t.config.property]&&t.swaggerDocument[t.config.property].targets){var n=[];Object.keys(t.swaggerDocument[t.config.property].targets).forEach(function(e){var a=t.swaggerDocument[t.config.property].targets[e];if(a.paths){var o="";if(a["x-ibm-configuration"]&&a["x-ibm-configuration"].assembly&&a["x-ibm-configuration"].assembly.execute){var i=a["x-ibm-configuration"].assembly.execute.filter(function(e){return void 0!==e.proxy});i.length>0&&(o=i[0].proxy["target-url"])}Object.keys(a.paths).forEach(function(e){var t=a.paths[e].post;if(t&&t.parameters&&t.responses){var i=null,s=t.parameters.filter(function(e){return"body"===e["in"]});s.length>0&&(i=s[0].schema);var r=null;if(t.responses["default"]&&(r=t.responses["default"].schema),s.length>0&&(i=s[0].schema),i&&r){var l="1.1";a["x-ibm-configuration"]&&a["x-ibm-configuration"]["wsdl-definition"]&&a["x-ibm-configuration"]["wsdl-definition"]["soap-version"]&&(l=a["x-ibm-configuration"]["wsdl-definition"]["soap-version"]);var c=t["x-ibm-soap"]["soap-action"],d="text/xml";"1.2"===l&&(d='application/soap+xml; charset=UTF-8; action="'+c+'"');var p={info:{description:t.description,name:t.operationId,display:{color:"#F5A623",icon:"open_in_browser"},categories:["Web Service Operation"]},type:"template",assembly:[{map:{title:t.operationId+": input",inputs:{},outputs:{body:{schema:i,variable:"message.body",content:"application/xml"},"content-type":{schema:{type:"string"},variable:"message.headers.content-type"}},actions:[{set:"content-type","default":d}]}},{invoke:{title:t.operationId+": invoke","target-url":o,timeout:60,verb:"POST","cache-response":"protocol","cache-ttl":900,output:t.operationId+"Out"}},{map:{title:t.operationId+": output",inputs:{input:{schema:r,variable:t.operationId+"Out.body",content:"application/xml"}},outputs:{},actions:[]}}]};"1.1"===l&&(p.assembly[0].map.outputs.SOAPAction={schema:{type:"string"},variable:"message.headers.SOAPAction"},p.assembly[0].map.actions.push({set:"SOAPAction","default":c})),n.push(p)}}})}}),t.templates=n}if(t.externalAssemblies&&(t.allowReferences=!0,Object.keys(t.externalAssemblies).forEach(function(e){p(e)})),t.showPolicyFilter=!t.swaggerDocument[t.config.property]||!t.swaggerDocument[t.config.property].gateway,t.swaggerDocument.swagger){var o=[],i=[],s={};t.swaggerDocument.paths&&Object.keys(t.swaggerDocument.paths).forEach(function(e){Object.keys(t.swaggerDocument.paths[e]).forEach(function(a){if(0!==a.indexOf("$$")&&"parameters"!==a){var n=e;t.swaggerDocument.basePath&&""!==t.swaggerDocument.basePath&&(n=t.swaggerDocument.basePath+n);var r;t.swaggerDocument.paths[e][a].operationId?(r={operationId:t.swaggerDocument.paths[e][a].operationId,verb:a,path:e,$$expressionString:"api.operation.id==='"+t.swaggerDocument.paths[e][a].operationId+"'"},o.push(r),i.push(t.swaggerDocument.paths[e][a].operationId),s[t.swaggerDocument.paths[e][a].operationId]={verb:a,path:e},s[a+":"+e]=t.swaggerDocument.paths[e][a].operationId):(r={verb:a,path:e,$$expressionString:"request.verb==='"+a.toUpperCase()+"'&&api.operation.path==='"+e+"'"},o.push(r),i.push(r))}})}),t.swaggerOperations=o,t.swaggerLegacyOperations=i,t.operationMap=s}}}if(this.assemblerOptions){t.config=JSON.parse(this.assemblerOptions),t.config.property||(t.config.property="x-ibm-configuration"),t.swaggerDocument=t.$parent[t.config.source],t.config.references&&(t.references=t.$parent[t.config.references]),t.swaggerSchema=t.$parent[t.config.schema],t.externalAssemblies=t.$parent[t.config.externalAssemblies];var u=a.get(t.config.policies);t.policies=u.getPolicies(),t.getPolicyPartial=u.getPolicyPartial}var g=[],h=150;t.index=-1,t.isAnimating=!1,t.gotFlowID=!1,t.aceLoaded=function(e){t.editor=e,e.setReadOnly(!0),e.$blockScrolling="Infinity"},t.isFlowSlim=function(){return t.config.slimFlowEditor},t.unsetSelectedNode=function(){t.applyToEachNode(t.nodes,function(e){e.$$isSelected=!1}),t.selectedNode=null};var f=function(e){t.config.slimFlowEditor=e,e?(t.infoPanelBottom=!0,t.scaleFactor=1,t.nodeFilter="",t.infoPanelOpen=!0,t.selectedNode=t.selectedNode?t.selectedNode:t.trigger||t.request,t.selectedNode.$$isSelected=!0,i("assembly-info").open(),o(function(){c.reset(),t.animateCanvasSlide(t)},400)):(t.infoPanelBottom=!1,t.horizontalTranslation=0)};t.isAppConnect=function(){return t.config.isAppConnect},t.allowNewNode=function(){return t.nodes.length<t.config.maxNodes},t.helpEnabled&&t.showHelp({id:"apim_help_api_editor_assemble",template:"apim/help/partials/help-api-editor-assemble.html"}),void 0!==localStorage&&(t.showCatches="true"===localStorage.getItem("apim-assembly-show-catches")),t.$watch("showCatches",function(){void 0!==localStorage&&localStorage.setItem("apim-assembly-show-catches",t.showCatches)}),t.jumpToCode=function(e,a){t.$emit("jump-to-policy",e,a)},t.subflows=[];var y=[];t.toggleSnipMode=function(){t.snipping=!t.snipping,t.snipping||y.forEach(function(e){delete e.$$snipped}),y=[],t.snippedAssembly={execute:[],"catch":[]}},t.snippedAssembly={execute:[],"catch":[]},t.highlightSnippedNode=function(e,a){if(t.snipping){a.$$snipped=!a.$$snipped,a.$$snipped?y.push(a):y=y.filter(function(e){return e!==a});var n=[];y.forEach(function(e){var t={};t[e.$$type]=e,n.push(t)}),t.snippedAssembly.execute=n}},t.$on("node-selected",t.highlightSnippedNode),t.snippedAssemblyEmpty=function(){if(0===t.snippedAssembly.execute.length&&0===t.snippedAssembly["catch"].length)return n("assembly_nothing_to_snip")},t.replaceWithReference=function(e,a){if(0!==y.length){p(a.reference);var n=y[0];if(void 0!==n.$$container&&void 0!==n.$$containerIndex){var o={assembly:{$ref:a.reference}};o.assembly.title=a.reference.split("/").pop(),n.$$container.splice(n.$$containerIndex+1,0,o),y.forEach(function(e){t.deleteNode(null,e)}),t.snippedAssembly={execute:[],"catch":[]},t.snipping=!1}}},t.$on("reference_created",t.replaceWithReference),t.setTestMode=function(e,a,n){t.testMode=e,t.debugMode=a,n&&(delete t.operationFilter,t.showOperationFilter=!1)},t.hideCategory={"work-in-progress":!0},t.renderingAssembly=!0,t.labelPlacement="right",t.model=d.flow,t.nodes=t.model.nodes,t.isDraggable=function(){return!t.operationFilter},t.$watch("swaggerDocument",function(){t.swaggerDocument&&(t.swaggerDocument.$promise&&t.swaggerDocument.$resolved===!1?t.swaggerDocument.$promise.then(m):m())}),t.createAssembly=function(){t.swaggerDocument[t.config.property]||(t.swaggerDocument[t.config.property]={}),t.swaggerDocument[t.config.property].assembly||(t.swaggerDocument[t.config.property].assembly={execute:[],"catch":[]}),t.noAssembly=!1,m()},t.policyDropped=function(e,a,n,o,i){if(e.info){var l=e.info.name,c=e.info.categories?e.info.categories.join(", "):"";r.track("assembly","policyDropped",{policyName:l,categories:c})}var d,p;e&&e.hashKey?(d={},d[e.type]=e.node,d[e.type].$$type=e.type,e.hashKey&&(d[e.type].$$touched=!!t.selectedNode&&t.selectedNode.$$touched)):"template"===e.type?p=e.assembly:"subflow"===e.type?(d={assembly:e.assembly},d.assembly.title=e.info.name):d=s.createPolicyInstance(e,t.config.versioning);var m;if(i)t.nodes.splice(n+1,0,d);else if(a){if(a["catch"]||a["case"])if(n===-1)if(a["case"])if("operation-switch"===a.$$type)a["case"].push({operations:[],execute:d?[d]:p});else{var u=a["case"].length;a["case"][u-1].otherwise&&u--,a["case"].splice(u,0,{condition:"",execute:d?[d]:p})}else a["catch"]&&a["catch"].push({errors:[],execute:d?[d]:p});else if(n===-2)a.otherwise.splice(o+1,0,d);else{var g=a["catch"]?a["catch"][n]:a["case"][n];if(g.execute)if(p)for(m=p.length-1;m>=0;m--)g.execute.splice(o+1,0,p[m]);else g.execute.splice(o+1,0,d);else if(g.otherwise)if(p)for(m=p.length-1;m>=0;m--)g.otherwise.splice(o+1,0,p[m]);else g.otherwise.splice(o+1,0,d);else if(g["default"])if(p)for(m=p.length-1;m>=0;m--)g["default"].splice(o+1,0,p[m]);else g["default"].splice(o+1,0,d)}if(a.condition)if(p)for(m=p.length-1;m>=0;m--)a.execute.splice(o+1,0,p[m]);else a.execute.splice(o+1,0,d)}else if(p)for(m=p.length-1;m>=0;m--)t.nodes.splice(n+1,0,p[m]);else t.nodes.splice(n+1,0,d);e&&e.hashKey&&(t.removeObject(t.nodes,e.hashKey),t.node&&t.removeObject(t.node["catch"],e.hashKey)),d&&e.info&&e.info.name?t.nodeSelected(null,d[e.info.name]):d&&e.hashKey&&t.selectedNode&&e.hashKey===t.selectedNode.$$hashKey&&t.infoPanelOpen?t.nodeSelected(null,d[e.type]):t.animateCanvasSlide(t)},t.applyToEachNode=function(e,a){e.forEach(function(e){var n=Object.keys(e)[0];e[n].$$type&&a(e[n]),e[n].execute&&t.applyToEachNode(e[n].execute,a),e[n]["case"]&&e[n]["case"].forEach(function(e){t.applyToEachNode(e.execute||e.otherwise,a)})})},t.prevNode={},t.ghostSelected=function(e,a,n,o){t.isAppConnect()&&t.allowNewNode()&&(t.index=n,t.parentNode=a,t.secondIndex=o,t.nodeSelected(e,"NewAction"))},t.nodeSelected=function(e,a){if(e&&e.stopPropagation(),a!==t.selectedNode||!a.$$isSelected){t.isAppConnect()&&"switch"===a.$$type&&(a.$$minimized=!1);var n=angular.element(document.querySelector(".dropzoneGroupSelected"));if(n.length){n[0].classList.remove("dropzoneGroupSelected");var r=n[0].getElementsByClassName("ghostPolicy")[0];r.classList.remove("isSelected")}if(t.debugMode)t.$broadcast("node-selected",a);else if(t.snipping)t.$broadcast("node-selected",a);else{var l=e?e.currentTarget:void 0;if("input"===a||"output"===a)return;if("NewAction"===a){if(!t.policies||t.policies.length<0)return;var c=t.policies.filter(function(e){return"NewAction"===e.info.name});if(c&&c.length>0&&(c=c[0],a=s.createPolicyInstance(c).NewAction),l)l.classList.add("isSelected"),l.parentElement.classList.add("dropzoneGroupSelected");else{var d=angular.element(document.getElementsByClassName("dropzoneGroup"))[t.index+1];if(d){d.classList.add("dropzoneGroupSelected");var p=d.getElementsByClassName("ghostPolicy")[0];p.classList.add("isSelected")}}}t.selectedNode&&(t.prevNode=t.selectedNode,(t.prevNode!==t.trigger||t.prevNode.selectedApplication.name)&&(t.prevNode.$$touched=!0)),t.trigger&&(t.trigger.$$isSelected=!1),t.request&&(t.request.$$isSelected=!1),t.model.response&&(t.model.response.$$isSelected=!1),t.applyToEachNode(t.nodes,function(e){e.$$isSelected=!1}),delete t.selectedNode,o(function(){t.selectedNode=a,a.$$isSelected=!0},0),o(function(){t.animateCanvasSlide(t)},200),t.infoPanelOpen=!0,i("assembly-info").open()}}},t.removeObject=function(e,a){if(!e)return null;var n=null;if(e.$$hashKey===a)return e;if(e instanceof Array){for(var o=0;o<e.length;o++)if(n=t.removeObject(e[o],a)){e.splice(o,1);break}}else for(var i in e)if("$$container"!==i&&"$$parent"!==i){if("$$hashKey"===i&&e[i]===a)return e;if((e[i]instanceof Object||e[i]instanceof Array)&&(n=t.removeObject(e[i],a)))return n}return null},t.isClauseNode=function(e){return angular.isArray(e.execute)};var v=function(e,a){var n=t.nodes.map(function(e){var t=Object.keys(e)[0];return e[t]}).indexOf(a);if(e&&e.stopPropagation&&e.stopPropagation(),t.removeObject(t.nodes,a.$$hashKey),t.node&&t.removeObject(t.node["catch"],a.$$hashKey),t.selectedNode!==t.trigger&&t.selectedNode!==t.request&&t.selectedNode!==t.response)if(t.selectedNode&&(t.selectedNode.$$onCanvas=!1),t.applyToEachNode(t.nodes,function(e){e.$$onCanvas=!0}),t.selectedNode&&"NewAction"!==t.selectedNode.$$type)if(t.selectedNode.$$onCanvas)t.animateCanvasSlide(t);else if(delete t.selectedNode,t.isAppConnect()&&t.isFlowSlim())if(t.nodes.length){var o=n<t.nodes.length?n:t.nodes.length-1,i=Object.keys(t.nodes[o])[0];t.nodeSelected(null,t.nodes[o][i])}else t.ghostSelected(null,null,-1);else t.closeInfo();else t.selectedNode&&"NewAction"===t.selectedNode.$$type&&(t.isAppConnect()&&!t.isFlowSlim()&&t.parentNode&&!t.parentNode.$$onCanvas?t.closeInfo():t.index===n?(t.index=t.index-1,t.nodeSelected(null,"NewAction")):(t.index>n&&(t.index=t.index-1),t.animateCanvasSlide(t)));else t.animateCanvasSlide(t)};t.deleteNode=function(a,n){if(t.isAppConnect()&&d.countInnerActions(n)>0){var o=d.countInnerActions(n);e.$emit("confirmationDialog",v,a,n,o)}else v(a,n)},t.deleteTrigger=function(){l.deleteTrigger(t.trigger),t.selectedNode={},t.nodeSelected(null,t.trigger)},t.keyPressed=function(e,a){if(8===e.keyCode){if(e.stopPropagation(),e.preventDefault(),t.isClauseNode(a)?t.deleteDoubleFiring=!1:t.deleteDoubleFiring=!t.deleteDoubleFiring,t.deleteDoubleFiring)return;t.deleteNode(e,a)}},t.setupTrigger=function(){if(!t.trigger){if(!t.policies||t.policies.length<0)return;var e=t.policies.filter(function(e){return"Trigger"===e.info.name});e&&e.length>0&&(e=e[0],t.trigger=s.createPolicyInstance(e,t.config.versioning).Trigger)}},t.setupRequest=function(){if(!t.request){if(!t.policies||t.policies.length<0)return;var e=t.policies.filter(function(e){return"Request"===e.info.name});e&&e.length>0&&(e=e[0],t.model.request=s.createPolicyInstance(e,t.config.versioning).Request,t.model.request.type="request")}t.request=t.model.request},t.setupResponse=function(){if(!t.model.response){if(!t.policies||t.policies.length<0)return;var e=t.policies.filter(function(e){return"Response"===e.info.name});e&&e.length>0&&(e=e[0],t.model.response=s.createPolicyInstance(e,t.config.versioning).Response,t.model.response.responses=[],t.model.response.type="response")}t.response=t.model.response},t.onTriggerMouseOver=function(e,t){e.$$isHover=t},o(function(){t.renderingAssembly=!1,t.$apply(),t.isFlowSlim()&&c.reset()}),t.$watch("nodes",function(){t.nodeFilter&&t.nodeFiltered()},!0),t.selectTriggerApplication=function(e){e||(e="salesforce"),l.setTriggerApplication(t.trigger,e)},g.push(e.$on("nodeValidated",function(a,n){var o=t.selectedNode||t.prevNode;if(o){var i=n.errors;i&&!angular.equals(o.$$errors,i)&&(o.$$errors=i),e.$emit("assemblyChanged")}})),g.push(e.$on("loadNewAssembly",function(a,n){t.isAppConnect()&&(t.gotFlowID=!0),n.nodes&&(t.model.nodes=n.nodes,t.nodes=t.model.nodes),t.applyToEachNode(t.nodes,function(e){e.$$touched=!0}),n.trigger?(t.model.trigger=n.trigger,t.trigger=t.model.trigger,t.trigger.selectedApplication&&t.trigger.selectedApplication.name&&(t.trigger.$$touched=!0),t.nodeSelected(null,t.trigger)):"api"===t.config.assemblyType&&t.nodeSelected(null,t.request),e.assemblyDirty=!1,t.$watchCollection("nodes",function(t,a){angular.equals(t,a)||(e.assemblyDirty=!0,e.$emit("assemblyChanged"))}),t.$watch("trigger",function(t,a){angular.equals(t,a)||(e.assemblyDirty=!0,e.$emit("assemblyChanged"))},!0),g.push(e.$on("toggleFlowMode",function(e,t){f(t)}))})),t.animateCanvasSlide=function(e){!e.isAnimating&&t.isFlowSlim()&&(e.isAnimating=!0,o(function(){e.horizontalTranslation=c.animateCanvasSlide(),e.isAnimating=!1,t.$apply()},h,!1))},g.push(e.$on("onIfNodeSelected",function(){if(t.policies&&!(t.policies.length<0)){var e=t.policies.filter(function(e){return"switch"===e.info.name});e&&e.length>0&&(e=e[0],t.policyDropped(e,t.parentNode,t.index,t.secondIndex))}})),g.push(e.$on("onActionCompletePhase",function(e,a){if(t.policies&&!(t.policies.length<0)){var n=t.policies.filter(function(e){return"Application"===e.info.name});if(n&&n.length>0&&(n=n[0],t.policyDropped(n,t.parentNode,t.index,t.secondIndex),t.nodes&&t.nodes.length>0)){var o;if(t.parentNode){var i=t.parentNode["case"][t.index];i.execute?o=i.execute[t.secondIndex+1]:i.otherwise&&(o=i.otherwise[t.secondIndex+1])}else o=t.nodes[t.index+1];if(o.Application&&"Application"===o.Application.$$type){switch(o.Application.selectedApplication={name:a.name,displayName:a.displayName,actionInstructions:a.actionInstructions},o.Application.selectedAction={name:a.task.name,displayName:a.task.displayName,dataModel:a.task.dataModel,interaction:a.task.interaction},o.Application.mappings=[],o.Application.map={},a.task.interaction){case"CREATE":o.Application.type="create-action";break;case"RETRIEVEALL":o.Application.type="retrieve-action";break;case"UPSERTWITHWHERE":o.Application.type="upsert-action";break;default:throw new Error("Invalid node type")}o.Application.target={}}}}})),g.push(e.$on("animateCanvas",function(e,a){switch(a){case"Trigger":t.animateCanvasSlide(t);break;case"NewAction":o(function(){t.nodeSelected(null,a),t.$apply()},2*h,!1)}})),t.$on("$destroy",function(){for(var e=0;e<g.length;e++)g[e]()})}]),angular.module("apiconnect-assembly").controller("NavigationBarController",["$scope","$timeout",function(e,t){localStorage.getItem("apim-assembly-scale-factor")&&!e.isFlowSlim()?e.scaleFactor=1*localStorage.getItem("apim-assembly-scale-factor"):e.scaleFactor=.7,e.isFlowSlim()&&(e.scaleFactor=1),e.$watch("scaleFactor",function(){localStorage.setItem("apim-assembly-scale-factor",e.scaleFactor)}),e.zoomOut=function(){e.scaleFactor>.05&&(e.scaleFactor-=.05)},e.zoomIn=function(){e.scaleFactor<1.5&&(e.scaleFactor+=.05)},e.fitToScreen=function(){var t=document.querySelector(".assemblyScaler").scrollWidth,a=document.querySelector(".assemblyScaler").scrollHeight,n=document.querySelector(".assemblerCanvas").clientWidth,o=document.querySelector(".assemblerCanvas").clientHeight-30,i=n/t,s=o/a,r=Math.abs(1-i),l=Math.abs(1-s);t>n?a>o?r<l?e.scaleFactor=s:e.scaleFactor=i:e.scaleFactor=n/t:a>o?e.scaleFactor=o/a:r<l?e.scaleFactor=i:e.scaleFactor=s},e.nodeFiltered=function(){setTimeout(function(){e.nodeFilter||(e.searchCount=""),e.searchHits=document.getElementsByClassName("searchHit"),e.currentSearchHitIndex=-1;for(var t=0;t<e.searchHits.length;t++)if(e.searchHits[t].classList.contains("isSelected")){e.currentSearchHitIndex=t;break}e.searchCount=e.searchHits.length,e.hitString=1===e.searchHits.length?"hit":"hits",e.$apply()},200)},e.searchBack=function(){e.currentSearchHitIndex-=1,e.currentSearchHitIndex<0&&(e.currentSearchHitIndex=e.searchHits.length-1),e.searchHits.length>0&&(e.searchHits[e.currentSearchHitIndex].scrollIntoView({block:"start",behavior:"smooth"}),t(function(){e.searchHits[e.currentSearchHitIndex].click()}))},e.searchForward=function(){e.currentSearchHitIndex+=1,e.currentSearchHitIndex>=e.searchHits.length&&(e.currentSearchHitIndex=0),e.searchHits.length>0&&(e.searchHits[e.currentSearchHitIndex].scrollIntoView({block:"start",behavior:"smooth"}),t(function(){e.searchHits[e.currentSearchHitIndex].click()}))},e.setOperationFilter=function(t){e.operationFilter=t,e.showOperationFilter=!0}}]),angular.module("apiconnect-assembly").controller("SidenavController",["$scope","$mdSidenav",function(e,t){var a=27;e.keyDown=function(t){t.keyCode===a&&(e.isFlowSlim()?t.stopPropagation():e.closeInfo())},e.infoPanelBottom=!!e.isFlowSlim(),void 0!==localStorage&&("string"!=typeof localStorage.getItem("apim-assembly-info-panel-bottom")||e.isFlowSlim()||(e.infoPanelBottom="true"===localStorage.getItem("apim-assembly-info-panel-bottom"))),e.$watch("infoPanelBottom",function(){void 0!==localStorage&&void 0!==e.infoPanelBottom&&localStorage.setItem("apim-assembly-info-panel-bottom",e.infoPanelBottom)}),e.toggleInfoPanelBottom=function(t){t.stopPropagation(),e.infoPanelBottom=!e.infoPanelBottom},e.maximizeAssemblyInfo=function(t){t.stopPropagation(),e.assemblyInfoPinned&&(e.assemblyInfoPinned=!1),e.assemblyInfoMaximized=!e.assemblyInfoMaximized,setTimeout(function(){e.$broadcast("resize")},0)},e.canvasClick=function(t){t.target===t.currentTarget&&e.closeInfo(t)},e.closeInfo=function(a){if(a&&a.stopPropagation(),e.assemblyInfoPinned=!1,e.infoPanelOpen=!1,t("assembly-info").close(),e.selectedNode){if(e.selectedNode.$$isSelected=!1,"NewAction"===e.selectedNode.$$type){var n=angular.element(document.querySelector(".dropzoneGroupSelected"));if(n.length){n[0].classList.remove("dropzoneGroupSelected");var o=n[0].getElementsByClassName("ghostPolicy")[0];o.classList.remove("isSelected")}}e.selectedNode.$$touched=!0,delete e.selectedNode}},e.pinAssemblyInfo=function(){e.assemblyInfoPinned=!e.assemblyInfoPinned}}]),angular.module("apiconnect-assembly").controller("PolicyListController",["$scope","$rootScope","translateFilter",function(e,t,a){e.filterCategories=function(){if(e.policiesByCategory){var t={},a=e.showMicro(),n=e.showDP(),o=e.policyFilter?e.policyFilter.toLowerCase():"";Object.keys(e.policiesByCategory).forEach(function(i){var s=e.policiesByCategory[i].filter(function(e){var t=!1,i=!1;if(e.gateways?(e.gateways.indexOf("datapower-gateway")>=0&&(i=!0),e.gateways.indexOf("micro-gateway")>=0&&(t=!0)):i=!0,o){if(e.info.title&&e.info.title.toLowerCase().indexOf(o)===-1)return!1;if(e.info.name&&e.info.name.toLowerCase().indexOf(o)===-1)return!1}else{if(!t&&a)return!1;if(!i&&n)return!1}return!0});s&&s.length>0&&(t[i]=s)}),e.filteredCategories=t}},e.$watch("policyFilter",e.filterCategories),e.policiesByType={};var n=e.$watch("policies",function(){e.policies&&(n(),e.policies.then(function(t){e.policies=t;var n={},o={};e.policies.forEach(function(e){o[e.info.name]=e,o[e.info.name+":"+e.info.version]=e,e.info.categories||(e.info.categories=["Uncategorized"]),e.info.categories.indexOf("Trigger")>-1||e.info.categories&&e.info.categories.forEach(function(t){var a=n[t];a||(a=[]),a.push(e),n[t]=a})}),e.templates&&(n[a("assembly_templates")]=e.templates),e.subflows&&(n[a("api_policy_assemblies")]=e.subflows),e.policiesByCategory=n,angular.extend(e.policiesByType,o),e.filterCategories(),"trigger-action"===e.config.assemblyType?e.setupTrigger():"api"===e.config.assemblyType&&(e.setupRequest(),e.setupResponse())}))});e.$watch("templates",function(){e.templates&&e.policiesByCategory&&(e.policiesByCategory[a("assembly_templates")]=e.templates)}),e.$watchCollection("subflows",function(){e.subflows&&e.policiesByCategory&&(e.policiesByCategory[a("api_policy_assemblies")]=e.subflows,e.filterCategories())}),e.collapsedCategories={},e.closeCategory=function(t,a){var n=t.currentTarget.parentElement,o=Array.prototype.reduce.call(n.childNodes,function(e,t){return e+(t.offsetHeight||0)},0)-40+"px",i=t.currentTarget.nextElementSibling;i.style["max-height"]||(i.style["max-height"]=o),e.collapsedCategories[a]=!e.collapsedCategories[a]};var o=t.offlineMode?"micro-gateway":"datapower-gateway";e.showMicro=function(){return e.swaggerDocument[e.config.property]&&e.swaggerDocument[e.config.property].gateway?"micro-gateway"===e.swaggerDocument[e.config.property].gateway:"micro-gateway"===o},e.showDP=function(){return e.swaggerDocument[e.config.property]&&e.swaggerDocument[e.config.property].gateway?"datapower-gateway"===e.swaggerDocument[e.config.property].gateway:"datapower-gateway"===o},e.microPolicy=function(e){return!(!e||!e.gateways)&&e.gateways.indexOf("micro-gateway")>=0},e.dpPolicy=function(e){return!!e&&(!e.gateways||e.gateways.indexOf("datapower-gateway")>=0)},e.$gateway=function(t){return t?(e.swaggerDocument[e.config.property].gateway=t,void e.filterCategories()):e.showDP()?"datapower-gateway":"micro-gateway"},e.showPolicy=function(t,a){return!(!e.showDP()||!e.showMicro())||(!e.policyFilter||t.toLowerCase().indexOf(e.policyFilter.toLowerCase())!==-1)&&(!(!e.microPolicy(a)&&e.showMicro())&&!(!e.dpPolicy(a)&&e.showDP()))}}]),angular.module("apiconnect-assembly").controller("NodeController",["$scope","$rootScope","$element","$timeout","$filter","translateFilter","assemblyModel",function(e,t,a,n,o,i,s){if(e.descriptionLine1="",e.descriptionLine2="",e.nodeFullDescription="",e.nodeHasErrors=!1,e.expanded={},e.labelPlacement="left",a.on("dragstart",function(e){e.stopPropagation()}),!e.node)throw new Error("Unrecognised node");e.data={hashKey:e.node.$$hashKey,node:e.node,type:e.node.$$type},e.node.$$readOnly&&(e.nodeIsReadOnly=!0),e.nodeIsReadOnly&&(e.node.$$parentReadOnly=!0),e.node.$$subflow&&(e.inSubflow=!0),e.countInnerActions=function(e){return s.countInnerActions(e)},e.expandBranch=function(t,a,o){a.outputSchema&&a.outputSchema.properties&&Object.keys(a.outputSchema.properties).length&&(n(function(){a.$$expandedBranch=a.$$expandedBranch===o?void 0:o,a.$$selectedBranch=o}),e.nodeSelected(t,a));
},e.hasOutputSchema=function(e){return!!(e.outputSchema&&e.outputSchema.properties&&Object.keys(e.outputSchema.properties).length)},e.isDraggable=function(){return!e.operationFilter&&(!e.$parent||!e.$parent.inSubflow)},e.hasObject=function(t,a){if(!t)return null;var n=!1;if(t.$$hashKey===a)return!0;if(t instanceof Array)for(var o=0;o<t.length&&!(n=e.hasObject(t[o],a));o++);else for(var i in t)if("$$container"!==i){if("$$hashKey"===i&&t[i]===a)return!0;if((t[i]instanceof Object||t[i]instanceof Array)&&(n=e.hasObject(t[i],a)))return n}return n},e.isHovered=!1,e.highlightNode=function(t,a){e.isHovered=!!t,a.stopPropagation()},e.minimize=function(t){if(t.stopPropagation(),e.node.$$minimized=!e.node.$$minimized,e.selectedNode){var a="NewAction"!==e.selectedNode.$$type?e.selectedNode:e.parentNode;e.node.$$minimized&&a&&s.containsNode(e.node,a)&&(e.unsetSelectedNode(),e.closeInfo())}},e.canMinimize=function(){return"switch"===e.node.$$type||"operation-switch"===e.node.$$type||"if"===e.node.$$type},e.hasMatchedSearch=function(){return!e.nodeFilter||(e.isAppConnect()&&e.node.selectedApplication&&e.node.selectedApplication.displayName?e.node.selectedApplication.displayName.toLowerCase().indexOf(e.nodeFilter.toLowerCase())>-1:e.node.name?e.node.name.toLowerCase().indexOf(e.nodeFilter.toLowerCase())>-1:e.node.title?e.node.title.toLowerCase().indexOf(e.nodeFilter.toLowerCase())>-1:!!e.node.$$type&&e.node.$$type.toLowerCase().indexOf(e.nodeFilter.toLowerCase())>-1)},e.conditionHasMatchedSearch=function(t){if(!e.nodeFilter)return!0;if(angular.isString(t))return t.toLowerCase().indexOf(e.nodeFilter.toLowerCase())>-1;var a;return t.operations?a=t.operations:t.condition&&t.condition.operations?a=t.errors:t.errors?a=t.errors:t["default"]&&(a=t["default"]),!!a&&a.join(" ").toLowerCase().indexOf(e.nodeFilter.toLowerCase())>-1},e.isClauseEmpty=function(){return _.isEmpty(e.node["case"])&&_.isEmpty(e.node["catch"])&&_.isEmpty(e.node.condition)&&_.isEmpty(e.node.execute)},e.policyWithContent=function(){return!!e.showCatches&&!!e.node["catch"]||!!e.node["case"]||!!e.node.execute},e.policyGatewayMiss=function(){delete e.gatewayErrorMessage;var t=e.policiesByType[e.node.$$type];return!!t&&(!e.microPolicy(t)&&e.showMicro()?(e.gatewayErrorMessage=i("assembly_node_gateway_mismatch"),!0):!(e.dpPolicy(t)||!e.showDP())&&(e.gatewayErrorMessage=i("assembly_node_gateway_mismatch"),!0))},e.cloneNode=function(t,a){if(t.stopPropagation(),void 0!==a.$$container&&void 0!==a.$$containerIndex){var n={};n[a.$$type]=angular.fromJson(angular.toJson(a)),n[a.$$type].$$type=a.$$type,a.$$container.splice(a.$$containerIndex+1,0,n),e.nodeSelected(null,n[a.$$type])}},e.truncateNodeDescription=function(){return e.descriptionLine1=o("actionForNode")(e.node,e.nodes),e.nodeFullDescription=e.descriptionLine1,e.node&&e.descriptionLine1?void n(function(){e.descriptionLine2="";var t=a[0].getElementsByClassName("applicationNodeDetails")[0];if(t&&t.scrollHeight>t.clientHeight){for(;t.scrollHeight>t.clientHeight;){var n=e.descriptionLine1.lastIndexOf(" ");if(n>-1){var o=e.descriptionLine1.slice(n,e.descriptionLine1.length);e.descriptionLine1=e.descriptionLine1.slice(0,n),e.descriptionLine2=o+e.descriptionLine2}else{var i=e.descriptionLine1.slice(-1);e.descriptionLine1=e.descriptionLine1.slice(0,-1),e.descriptionLine2=i+e.descriptionLine2}e.$digest()}e.descriptionLine1=e.descriptionLine1.trim(),e.descriptionLine2=e.descriptionLine2.trim()}}):(e.descriptionLine1="",void(e.descriptionLine2=""))},e.updateDefaultDescription=function(){e.node.description||e.truncateNodeDescription()},e.$watch("node.description",e.truncateNodeDescription,!0),e.$watchGroup(["node.name","node.dataModel"],function(t,a){t!==a&&e.updateDefaultDescription()},!0)}]),angular.module("apiconnect-assembly").controller("NodeCaseController",["$scope","$rootScope","clauseMessageFilter",function(e,t,a){e.node&&e.node["case"]&&e.node["case"].length>10&&(e.collapseNodes=!0),e.showContent=function(t){t.stopPropagation(),e.collapseNodes=!1},e.hideContent=function(t){t.stopPropagation(),e.collapseNodes=!0},e.$watch("case.condition",function(){void 0!==e["case"].condition&&(""===e["case"].condition?delete e["case"].$$expression:e["case"].$$expression=window.jsep(e["case"].condition),delete e["case"].$$expressionString,e["case"].$$expressionString=a(e["case"]))}),e.$watchCollection("case.execute",function(e,a){angular.equals(e,a)||t.$emit("assemblyChanged")})}]),angular.module("apiconnect-assembly").controller("MapDataController",["$scope","$mdDialog",function(e,t){e.openMapDialog=function(e,a){t.show({controller:"DialogController",templateUrl:"src/html/mapper.html",parent:document.body,targetEvent:e,fullscreen:!0,locals:{node:a}})}}]).controller("DialogController",["$scope","$rootScope","$mdDialog","node",function(e,t,a,n){e.node=n;var o=n.mappingData;e.done=function(){a.hide(o),t.$emit("nodeMappingUpdated")}}]),angular.module("apiconnect-assembly").controller("TriggerController",["$rootScope","$scope","$element","$filter","$timeout","triggerService",function(e,t,a,n,o,i){t.descriptionLine1="",t.descriptionLine2="",t.descriptionLine3="",t.isTriggerSlim=function(){return t.config.slimFlowEditor},t.hasMatchedSearch=function(){if(!t.nodeFilter)return!0;var e,a;return t.trigger.selectedApplication&&t.trigger.selectedApplication.displayName&&(e=t.trigger.selectedApplication.displayName.toLowerCase().indexOf(t.nodeFilter.toLowerCase())>-1),e||a},t.selectTriggerApplication=function(e){i.setTriggerApplication(t.trigger,e)},t.hasOperationSelected=function(){var e=[];return t.trigger.selectedTrigger&&t.trigger.selectedTrigger.operations&&t.trigger.selectedTrigger.operations.forEach(function(t){t.state&&e.push(t.id)}),e.length>0},t.truncateNodeDescription=function(){return t.descriptionLine1=n("actionForTrigger")(t.trigger),t.trigger&&t.descriptionLine1?void o(function(){t.descriptionLine2="";var e=a[0].getElementsByClassName("triggerNodeDetails")[0];if(e){if(e.scrollHeight>e.clientHeight){for(;e.scrollHeight>e.clientHeight;){var n=t.descriptionLine1.lastIndexOf(" ");if(n>-1){var i=t.descriptionLine1.slice(n,t.descriptionLine1.length);t.descriptionLine1=t.descriptionLine1.slice(0,n),t.descriptionLine2=i+t.descriptionLine2}else{var s=t.descriptionLine1.slice(-1);t.descriptionLine1=t.descriptionLine1.slice(0,-1),t.descriptionLine2=s+t.descriptionLine2}t.$digest()}t.descriptionLine1=t.descriptionLine1.trim(),t.descriptionLine2=t.descriptionLine2.trim()}o(function(){t.descriptionLine3="";var e=a[0].getElementsByClassName("triggerNodeDetails")[1];if(e&&e.scrollHeight>e.clientHeight){for(;e.scrollHeight>e.clientHeight;){var n=t.descriptionLine2.lastIndexOf(" ");if(n>-1){var o=t.descriptionLine2.slice(n,t.descriptionLine2.length);t.descriptionLine2=t.descriptionLine2.slice(0,n),t.descriptionLine3=o+t.descriptionLine3}else{var i=t.descriptionLine2.slice(-1);t.descriptionLine2=t.descriptionLine2.slice(0,-1),t.descriptionLine3=i+t.descriptionLine3}t.$digest()}t.descriptionLine2=t.descriptionLine2.trim()}})}}):(t.descriptionLine1="",t.descriptionLine2="",void(t.descriptionLine3=""))},t.updateDefaultDescription=function(){t.trigger.description||t.truncateNodeDescription()},e.$on("onTriggerCompletePhase",function(a,n,o){o&&t.selectTriggerApplication(o),e.$emit("animateCanvas",n)}),t.$watch("trigger.description",function(){t.truncateNodeDescription()},!0),t.$watch("trigger.selectedTrigger.dataModel",function(e,a){e!==a&&t.updateDefaultDescription()},!0)}]),angular.module("apiconnect-assembly").controller("ErrorController",["$scope","$mdDialog",function(e,t){var a="An error has occurred",n="An error occurred in the IBM App Connect flow editor.",o="Find the solution on the IBM App Connect forum",i=[{buttonTitle:"Close"}];e.errorCodeText="Error Code",e.errorObject||(e.errorObject={}),e.errorMessage=e.errorObject.errorMessage||a,e.errorCode=e.errorObject.errorCode,e.errorDescription=e.errorObject.errorDescription||n,e.errorLinkUrl=e.errorObject.errorLinkUrl,e.errorLinkUrl&&(e.errorLinkText=e.errorObject.errorLinkText||o),e.errorButtons=e.errorObject.errorButtons&&e.errorObject.errorButtons.length>0?e.errorObject.errorButtons:i,e.dismissable="undefined"==typeof e.errorObject.dismissable||e.errorObject.dismissable,e.closeCallback=e.errorObject.closeCallback,e.closeDialog=function(a){t.hide(),a&&e.closeCallback&&e.closeCallback()},e.runCallback=function(t,a){t&&t(),a||e.closeDialog()}}]).controller("WarningController",["$scope","$timeout",function(e,t){var a="",n=[];e.warningObject||(e.warningObject={});var o;e.warningObject.warningMessage?e.warningObject.warningMessage.hasCounter&&e.warningObject.warningMessage.count>0&&2===e.warningObject.warningMessage.messages.length?(e.counter=e.warningObject.warningMessage.count,e.countdown=function(){e.warningMessage=e.warningObject.warningMessage.messages[0]+e.counter+e.warningObject.warningMessage.messages[1],o=t(function(){e.warningMessage=e.warningObject.warningMessage.messages[0]+e.counter+e.warningObject.warningMessage.messages[1],e.counter--,e.counter>=0?e.countdown():e.closeDialog()},1e3)},e.countdown()):e.warningObject.warningMessage.messages&&1===e.warningObject.warningMessage.messages.length?e.warningMessage=e.warningObject.warningMessage.messages[0]:e.warningMessage=a:e.warningMessage=a,e.warningButtons=e.warningObject.warningButtons&&e.warningObject.warningButtons.length>0?e.warningObject.warningButtons:n,e.closeCallback=e.warningObject.closeCallback,e.closeDialog=function(){t.cancel(o),e.closeCallback&&e.closeCallback(),e.panelReference.close()},e.runCallback=function(t,a){t&&t(),a||e.closeDialog()}}]),angular.module("apiconnect-assembly").directive("apimAssemblyPolicy",function(){return{restrict:"E",templateUrl:"src/html/policy.html"}}).directive("apimAssemblyTemplate",function(){return{restrict:"E",templateUrl:"src/html/template.html"}}).directive("apimAssembler",function(){return{restrict:"E",templateUrl:"src/html/assembler.html",scope:{assemblerOptions:"@"},controller:"AssemblerController",controllerAs:"AssemblerController",bindToController:!0}}).directive("apimNode",["RecursionHelper",function(e){return{restrict:"E",templateUrl:"src/html/node.html",compile:function(t){return e.compile(t)}}}]).directive("apimLogicNode",["RecursionHelper",function(e){return{restrict:"E",templateUrl:"src/html/logic-node.html",compile:function(t){return e.compile(t)}}}]).directive("apimMapper",function(){return{restrict:"E",templateUrl:"src/html/mapper.html"}}).directive("apimGenerator",function(){return{restrict:"E",templateUrl:"src/html/generator.html"}}).directive("apimTestParameter",function(){return{restrict:"E",templateUrl:"src/html/test-parameter.html"}}).directive("apimAssemblyTest",function(){return{restrict:"E",templateUrl:"src/html/assembly-test.html"}}).directive("apimDraftAssembly",function(){return{restrict:"E",templateUrl:"src/html/draft-assembly.html"}}).directive("apicConditionBuilder",function(){return{restrict:"E",controller:"ConditionController as conditionController",templateUrl:"src/html/condition-builder.html",scope:{condition:"="}}}).directive("apicConditionExpression",function(e){return{restrict:"E",templateUrl:"src/html/condition-expression.html",controller:"ConditionExpressionController as expressionController",scope:!0,compile:function(t){return e.compile(t)}}}).directive("apicConditionExpressionLeft",function(e){return{restrict:"E",templateUrl:"src/html/condition-expression.html",controller:"ConditionExpressionLeftController as expressionController",scope:!0,compile:function(t){return e.compile(t)}}}).directive("apicConditionExpressionRight",function(e){return{restrict:"E",templateUrl:"src/html/condition-expression.html",controller:"ConditionExpressionRightController as expressionController",scope:!0,compile:function(t){return e.compile(t)}}}).directive("apimNotEmpty",function(){return{restrict:"A",require:"ngModel",link:function(e,t,a,n){n.$parsers.push(function(e){return""===e?null:e})}}}).directive("appCTrigger",function(){return{controller:"TriggerController as triggerController",restrict:"E",templateUrl:"/app/nodeTemplates/trigger.html"}}).directive("apimSidenav",function(){return{controller:"SidenavController",restrict:"E",templateUrl:"src/html/sidenav.html"}}).directive("errorDialog",function(){return{controller:"ErrorController",restrict:"E",templateUrl:"src/html/error-dialog.html"}}).directive("warningDialog",function(){return{controller:"WarningController",restrict:"E",templateUrl:"src/html/warning-dialog.html"}}).directive("policyList",function(){return{controller:"PolicyListController",restrict:"E",templateUrl:"src/html/policy-list.html"}}).directive("navigationBar",function(){return{controller:"NavigationBarController",restrict:"E",templateUrl:"src/html/navigation-bar.html"}}).directive("assemblerCanvas",function(){return{restrict:"E",templateUrl:"src/html/assembler-canvas.html"}}).directive("nodeGroup",function(){return{restrict:"E",templateUrl:"src/html/node-group.html"}});var instanceCounters={};angular.module("apiconnect-assembly").filter("byCategory",function(){return function(e){var t={};return e.forEach(function(e){e.categories.forEach(function(a){var n=t[a];n||(n=[]),n.push(e),t[a]=n})}),t}}).filter("transformNodeModel",["$injector",function(e){return function(t,a,n,o,i){i&&(instanceCounters={});var s=[];if(t){var r;try{r=e.get("ComponentRegistry")}catch(l){}for(var c=0;c<t.length;c++){var d={};Object.keys(t[c]).forEach(function(e){if(0!==e.indexOf("$$"))if(n&&"operation-switch"===e)unwrapOperationSwitch(n,t[c],s,a,o);else{if(d=t[c][e],d.$ref){if(!d.$$resolved&&r){var i=r.getReference(d.$ref,"assemblies");d.$$resolved=angular.copy(i),d.$$resolved.$ref=d.$ref,d.$$resolved.$$readOnly=!0,d.$$resolved.$$parent=d,d.$$resolved.title=d.title}d=d.$$resolved}d.$$type=e,d.$$container=t,d.$$containerIndex=c;var l=d.version?e+":"+d.version:e;if(a){var p=a[l]||a[e];p||"assembly"!==e||(p={type:"subflow",info:{display:{color:"#4B68FA",icon:"open_in_browser"}}}),p&&(d.$$display=p.info.display,d.$$schema=p.properties,d.$$classes=p.classes||[],d.$$logic=!!p.logic,d.$$subflow="subflow"===p.type,d.$$application=!!p.application)}void 0===instanceCounters[e]?(instanceCounters[e]=1,d.$$instance=1):(instanceCounters[e]++,d.$$instance=instanceCounters[e]),s.push(d)}})}return s}}}]).filter("policyDisplayName",function(){return function(e){if(e.name)return e.name;if(e.selectedApplication){if(e.selectedApplication.displayName)return e.selectedApplication.displayName;if(e.selectedApplication.name)return e.selectedApplication.name;if(e.selectedApplication.type)return e.selectedApplication.type}return e.nodeName?e.nodeName:e.title?e.title:e.$$type}}).filter("clauseMessage",["translateFilter","Expressions",function(e,t){return function(a){if(a.$$expressionString)return a.$$expressionString;var n="";if(a.operations){if(a.operations.forEach(function(e){e&&(n+="string"==typeof e?e+", ":e.operationId?e.operationId+", ":e.verb+" "+e.path+", ")}),n.length>2&&(n=n.substring(0,n.length-2)),""===n)return e("assemblyEmptyCase")}else if(a.condition&&a.condition.operations){if(a.condition.operations.forEach(function(e){e&&(n+="string"==typeof e?e+", ":e.verb+" "+e.path+", ")}),n.length>2&&(n=n.substring(0,n.length-2)),""===n)return e("assemblyEmptyCase")}else if(a.condition&&a.condition.expression)n=a.condition.expression;else if("string"==typeof a.condition){if(a.$$expression)return t.expressionAsString(a.$$expression)||a.condition;if(""===a.condition)return e("assemblyEmptyCase")}else{if(a.otherwise)return e("assemblyOtherwise");if(a.errors)n=a.errors.join(", ");else if(a["default"])return e("policies_default")}return n}}]).filter("catchMessage",["translateFilter",function(e){return function(t){return t.errors&&t.errors.length>0?t.errors.join(", "):e(t["default"]?"policies_default":"assemblyEmptyCatch")}}]).filter("assemblyInfoMaximizeLabel",function(){return function(e){return e?"remove_from_queue":"add_to_queue"}}).filter("iconForNode",function(){return function(e){return e.selectedApplication&&e.selectedApplication.name?"connector:"+e.selectedApplication.name:e.info&&e.info.display&&e.info.display.icon?e.info.display.icon:e.$$display&&e.$$display.icon?e.$$display.icon:"catch"===e.$$type?"error":""}}).filter("formatResponseData",function(){return function(e,t){return"application/json"===t["content-type"]?JSON.stringify(e,null,2):e}}).filter("httpErrorToMessage",["HttpErrors",function(e){return function(t){return e[t]?e[t]:""}}]).filter("noAssemblies",["translateFilter",function(e){return function(t){return e(t&&0!==t.length?"assembliesNoMatchingAssemblies":"assembliesNoAssembliesFound")}}]).filter("assemblyTitleQuery",function(){return function(e,t){if(!e)return e;if(!t)return e;var a=t.toLowerCase();return e.filter(function(e){return e.info&&e.info.title&&e.info.title.toLowerCase().indexOf(a)>-1})}}).filter("expressionToLabel",function(){return function(e){var t=e;return angular.isArray(e)&&(t=e[0]),angular.isObject(t)?window.jseb(t):t}}).filter("highlight",function(){return function(e,t){if(!e||!t||""===t)return e;t=t.replace(/[#-.]|[[-^]|[?|{}]/g,"\\$&");var a=new RegExp(t,"ig");return e.replace(a,function(e){return'<span class="ui-match">'+e+"</span>"})}}).filter("isActionCategory",function(){return function(e){return!!(e.info&&e.info.categories&&e.info.categories.length>0&&e.info.categories.indexOf("Action")>-1)||!!(e.$$categories&&e.$$categories.length>0&&e.$$categories.indexOf("Action")>-1)}}).filter("isTriggerCategory",function(){return function(e){return!!(e.info&&e.info.categories&&e.info.categories.length>0&&e.info.categories.indexOf("Trigger")>-1)||!!(e.$$categories&&e.$$categories.length>0&&e.$$categories.indexOf("Trigger")>-1)}}).filter("actionForTrigger",function(){return function(e){var t="";return e.description&&e.description.length>0?e.description:e.selectedTrigger?e.selectedTrigger.displayName?e.selectedTrigger.displayName:e.selectedTrigger.name:t}}).filter("actionForNode",function(){return function(e,t){var a="",n={};if(e.description&&e.description.length>0)return e.description;if(e.name&&e.dataModel)return e.name+" "+e.dataModel;if("Application"===e.$$type){if(e.nodeName){var o=e.selectedApplication.displayName+" ";return e.nodeName.replace(o,"")}a=e.selectedAction.displayName?e.selectedAction.displayName:e.selectedAction.name;var i=2;t.forEach(function(t){var a=Object.keys(t)[0];if("Application"===a&&e.selectedApplication.name===t.Application.selectedApplication.name&&e.selectedAction.name===t.Application.selectedAction.name&&t.Application.nodeName){var o=t.Application.selectedApplication.displayName+" ";n[t.Application.nodeName.replace(o,"")]=!0}});var s=!1;if(n[a]){for(;!s;)n[a+" "+i]?i++:s=!0;a=a+" "+i}}return a}}),angular.module("apiconnect-assembly").controller("AssemblerInfoController",["$scope","SchemaForm",AssemblerInfoController]),angular.module("apiconnect-assembly").controller("OperationSwitchController",["$scope",OperationSwitchController]),angular.module("apiconnect-assembly").controller("OperationCaseController",["$scope",OperationCaseController]),angular.module("apiconnect-assembly").controller("SwitchController",["$scope",SwitchController]),angular.module("apiconnect-assembly").controller("CaseController",["$scope","$mdDialog","Expressions",CaseController]),angular.module("apiconnect-assembly").controller("ConditionEditorController",["$scope","$mdDialog","expression",ConditionEditorController]),angular.module("apiconnect-assembly").controller("CatchController",["$scope",CatchController]),angular.module("apiconnect-assembly").controller("ErrorFilterController",["$scope",ErrorFilterController]),angular.module("apiconnect-assembly").controller("CatchBlockController",["$scope",CatchBlockController]),angular.module("apiconnect-assembly").controller("ValidationDefinitionController",["$scope",ValidationDefinitionController]),angular.module("apiconnect-assembly").controller("TLSProfileController",["$rootScope","$scope","SSLProfile",TLSProfileController]),angular.module("apiconnect-assembly").controller("UserRegistryController",["$rootScope","$scope","UserRegistry",UserRegistryController]),angular.module("apiconnect-assembly").controller("SetVariableController",["$scope",SetVariableController]),angular.module("apiconnect-assembly").controller("SetVariableActionController",["$scope",SetVariableActionController]),angular.module("apiconnect-assembly").controller("RedactController",["$scope",RedactController]),angular.module("apiconnect-assembly").controller("RedactItemController",["$scope",RedactItemController]),angular.module("apiconnect-assembly-test",["apiconnect-assembly"]).controller("AssemblerTestController",["$scope","$rootScope","$q","$filter","$http","Product","Gateway","ProductUtil","DeployedProduct","ProviderApp","ProviderAppSubscription","TestCallGenerator","SwaggerOAuth","AssemblerTracking","GatewayCluster",function(e,t,a,n,o,i,s,r,l,c,d,p,m,u,g){function h(){if(!e.scopes)return[];var t=[];return Object.keys(e.scopes).forEach(function(a){e.scopes[a]&&t.push(a)}),t}function f(t){var a=e.debugData.filter(function(e){return e.name===t});return a.length>0?a[0]:null}var y=this;e.environments=t.environments,e.publishTargets=t.publishTargets,e.matchingGwServices=[],e.offlineMode=t.offlineMode,e.offlineMode||(e.dataPowerGateways=g.query(),a.all([e.dataPowerGateways.$promise]).then(function(){e.gateways=e.dataPowerGateways,y.restoreSetup()})),e.scopes={},e.authToken={},e.autoTransition=!0,e.offlineMode&&(e.clientId="default",e.clientSecret="SECRET"),e.$watch("application",function(){e.application&&e.application.credentials&&(e.clientId=e.application.credentials.clientID)}),e.currentPage=t.offlineMode?2:1,e.repeater={repeat:!1,count:10,stopOnError:!0},e.$on("api_is_dirty",function(a,n){if(n!==e.apiDirty&&(e.apiDirty=n,!n)){if(e.saveSinceLastPublish=!0,e.secureGateways&&e.secureGateways.$promise&&e.secureGateways.$resolved===!1)return;y.secureGatewaySetup(),e.secureGatewayDeploymentInfo.length>0&&(e.secureGateways=s.query({orgId:t.orgId}),e.secureGateways.$promise.then(function(){y.setCurrentPage(1)}))}}),e.testLoaded=t.offlineMode,y.restoreSetup=function(){if(!e.offlineMode&&e.gateways&&"undefined"!=typeof localStorage){var t=localStorage.getItem("apim.test.target");if(t){t=angular.fromJson(t);var a=e.publishTargets.filter(function(e){return e.environmentId===t.environmentId&&e.spaceId===t.spaceId});if(a.length>0){e.target=a[0];var n=e.environments.filter(function(t){return t.id===e.target.environmentId});n.length>0&&(e.catalog=n[0])}else e.publishTargets.length>0?(e.target=e.publishTargets[0],y.targetChange()):(e.target=null,y.targetChange())}else e.target=e.publishTargets[0],y.targetChange();y.gwServiceChange();var o=localStorage.getItem("apim.test.product");if(o){var i=o.split(":"),s=e.products.filter(function(e){return e.info.name===i[0]&&e.info.version===i[1]});s.length>0&&(e.product=s[0],e.productContainsApi=r.containsApi(e.product,e.swaggerDocument))}var l=localStorage.getItem("apim.test.plan");e.product&&l&&e.product.plans[l]&&(e.plan=l);var c=localStorage.getItem("apim.test.application");c&&e.$watch("applications",function(){if(e.applications){var t=e.applications.filter(function(e){return e.id===c});t.length>0&&(e.application=t[0],0===e.secureGatewayDeploymentInfo.length&&e.target&&e.product&&e.plan&&e.autoTransition&&(e.currentPage=2))}}),0===e.secureGatewayDeploymentInfo.length&&e.target&&e.product&&(e.catalog.testAppEnabled||e.plan&&e.application)&&e.autoTransition&&(e.currentPage=2),e.testLoaded=!0}},y.secureGatewaySetup=function(){if(e.needSecureGatewaySetup=!1,e.secureGatewayDeploymentInfo=[],!e.offlineMode){var a=e.swaggerDocument[e.config.property];if(a){var n=a.assembly;if(n)for(var o=n.execute||[],i=0;i<o.length;i++){var s={gateway:"",apiId:e.swaggerDocument.info["x-ibm-name"]+":"+e.swaggerDocument.info.version,spaceGUID:t.bluemixExternalSpaceId,orgGUID:t.bluemixExternalOrgId};o[i].hasOwnProperty("invoke")&&o[i].invoke["secure-gateway"]?(s.destination=o[i].invoke["target-url"],e.secureGatewayDeploymentInfo.push(s),e.needSecureGatewaySetup=!0):o[i].hasOwnProperty("proxy")&&o[i].proxy["secure-gateway"]&&(s.destination=o[i].proxy["target-url"],e.secureGatewayDeploymentInfo.push(s),e.needSecureGatewaySetup=!0)}}}},y.setCurrentPage=function(t){e.currentPage=t,1===t&&e.target.spaceId&&(e.selectedOperation=void 0,e.operation=void 0,e.response=void 0),3===t?e.setTestMode(!0,!0):e.setTestMode(!0,!1),e.autoTransition=!1,2===t&&y.updateConfig()},y.updateConfig=function(){e.operation&&(y.config=p.getConfigurationForOperation(e.operation,e.path,e.swaggerDocument,e.securityFlow),y.config.oauthScopes&&y.config.oauthScopes.forEach(function(t){e.scopes[t]=!0}),y.config.sendDebugHeader=!e.offlineMode)},y.config={},e.updateConfigForOperation=function(){if(e.selectedOperation){e.setOperationFilter(e.selectedOperation);var t=e.selectedOperation;"string"==typeof e.selectedOperation&&(t=e.operationMap[e.selectedOperation]),e.selectedOperation.operationId&&(t=e.operationMap[e.selectedOperation.operationId]),e.operationRef=t;var a=e.swaggerDocument.paths[t.path][t.verb];e.operation=a,e.path=e.swaggerDocument.paths[t.path],e.swaggerDocument.schemes?e.schemes=e.swaggerDocument.schemes:e.schemes=["https"],e.scheme=e.schemes[0];var n=localStorage.getItem("apim_local_gateway");n||(n=e.scheme+"://localhost:4001");var o="";if(e.swaggerDocument["x-ibm-configuration"]&&e.swaggerDocument["x-ibm-configuration"].enforced===!1)o=e.swaggerDocument.host?e.scheme+"://"+e.swaggerDocument.host:n;else if(e.catalog&&e.catalog.gwServices&&e.catalog.gwServices.length>0)if(e.gwServiceTarget){var i;e.gateways.forEach(function(t){t.name===e.gwServiceTarget&&(i=t.id)}),e.catalog.gwServices.forEach(function(e){e.id===i&&(o=e.endpointUrl)})}else o=e.catalog.gwServices[0].endpointUrl;else o=e.catalog&&e.catalog.customBaseUrl?e.catalog.customBaseUrl:e.catalog&&e.catalog.baseUrl?e.catalog.baseUrl:n;var s=e.swaggerDocument.basePath;s||(s="/"),_.endsWith(s,"/")&&_.startsWith(t.path,"/")?s=s.substring(0,s.length-1)+t.path:s+=t.path;var r=o+s;e.operation["x-ibm-soap"]&&e.operation.operationId&&_.endsWith(r,"/"+e.operation.operationId)&&(r=r.substring(0,r.length-(e.operation.operationId.length+1))),e.targetUrlTemplate=r,y.updateConfig(),y.config.requiresOauth&&y.config.oauthScopes&&(e.scopes=y.config.oauthScopes)}},e.$watch("selectedOperation",e.updateConfigForOperation),e.$watch("securityFlow",y.updateConfig),y.invoke=function(){p.invoke(e,y.config,e.repeater)},e.setAuthToken=function(t){e.authToken=t},e.setAuthCode=function(t){e.authCode=t},e.setAuthError=function(t){e.authError=t},e.clearAuthError=function(){delete e.authError},y.authorize=function(){var t=h();e.clearAuthError(),m.authorize(y.config,e.clientId,e.clientSecret,t,e.username,e.password,e.redirectUri).then(function(t){angular.extend(e.authToken,t.data)},function(t){e.setAuthError(t)})},y.getToken=function(){var t=h();e.clearAuthError(),m.getToken(y.config,e.authToken,e.clientId,e.clientSecret,t,e.redirectUri).then(function(t){angular.extend(e.authToken,t.data)},function(t){e.setAuthError(t)})},y.refreshToken=function(){e.clearAuthError(),m.refreshToken(y.config,e.authToken,e.clientId,e.clientSecret).then(function(e){console.log(e)},function(t){e.setAuthError(t)})};var v=!1,b=!1;y.refreshApps=function(){e.xhrProcessing=!0,e.applications=c.query({orgId:t.orgId,envId:e.catalog.id}),e.applications.$promise.then(function(){e.xhrProcessing=!1,v=!0,b&&y.restoreSetup()})},e.$watch("catalog",function(){e.catalog&&(e.catalog.testAppEnabled===!0&&e.catalog.testAppCredentials?(e.testAppCredentials=!0,delete e.application,delete e.plan,e.clientId=e.catalog.testAppCredentials.clientId,e.clientSecret=e.catalog.testAppCredentials.clientSecret):(delete e.clientSecret,y.refreshApps(),y.refreshDeployedProducts()))}),y.refresh=function(){e.xhrProcessing=!0,e.products=i.query({orgId:t.orgId}),e.products.$promise.then(function(){if(y.secureGatewaySetup(),e.secureGatewayDeploymentInfo.length>0)return e.secureGateways=s.query({orgId:t.orgId}),e.secureGateways.$promise}).then(function(){e.xhrProcessing=!1,b=!0,y.restoreSetup()})},y.refresh(),y.refreshDeployedProducts=function(){e.deployedProducts=l.query({orgId:t.orgId,envId:e.catalog.id})},y.createAndPublishProduct=function(){if(e.productName&&e.target){var a={product:"1.0.0",info:{name:t.generateName(e.productName),title:e.productName,version:"1.0.0"},apis:{},plans:{}};a.apis[e.swaggerDocument.info["x-ibm-name"]]={name:e.swaggerDocument.info["x-ibm-name"]+":"+e.swaggerDocument.info.version},a.plans["default"]={title:n("translate")("product_default_plan_name")};var o=new i(a);e.creatingProduct=!0,o.$create({orgId:t.orgId}).then(function(t){e.product=t,u.track("assembly","createdProduct"),y.productChange(),y.republishProduct()},function(){e.creatingProduct=!1})}},y.republishProduct=function(){e.republishingProduct=!0;var a="";a="SPACE"===e.target.type?"proxy/orgs/"+t.orgId+"/environments/"+e.target.environmentId+"/spaces/"+e.target.spaceId+"/products/"+e.product.info.name+":"+e.product.info.version:"proxy/orgs/"+t.orgId+"/environments/"+e.target.environmentId+"/products/"+e.product.info.name+":"+e.product.info.version,o.post(a).success(function(){y.refreshDeployedProducts();var a={};a=e.product.visibility?{visibility:e.product.visibility}:{visibility:{view:{enabled:!0,type:"public"},subscribe:{enabled:!0,type:"authenticated"}}},e.secureGatewayDeploymentInfo.length>0&&(a.secureGatewayDeploymentInfo=e.secureGatewayDeploymentInfo);var n="";n="SPACE"===e.target.type?"proxy/orgs/"+t.orgId+"/environments/"+e.target.environmentId+"/spaces/"+e.target.spaceId+"/products/"+e.product.info.name+":"+e.product.info.version+"/publish":"proxy/orgs/"+t.orgId+"/environments/"+e.target.environmentId+"/products/"+e.product.info.name+":"+e.product.info.version+"/publish",o.post(n,a).success(function(){e.republishingProduct=!1,e.creatingProduct=!1,e.saveSinceLastPublish=!1,delete e.productNotPublished,u.track("assembly","republishedProduct")}).error(function(){e.republishingProduct=!1,e.creatingProduct=!1,e.xhrProcessing=!1,delete e.productNotPublished})}).error(function(){e.creatingProduct=!1,e.republishingProduct=!1,e.xhrProcessing=!1})},y.addApiToProduct=function(){if(e.product){var a=e.swaggerDocument.info["x-ibm-name"]||e.swaggerDocument.info.title;e.product.apis||(e.product.apis={});for(var n=1,o=a;e.product.apis[a];)a=o+"_"+n,n++;e.product.apis[a]={name:o+":"+e.swaggerDocument.info.version},e.product.plans[e.plan]&&!_.isEmpty(e.product.plans[e.plan].apis)&&(e.product.plans[e.plan].apis[a]={}),e.republishingProduct=!0,e.product.$save({orgId:t.orgId,productVersion:e.product.info.name+":"+e.product.info.version}).then(function(){e.republishingProduct=!1,e.productContainsApi=!0},function(){e.republishingProduct=!1,e.productContainsApi=!0})}},y.createAndSubscribeApp=function(){e.appName&&(e.creatingApp=!0,o.post("proxy/orgs/"+t.orgId+"/environments/"+e.target.environmentId+"/providerApps",{name:e.appName}).success(function(t){e.application=t,e.applicationCreated=!0,y.applicationChange(),y.subscribeApp()}).error(function(){e.creatingApp=!1}))},y.subscribeApp=function(){if(e.application){e.subscribingApp=!0;var a=e.deployedProducts.filter(function(t){return t.productName===e.product.info.name&&t.productVersion===e.product.info.version});if(a.length<1)return e.productNotPublished=!0,void(e.subscribingApp=!1);var n=a[0].url+"/plans/"+e.plan;o.post("proxy/orgs/"+t.orgId+"/environments/"+e.target.environmentId+"/providerApps/"+e.application.id+"/subscriptions",{planURL:n}).success(function(){e.creatingApp=!1,e.subscribingApp=!1}).error(function(){e.creatingApp=!1,e.subscribingApp=!1})}},y.targetChange=function(){e.target&&"undefined"!=typeof localStorage&&(e.catalog=e.environments.filter(function(t){return t.id===e.target.environmentId})[0],localStorage.setItem("apim.test.target",angular.toJson(e.target)),y.gwServiceChange(!0))},y.gwServiceChange=function(t){if(!e.offlineMode&&e.target&&"undefined"!=typeof localStorage&&e.target.spaceId){
var a=e.catalog.spaces.filter(function(t){return t.id===e.target.spaceId});if(t||0===e.matchingGwServices.length){e.matchingGwServices=[];var n=a[0].gwServices;if(!n)return void(e.gwServiceTarget="");n.forEach(function(t){e.gateways.forEach(function(a){a.id===t&&e.matchingGwServices.push(a)})}),e.gwServiceTarget=e.matchingGwServices[0].name}}},y.secureGatewayDeploymentInfoChange=function(){if(e.secureGatewayDeploymentInfo){for(var t=0,a=0;a<e.secureGatewayDeploymentInfo.length;a++)0===e.secureGatewayDeploymentInfo[a].gateway.length&&t++;0===t&&(e.needSecureGatewaySetup=!1)}},y.productChange=function(){if(e.product){var t=Object.keys(e.product.plans);t.length>0&&(e.plan=t[0],y.planChange()),delete e.productNotPublished,e.productContainsApi=r.containsApi(e.product,e.swaggerDocument),"undefined"!=typeof localStorage&&localStorage.setItem("apim.test.product",e.product.info.name+":"+e.product.info.version)}},y.planChange=function(){e.plan&&"undefined"!=typeof localStorage&&localStorage.setItem("apim.test.plan",e.plan)},y.applicationChange=function(){e.application&&"undefined"!=typeof localStorage&&(localStorage.setItem("apim.test.application",e.application.id),e.clientId=e.application.credentials.clientID)},y.operationChange=function(){e.selectedOperation&&"undefined"!=typeof localStorage&&(e.parameterValues={},localStorage.setItem("apim.test.operation",e.selectedOperation.verb+" "+e.selectedOperation.path))},y.loadDebugData=function(){delete e.debugData,e.response&&e.response.transactionId&&(e.loadingDebugData=!0,o.get("proxy/orgs/"+t.orgId+'/analytics/query?eventType=apievent&fields=ALL&size=1000&sort=datetime&timeRange=QUARTER&timeZoneOffset=0&queryString=debug.transid:"'+e.response.transactionId+'"').then(function(t){e.loadingDebugData=!1,t.data&&t.data.hits&&t.data.hits.length>0&&t.data.hits[0].debug&&(e.debugData=t.data.hits[0].debug)},function(){e.loadingDebugData=!1}))},y.focusIndex=-1,y.previousPolicy=function(){y.focusIndex<0||(y.focusIndex--,y.focusIndex===-1&&$("apim-assembler")[0].focus(),0===y.focusIndex&&$("apim-assembler .inputNode")[0].focus(),$("apim-assembler apim-node .policyName:contains(PROXY)").parent())},y.nextPolicy=function(){y.focusIndex++,0===y.focusIndex&&$("apim-assembler .inputNode")[0].focus()},y.showDebugForNode=function(t,a){var n;"input"===a?(n=f("Request"),n||(n=f("API Information"))):"output"===a?n=f("Response"):(n=f(a.$$type),a.title&&a.title.toLowerCase().indexOf("proxy")>-1&&(n=f("Assembly Proxy"))),n&&n.name&&(e.selectedDebugData=n,$("apim-assembly-test .testItemHeader:contains("+n.name+")")[0].scrollIntoView())},e.$on("node-selected",y.showDebugForNode)}]),angular.module("apiconnect-assembly-test").controller("AssemblerTestParameterController",["$scope",function(e){var t=this;e.canGenerate=!0,e.parameter&&"JSON"===e.parameter.format&&(e.canGenerate=!1),e.parameter&&"boolean"===e.parameter.type&&(e.canGenerate=!1),e.parameter&&e.parameter.schema&&(e.schema=angular.copy(e.parameter.schema),e.schema.example&&(e.parameterValues[e.parameter.name]=e.schema.example));var a=e.operationRef?e.operationRef.path:e.pathName,n=e.operationRef?e.operationRef.verb:e.verb;t.generateExample=function(){e.parameterValues[e.parameter.name]=window.exampleGenerator.generateExampleParameter(e.swaggerDocument,a,n,e.parameter,e.contentTypeHeader)}}]),angular.module("apiconnect-assembly-test").controller("AssemblyTestDebugDataController",["$scope",function(e){e.yamlValue=jsyaml.safeDump(angular.fromJson(angular.toJson(e.data)),{lineWidth:-1})}]),angular.module("apiconnect-assembly").factory("Assembly",["$resource",function(e){return e("proxy/orgs/:orgId/assemblies/:assemblyId/",{},{query:{method:"GET",params:{orgId:"@orgId"},isArray:!0},get:{method:"GET",params:{orgId:"@orgId",assemblyId:"@assemblyId"},isArray:!1},update:{method:"PUT",params:{orgId:"@orgId",assemblyId:"@assemblyId"},isArray:!1}})}]).factory("Path",function(){return function(e,t,a,n){var o=this;return o.path=e,"string"==typeof t&&(t=JSON.parse(t)),o.dimensionality=t,o.container=a,o.type=n,o.getPath=function(){return e},o.getDimensionality=function(){return o.dimensionality.length},o.getType=function(){return o.type},o}}).factory("Map",["SchemaReferences",function(e){return function(t,a,n){function o(e){if(e.actions)e.actions.forEach(function(t){t.$$parent=e,o(t)});else{var t=[],a=angular.copy(e.from),n=e.set||e.create,i=e;"string"==typeof a&&(a=[a]);for(var s=!1;i.$$parent;){if(i=i.$$parent,a)for(var r=0;r<a.length;r++)0!==a[r].indexOf("#/")?a[r]=(i.foreach||i.source)+"."+a[r]:s=!0;n=(i.set||i.create)+"."+n,t.splice(0,0,{source:i.foreach||i.source,target:i.set||i.create})}var l={target:n};a&&(l.source=a),e.create&&(l.$$create=!0),s===!0&&(l.merge=!0),e.value&&(l.value=e.value),void 0!==e["default"]&&(l["default"]=e["default"]),t.length>0&&(l.foreach=t),m.push(l)}}function i(e,t){var a={},n=[];if(e.foreach&&0!==e.foreach.length){a={create:e.foreach[0].target},e.merge&&(a.$$merge=!0),e.foreach[0].source&&(a.foreach=e.foreach[0].source),e.source&&(e.source.forEach(function(t){var o=e.sourceContext?t.replace(e.sourceContext+".",""):t;o===a.foreach&&(o=e.merge?"#/"+o:"$item"),n.push(o)}),e.foreach[0].source&&(a.from=e.foreach[0].source.length>1?e.foreach[0].source:e.foreach[0].source[0])),e.source||void 0===e["default"]||e.foreach[0].source&&(a.from=e.foreach[0].source.length>1?e.foreach[0].source:e.foreach[0].source[0]),a.actions=[];var o={source:n,target:e.targetContext?e.target.replace(e.targetContext+".",""):e.target,foreach:e.foreach.slice(1),targetContext:e.foreach[0].target};e.$$create&&(o.$$create=!0),e.foreach[0].source&&(o.sourceContext=e.foreach[0].source),e.value&&(o.value=e.value),void 0!==e["default"]&&(o["default"]=e["default"]),e.merge&&(o.merge=!0),i(o,a.actions)}else{var s=e.targetContext?e.target.replace(e.targetContext+".",""):e.target;e.targetContext===e.target&&(s="$item"),a[e.$$create?"create":"set"]=s,e.source&&(e.source.forEach(function(t){var a=e.sourceContext?t.replace(e.sourceContext+".",""):t;a.indexOf(".$item")>0?a=a.replace(".$item",""):0===a.indexOf("$item.")&&(a=a.replace("$item.","")),n.push(a)}),a.from=n.length>1?n:n[0]),e.value&&(a.value=e.value),void 0!==e["default"]&&(a["default"]=e["default"])}t.push(a)}function s(e,t,a){if(!e.actions||!t.actions)return!1;var n=e.create||e.set,o=t.create||t.set;return e.$$merge||t.$$merge?n===o:a?n===o&&(e.foreach===t.foreach||void 0===e.foreach||void 0===t.foreach):n===o&&e.foreach===t.foreach}function r(e){for(var t,a,n,o=0,i=0,l=!1;i<e.length;)e[i].$$merge&&(l=!0),i++;for(;o<e.length;)if(t=e[o],t.actions){for(var c=o+1;c<e.length;)n=!1,a=e[c],a.actions?(s(t,a,l)&&(n=!0,t.actions=t.actions.concat(a.actions),t.actions=r(t.actions),e.splice(c,1),t.from=t.from||a.from,t.foreach=t.foreach||a.foreach),n||c++):c++;o++}else o++;return e}function l(e,t,a){var n=!1;if(e&&e.source)if("string"==typeof e.source)e.source===a?(e.source=t,n=!0):0===e.source.indexOf(a+".")&&(e.source=t+e.source.substring(a.length),n=!0);else for(var o=0;o<e.source.length;o++)e.source[o]===a?(e.source[o]=t,n=!0):0===e.source[o].indexOf(a+".")&&(e.source[o]=t+e.source[o].substring(a.length),n=!0);return n}function c(e,t,a){var n=!1;return e&&e.target&&(e.target===a?(e.target=t,n=!0):0===e.target.indexOf(a+".")&&(e.target=t+e.target.substring(a.length),n=!0)),n}function d(e,t,a){var n=!1;if(e.value)for(var o=e.value.indexOf(a);o>-1;)e.value=e.value.substring(0,o)+t+e.value.substring(o+a.length),o=e.value.indexOf(a,o+t.length),n=!0;return n}var p=this,m=[];return p.readOnly=!!t.$$readOnly||!!t.$$parentReadOnly,t.actions&&t.actions.forEach(function(e){o(e)}),p.getMapping=function(e){var t=m.filter(function(t){return t.target===e});return t.length>0?t[0]:null},p.hasMapping=function(e){return null!==p.getMapping(e.getPath())||null!==p.getMapping(e.getPath()+".$item")},p.getMappingForPath=function(e){return p.getMapping(e.getPath())},p.setMappingForPath=function(e,t){var a,o=p.getMapping(e.getPath());if(o&&void 0!==o["default"]&&o.foreach&&o.foreach.length>0&&!o.foreach[0].source&&(a=o["default"],p.deleteMappingForPath(e),o=null),o)t&&(o.source||(o.source=[]),o.source.push(t.getPath()));else{o={target:e.getPath()},t&&(o.source=[t.getPath()]),a&&(o["default"]=a);var i=[];if(e.getDimensionality()>0)for(var s=0,r="",l="";s<e.getDimensionality();){var c="$item";t&&(t.getDimensionality()>s?(c=t.dimensionality[s].replace(l,""),l=t.dimensionality[s]+"."):c=t.getPath());var d={target:e.dimensionality[s].replace(r,"")};t&&(d.source=c),i.push(d),r=e.dimensionality[s]+".",s++}i.length>0&&(o.foreach=i),m.push(o)}return n(p.getActions()),o},p.deleteMappingForPath=function(e){p.deleteMapping(e.getPath())},p.deleteMapping=function(e){m=m.filter(function(t){return t.target!==e}),n(p.getActions())},p.getActions=function(){var e=[];return m.forEach(function(t){i(t,e)}),angular.fromJson(angular.toJson(r(e)))},p.getModel=function(){return m},p.pruneModel=function(t,o,i,s){if(!p.readOnly){var r=[],l=!1,c=!0;i===!1&&(c=!1);var d=[];return m.forEach(function(n){var i=[];if(n.source){for(var s=0;s<n.source.length;s++)e.propertyExistsInSchemas(n.source[s],t,a,c)?i.push(n.source[s]):(d.indexOf(n.source[s])===-1&&d.push(n.source[s]),l=!0);if(0===i.length)return}if(n.target&&!e.propertyExistsInSchemas(n.target,o,a,c))return d.indexOf(n.target)===-1&&d.push(n.target),void(l=!0);if(!n.target)return d.indexOf(n.source[0])===-1&&d.push(n.source[0]),void(l=!0);if(0===i.length||i.length===n.source.length)r.push(n);else{var p=angular.fromJson(angular.toJson(n));p.source=i,r.push(p)}}),l&&(s||(m=r,n(p.getActions()))),d}},p.inputRenamed=function(e,t){var a=e.replace(/\./g,"\\."),o=t.replace(/\./g,"\\."),i="#/"+a,s="#/"+o,r=!1;m.forEach(function(e){e.source&&(l(e,a,o)&&(r=!0),l(e,i,s)&&(r=!0)),e.value&&(d(e,"$("+a+")","$("+o+")")&&(r=!0),d(e,"$("+a+".","$("+o+".")&&(r=!0),d(e,"$("+i+")","$("+s+")")&&(r=!0),d(e,"$("+i+".","$("+s+".")&&(r=!0)),e.foreach&&(e.foreach[0]&&(e.foreach[0].source&&l(e.foreach[0],a,o)&&(r=!0),e.foreach[0].value&&(d(e.foreach[0],"$("+a+")","$("+o+")")&&(r=!0),d(e.foreach[0],"$("+a+".","$("+o+".")&&(r=!0))),e.foreach.forEach(function(t){t.source&&l(t,i,s)&&(r=!0),t.value&&(d(e,"$("+i+")","$("+s+")")&&(r=!0),d(e,"$("+i+".","$("+s+".")&&(r=!0))}))}),r&&n(p.getActions())},p.outputRenamed=function(e,t){var a=e.replace(/\./g,"\\."),o=t.replace(/\./g,"\\."),i="#/"+a,s="#/"+o,r=!1;m.forEach(function(e){e.target&&(c(e,a,o)&&(r=!0),c(e,i,s)&&(r=!0)),e.value&&(d(e,"$("+a+")","$("+o+")")&&(r=!0),d(e,"$("+a+".","$("+o+".")&&(r=!0),d(e,"$("+i+")","$("+s+")")&&(r=!0),d(e,"$("+i+".","$("+s+".")&&(r=!0)),e.foreach&&(e.foreach[0]&&(e.foreach[0].target&&c(e.foreach[0],a,o)&&(r=!0),e.foreach[0].value&&(d(e.foreach[0],"$("+a+")","$("+o+")")&&(r=!0),d(e.foreach[0],"$("+a+".","$("+o+".")&&(r=!0))),e.foreach.forEach(function(t){t.target&&c(t,i,s)&&(r=!0),t.value&&(d(e,"$("+i+")","$("+s+")")&&(r=!0),d(e,"$("+i+".","$("+s+".")&&(r=!0))}))}),r&&n(p.getActions())},p}}]).service("ExtensionType",["Path",function(e){var t=null,a=this;a.setHandler=function(e){t=e},a.getValueForPath=function(e){var a=t.paths[e],n=null;return a&&(n=t.map.getMappingForPath(a)),n?n["default"]:null},a.setValueForPath=function(a,n){var o=t.paths[a];if(n){o||(o=new e(a,0),t.paths[a]=o);var i=t.map.getMapping(o);i?(i["default"]=n,t.map.setMappingForPath(o)):(i=t.map.setMappingForPath(o),i["default"]=n,t.map.setMappingForPath(o))}else o&&t.map.deleteMappingForPath(o);t.markDirty(),t.selectedNode.actions=t.map.getActions()}}]).service("policyService",function(){var e=this;e.createPolicyInstance=function(e,t){if(!e.info)return e;var a={};if(!e.info.name)return a;var n=e.properties,o={$$type:e.info.name,$$categories:e.info.categories,$$display:e.info.display,$$schema:n};return n&&(e.info.display&&e.info.display.name?o.title=e.info.display.name:o.title=e.info.name),"operation-switch"===e.info.name?angular.extend(o,{"case":[{operations:[],execute:[]}],otherwise:[]}):"switch"===e.info.name?(angular.extend(o,{"case":[{condition:"",execute:[]}]}),e.info.categories&&e.info.categories.indexOf("AppConnect")>-1&&o["case"].push({otherwise:[]})):"if"===e.info.name?angular.extend(o,{condition:"true",execute:[]}):"map"===e.info.name?angular.extend(o,{inputs:{},outputs:{},actions:[]}):"set-variable"===e.info.name?angular.extend(o,{actions:[]}):"Application"===e.info.name?angular.extend(o,{selectedApplication:{},selectedAction:{},$$advanced:!1}):"Trigger"===e.info.name?angular.extend(o,{selectedApplication:{},selectedTrigger:{}}):(n&&angular.extend(o,jsonSchemaDefaults(n)),"invoke"===e.info.name&&a&&a.invoke&&delete a.invoke["stop-on-error"]),(e.custom||t)&&e.info.version&&(o.version=e.info.version),a[e.info.name]=o,a}}).service("triggerService",function(){var e=this;e.deleteTrigger=function(e){e.selectedApplication={},e.selectedTrigger={},delete e.accountName,delete e.$$touched,delete e.$$errors,delete e.auth,delete e.options,delete e.outputSchema},e.setTriggerApplication=function(e,t){delete e.$$errors;var a={name:t.name,displayName:t.displayName};e.selectedApplication=angular.copy(a),e.selectedTrigger.name=t.task.name,e.selectedTrigger.displayName=t.task.displayName,e.selectedTrigger.dataModel=t.task.dataModel,e.selectedTrigger.hasConfig=t.task.hasConfig}}).factory("errorFactory",["$rootScope","$mdDialog","$mdPanel",function(e,t,a){return{throwError:function(a){var n=e.$new();n.errorObject=a,t.show({fullscreen:!0,parent:document.body,scope:n,template:'<md-dialog class="error-dialog"><error-dialog></error-dialog></md-dialog>'})},showWarning:function(t){var n=e.$new();return n.warningObject=t,n.panelReference=a.create({attachTo:document.body.querySelector("apim-assembler"),panelClass:"warning-dialog",scope:n,template:"<warning-dialog></warning-dialog>",trapFocus:!1}),n.panelReference.open(),n.panelReference}}}]).factory("AssemblerTracking",["$rootScope",function(e){var t={};return t.track=function(t,a,n){e.$emit("event:track",t,a,n)},t}]).service("canvasAnimationService",[function(){var e=this;e.canvasXPosition=0,e.reset=function(){e.initialPositionSet=!1,e.canvasXPosition=0},e.animateCanvasSlide=function(){var t=e.canvasXPosition||0,a={},n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=document.querySelector(".isSelected");return o&&(a=o.getBoundingClientRect(),t=n/2-a.right+a.width/2,t+=e.canvasXPosition,e.canvasXPosition=t),t}}]).service("assemblyModel",function(){var e=this;e.flow={trigger:null,nodes:[],request:null,response:null},e._searchForSelectedNode=function(t){for(var a=t.map(function(e){return e.$$type?e:e[Object.keys(e)[0]]}),n=0;n<a.length;n++){if(a[n].$$isSelected)return a[n];if("switch"===a[n].$$type)for(var o=0;o<a[n]["case"].length;o++){var i=e._searchForSelectedNode(a[n]["case"][o].execute||a[n]["case"][o].otherwise);if(i)return i}}},e._searchForNode=function(t,a){for(var n=0;n<t.length;n++){var o=Object.keys(t[n]),i=1===o.length?t[n][o[0]]:t[n];if(i===a)return!0;if("switch"===i.$$type)for(var s=0;s<i["case"].length;s++){var r=i["case"][s].execute||i["case"][s].otherwise,l=e._searchForNode(r,a);if(l)return!0}}return!1},e.getSelectedNode=function(){return e.flow.trigger&&e.flow.trigger.$$isSelected?e.flow.trigger:e.flow.response&&e.flow.response.$$isSelected?e.flow.response:e._searchForSelectedNode(e.flow.nodes)},e.containsSelectedNode=function(t){return!!e._searchForSelectedNode([t])},e.containsNode=function(t,a){return e._searchForNode([t],a)},e.countInnerActions=function(e){var t=0;if("switch"!==e.$$type)return 0;var a=function(e){for(var n=0;n<e["case"].length;n++)for(var o=e["case"][n].execute||e["case"][n].otherwise,i=0;i<o.length;i++)o[i]["switch"]?a(o[i]["switch"]):t++};return a(e),t}}),angular.module("apiconnect-assembly").factory("SchemaReferences",function(){function e(t,a,n,o){Object.keys(a).forEach(function(i){var s=a[i];if(!s.allOf)return!1;var r=s.allOf.filter(function(e){return e.$ref===t});if(r.length>0&&!n[i]){var l=angular.copy(s);l.allOf=l.allOf.filter(function(e){return e.$ref!==t&&(e.$$extender=i,e.$$extendedType=s["x-xsi-type"],e.$$extendedParents=o,!0)}),n[i]=l;var c=t.lastIndexOf("/"),d=t.substring(0,c+1),p=d+i,m={parentTypes:o,types:[]};m.types=m.types.concat(l.allOf),e(p,a,n,m)}})}function t(t,a){if(t.$ref){var n=t.$ref,o={};return a.definitions&&e(n,a.definitions,o,null),a["x-ibm-configuration"]&&a["x-ibm-configuration"].targets&&Object.keys(a["x-ibm-configuration"].targets).forEach(function(t){var i=a["x-ibm-configuration"].targets[t];i.definitions&&e(n,i.definitions,o,null)}),o}}function a(e,t,a){if(a&&a[e])return angular.copy(a[e]);for(var n=e.split("/"),o=t,i=1;i<n.length;i++)if(o=o[n[i]],!o)return;var s=angular.copy(o);return s.properties&&Object.keys(s.properties).forEach(function(e){s.properties[e].name=e}),s}function n(e,t,a,i,s){o.unwindRefs(t,a,i);var r=e.join("."),l=t.title||t.name||t.$$title;if(l){if(l===r)return!0;if(l+=".$item",l===r)return!0}if(l=t.title||t.name||t.$$title,l===e[0]||!l||"$item"===e[0]){if(1===e.length)return!0;if(t.properties)for(var c=1,d=e[c];c<e.length;){if(c++,s&&t["x-ibm-discriminator"])return!0;if(t.properties[d])return n([d].concat(e.slice(c)),t.properties[d],a,i,s);if(0===d.indexOf("@")){var p=d.substring(1);if(t.properties[p]&&t.properties[p].xml&&t.properties[p].xml.attribute===!0)return!0}d+="."+e[c]}if(t.items)return"$item"===e[1]||(e[0]="$item",n(e,t.items,a,i,s));if(t.allOf||t.anyOf||t.oneOf)for(var m=t.allOf||t.anyOf||t.oneOf,u=0;u<m.length;u++)if(n(e,m[u],a,i,s))return!0}return!1}var o=this;return o.unwindRefs=function(e,n,i){if(e&&n&&!e.$$unwound){if(e.$$unwound=!0,e.allOf&&e.allOf.forEach(function(e){o.unwindRefs(e,n,i)}),e.anyOf&&e.anyOf.forEach(function(e){o.unwindRefs(e,n,i)}),e.oneOf&&e.oneOf.forEach(function(e){o.unwindRefs(e,n,i)}),e.items&&o.unwindRefs(e.items,n,i),e.$ref){var s=a(e.$ref,n,i);s&&angular.extend(e,s)}if(e.discriminator||e["x-ibm-discriminator"]){var r=t(e,n),l=[];r&&Object.keys(r).forEach(function(e){l.push(r[e])}),l.length>0?(e.$$extendingTypes=l,e["x-ibm-discriminator"]&&"object"===e.type&&(e.properties||(e.properties={}),e.properties["x-ibm-discriminator"]={type:"string"}),e.allOf||(e.allOf=[]),e.$$extendingTypes.forEach(function(t){e.allOf=e.allOf.concat(t.allOf)})):e.$$extendingTypes=[]}}},o.propertyExistsInSchemas=function(e,t,a,o){0===e.indexOf("#/")&&(e=e.substring(2));for(var i=0;i<t.length;i++)if(n(e.split(/\\?\./),t[i],a,null,o))return!0;return!1},o}),angular.module("apiconnect-assembly").controller("MapperController",["$scope","$mdDialog","$timeout","translateFilter","resize","Path","Map","ExtensionType",mapperController]),angular.module("apiconnect-assembly").controller("TargetConnectorController",["$scope","$mdDialog","mapping","target","paths","valueType",targetConnectorController]),angular.module("apiconnect-assembly").controller("PruneConfirmationController",["$scope","$mdDialog","parentScope","saveDiscriminator","unrecognized",pruneConfirmationController]),angular.module("apiconnect-assembly").controller("MapInputOutputController",["$scope","$modal","translateFilter",MapInputOutputController]),angular.module("apiconnect-assembly").controller("InlineSchemaController",["$scope","$modalInstance",InlineSchemaController]),angular.module("apiconnect-assembly").controller("ConditionController",["$scope",ConditionController]),angular.module("apiconnect-assembly").controller("ConditionExpressionController",["$scope","Expressions",ConditionExpressionController]),angular.module("apiconnect-assembly").controller("ConditionExpressionLeftController",["$scope","$controller",ConditionExpressionLeftController]),angular.module("apiconnect-assembly").controller("ConditionExpressionRightController",["$scope","$controller",ConditionExpressionRightController]),angular.module("apiconnect-assembly").factory("Expressions",function(){function e(e){return"BinaryExpression"===e.type&&("MemberExpression"===e.left.type&&("request"===e.left.object.name&&("verb"===e.left.property.name&&"Literal"===e.right.type)))}function t(e){return"BinaryExpression"===e.type&&(("=="===e.operator||"==="===e.operator)&&("MemberExpression"===e.left.type&&("MemberExpression"===e.left.object.type&&("api"===e.left.object.object.name&&("operation"===e.left.object.property.name&&("path"===e.left.property.name&&"Literal"===e.right.type))))))}function a(a){return"LogicalExpression"===a.type&&("&&"===a.operator&&(!(!e(a.left)&&!e(a.right))&&!(!t(a.left)&&!t(a.right))))}function n(e){return"BinaryExpression"===e.type&&(("=="===e.operator||"==="===e.operator)&&("MemberExpression"===e.left.type&&("MemberExpression"===e.left.object.type&&("api"===e.left.object.object.name&&("operation"===e.left.object.property.name&&("id"===e.left.property.name&&"Literal"===e.right.type))))))}function o(e){return a(e)?["get","put","post","delete","options","patch","head"].indexOf(e.left.right.value.toLowerCase())>=0?e.left.right.value+" "+e.right.right.value:e.right.right.value+" "+e.left.right.value:""}function i(e){return e&&e.left&&e.left.right&&e.right&&e.right.right?["get","put","post","delete","options","patch","head"].indexOf(e.left.right.value.toLowerCase())>=0?{verb:e.left.right.value,path:e.right.right.value,$$expressionString:window.jseb(e)}:{verb:e.right.right.value,path:e.left.right.value,$$expressionString:window.jseb(e)}:{}}function s(e){return n(e)?e.right.value:""}function r(e){return e&&e.right?{operationId:e.right.value,$$expressionString:window.jseb(e)}:{}}function l(e){return!!a(e)||!!n(e)}function c(e){return a(e)?o(e):n(e)?s(e):void 0}function d(e){return a(e)?i(e):n(e)?r(e):void 0}function p(e){return!!l(e)||!(!e.left||!p(e.left))&&!(!e.right||!p(e.right))}function m(e){var t=c(e);if(t)return t;if(e.left&&e.right){var a=m(e.left);if(!a)return;var n=m(e.right);if(!n)return;return a+" or "+n}}function u(e,t){var a=d(e);return a?(t.push(a),t):(e.left&&u(e.left,t),e.right&&u(e.right,t),t)}function g(e){return u(e,[])}function h(e){if(!e||0===e.length)return"";for(var t="("+e[0].$$expressionString+")",a=1;a<e.length;a++)t+="||("+e[a].$$expressionString+")";return t}function f(e){return m(e)||window.jseb(e)}return{isOperationExpression:a,isOperationIdExpression:n,getOperationString:o,getOperationIdString:s,highLevelExpression:p,expressionAsString:f,expressionAsChips:g,chipsAsExpressionString:h}}),angular.module("apiconnect-assembly.recursion-helper",[]).factory("RecursionHelper",["$compile",function(e){return{compile:function(t,a){angular.isFunction(a)&&(a={post:a});var n,o=t.contents().remove();return{pre:a&&a.pre?a.pre:null,post:function(t,i){n||(n=e(o)),n(t,function(e){i.append(e)}),a&&a.post&&a.post.apply(null,arguments)}}}}}]),angular.module("apiconnect-assembly").filter("translateMultiple",["translateFilter",function(e){return function(t,a){return e(t,a)}}]),angular.module("apiconnect-assembly").filter("translatePlurality",["translateFilter",function(e){return function(t,a,n){var o={};return n||(n="0"),o[n]=t,1===t?e(a+"Singular",o):e(a+"Plural",o)}}]);var basicTypes={integer:{type:"integer",format:"int32"},"long":{type:"integer",format:"int64"},"float":{type:"number",format:"float"},"double":{type:"number",format:"double"},string:{type:"string"},"byte":{type:"string",format:"byte"},binary:{type:"string",format:"binary"},"boolean":{type:"boolean"},date:{type:"string",format:"date"},dateTime:{type:"string",format:"date-time"},password:{type:"string",format:"password"},array:{type:"array"},object:{type:"object"}};angular.module("apiconnect-assembly.mapper-schema",["apiconnect-assembly.recursion-helper"]).controller("SchemaPropertyController",["$scope","SchemaReferences",function(e,t){e.schema&&e.schema.$$extender&&(e.extendingObjectName=e.schema.$$extender),e.propertyCollapsed=e.open<1&&!e.isPrimitive,e.toggleProperty=function(){e.$broadcast("collapse-property",e.property),e.propertyCollapsed=!e.propertyCollapsed},e.propertyCollapsed||t.unwindRefs(e.property,e.definitions,e.references),e.propertyIsArray="array"===e.property.type,"object"===e.property.type&&(e.propertyIsObject=!0),void 0!==e.property.properties&&(e.propertyIsObject=!0),"array"===e.property.type&&e.property.items&&"object"===e.property.items.type&&(e.propertyIsObject=!0)}]).directive("apicMapperSchema",["RecursionHelper","SchemaReferences","ExtensionType",function(e,t,a){function n(e){function n(e){e&&(angular.isObject(e.items)?n(e.items):angular.isObject(e.properties)&&Object.keys(e.properties).forEach(function(t){var a="";angular.isObject(e.properties[t].xml)&&e.properties[t].xml.attribute===!0&&0!==t.indexOf("@")&&(a="@"),e.properties[t].name=a+t,n(e.properties[t])}))}function o(e){var t=[];return e&&e.forEach(function(e){if(e.$$extendedParents)for(var a=e.$$extendedParents;a&&a.types&&a.types.length>0;)t=t.concat(a.types),a=a.parentTypes}),t}function i(t){e.schema.allOf=[],t?e.schema.$$extendingTypes.forEach(function(a){if(e.getUniqueTypeName(a)===t){e.schema.allOf=e.schema.allOf.concat(a.allOf);var n=o(a.allOf);n.length>0&&(e.schema.allOf=e.schema.allOf.concat(n))}}):e.schema.$$extendingTypes.forEach(function(t){e.schema.allOf=e.schema.allOf.concat(t.allOf)})}if(e.getUniqueTypeName=function(e){return e["x-xsi-type-uniquename"]?e["x-xsi-type-uniquename"]:e["x-xsi-type"]},e.isRoot="undefined"==typeof e.root,e.editable===!1&&(e.schemaEditable=!1),"undefined"==typeof e.schemaEditable&&(e.schemaEditable=!e.schema.$ref),e.editable||(e.schema=angular.copy(e.schema)),t.unwindRefs(e.schema,e.definitions,e.references),n(e.schema),e.isArray=e.schema&&"array"===e.schema.type,e.isPrimitive=e.schema&&!e.schema.properties&&!e.schema.items&&"undefined"!=typeof e.schema.type&&"array"!==e.schema.type&&"object"!==e.schema.type,e.isCollapsed=e.open<1&&!e.isPrimitive,e.isCollapsed||t.unwindRefs(e.schema,e.definitions,e.references),e.isDiscriminator=!1,!e.isArray&&!e.isPrimitive&&e.schema["x-ibm-discriminator"]){for(var s=!1,r=e.schema.$$extendingTypes.length,l=0;l<r;l++){var c=e.schema.$$extendingTypes[l];if(e.getUniqueTypeName(c)===e.getUniqueTypeName(e.parentSchema)){s=!0;break}}!s&&r>0&&(e.isDiscriminator=!0)}e.showProperty=function(t){return!e.isCollapsed&&!!("x-ibm-discriminator"!==t||e.schema.$$extendingTypes&&e.isDiscriminator)},e.toggle=function(){e.isCollapsed=!e.isCollapsed,t.unwindRefs(e.schema,e.definitions,e.references),e.$emit("json-schema-view-property-collapsed")},e.deleteProperty=function(){e.parentSchema&&e.parentSchema.properties&&e.parentSchema.properties[e.schema.name]?delete e.parentSchema.properties[e.schema.name]:e.parentSchema&&e.parentSchema.items&&delete e.parentSchema.items,e.$emit("json-schema-view-property-modified",e.parentSchema)},e.isRequired=function(t){var a=e.$parent.schema;return!!(a&&Array.isArray(a.required)&&t.name)&&a.required.indexOf(t.name)>-1},e.isPrimitiveCollapsible=function(){return e.schema.description||e.schema.title},e.convertXOf=function(e){return e.substring(0,3)+" of"},e.$on("collapse-property",function(t,a){a===e.schema&&e.toggle()}),e.getPath=function(){if(!e.$parent.getPath)return e.schema.title||e.schema.$$title;var t=e.$parent.getPath();return t=t.replace(/\.\$item$/,""),e.schema.name?t+"."+e.schema.name.replace(/\./g,"\\."):e.$parent.isArray?t:t},e.getDimensionArray=function(){if(!e.$parent.getDimensionArray)return e.isArray?[e.getPath()]:[];if(e.isArray){var t=e.$parent.getDimensionArray();return t.push(e.getPath()),t}return e.$parent.getDimensionArray()},e.getContainer=function(){return e.$parent.getContainer?e.isArray?e.getPath():e.$parent.getPath():e.getPath()},e.previousType="",e.$discriminatorType=function(t){if(!arguments.length){var o=e.getPath()+".x-ibm-discriminator",s=a.getValueForPath(o);return e.schema.$$extendingTypes&&e.previousType!==s&&(e.previousType=s,i(s),e.schema.allOf.forEach(function(e){n(e)}),e.$emit("json-schema-view-refresh",!1)),s?s:""}i(t);var r=e.getPath()+".x-ibm-discriminator";a.setValueForPath(r,t),e.schema.allOf.forEach(function(e){n(e)}),e.$emit("json-schema-view-refresh",!0)}}return{restrict:"E",templateUrl:"src/html/mapper-schema/json-schema-view.html",scope:{schema:"=",parentSchema:"=",name:"=",open:"=",definitions:"=",root:"=",editable:"=",references:"="},compile:function(t){return e.compile(t,n)}}}]).controller("AddPropertyController",["$scope",function(e){e.basicTypes=basicTypes,e.propertyType="string",e.addProperty=function(){if(e.isArray)e.schema.items=angular.copy(basicTypes[e.propertyType]);else{if(!e.propertyName||""===e.propertyName)return;if(e.schema.properties||(e.schema.properties={}),e.schema.properties[e.propertyName])return;e.schema.properties[e.propertyName]=angular.copy(basicTypes[e.propertyType]),e.schema.properties[e.propertyName].name=e.propertyName}e.addProp=!1,delete e.propertyName,e.$emit("json-schema-view-property-modified")}}]),angular.module("apiconnect-assembly-localization",[]).config(["$translateProvider",function(e){e.useSanitizeValueStrategy("escaped");var t={assemblySaving:"Saving assembly...",assemblySaved:"Assembly saved","assembly-move-panel":"Toggle info panel between right and bottom",assembliesNoAssembliesFound:"No assemblies found.",assembliesNoMatchingAssemblies:"There are no assemblies that match the chosen filters.",assembly_empty_schema:"There are no properties to configure for this policy",assembly_otherwise:"otherwise",assembly_title:"Title",assembly_filter_policies:"Filter policies",assembly_policies_filter_micro:"Micro Gateway policies",assembly_policies_filter_dp:"DataPower Gateway policies",assembly_node_gateway_mismatch:"This policy is not available on the selected gateway",assemblies_search:"Search assemblies",assemblyLastModified:"Last modified",assemblyCreateProduct:"Create and publish",assemblyRefreshProducts:"Refresh products",assemblyRepublishProduct:"Republish product",assemblySubscribeApp:"Subscribe",assemblyCreateAndSubscribeApp:"Create and subscribe",assemblyAppName:"App name",assemblyPlanName:"Plan name",assemblyCondition:"Condition",assemblerMapperConfigureTarget:"Configure mapping",assemblerMapperIterate:"Iterate?",assemblerMapperIterateOn:"Iterate on",assemblerMapperOutputArray:"Output array",assemblerMapperInputArray:"iterate over",assemblerMapperIterateOutput:"The output of this mapping is within an array and it's contents will be created by iterating over the chosen input. If the chosen input isn't an array, an array of length 1 will be produced.",assemblerMapperIterateDescription:"Some inputs are arrays, or contained within arrays. To iterate over the contents, choose the iterate option and choose the input over which to iterate.",assemblerMapperInputSchema:"Source schema",assemblerMapperMappedFrom:"Mapped from: ",assemblerMapperOutputSchema:"Target schema",assemblerMapperTargetDescription:"Property {{target}} is currently mapped to {{from}} - the mapping can be removed below.",assemblerMapperTargetNoMapDescription:"Property {{target}} can be assigned a static value by entering it below.",assemblerMapperValue:"Value",assemblerMapperDefault:"Default",assemblerMapperEmptyString:"Empty string as default value",assemblerMapperValueDescription:"A simple JavaScript expression which resolves to the value of the output. This could be a static string ('my static string'), or an expression involving any mapped inputs ($(input.firstName) + ' ' + $(input.lastName))",assemblerMapperDefaultDescription:"A default value which will be used if the inputs to the map are not defined.",assemblyMapSource:"Input",assemblyEditInputs:"Edit inputs",assemblyMapTransformation:"Map",assemblyMapTarget:"Output",assemblyEditOutputs:"Edit outputs",assemblyRefresh:"Refresh","assembly-create-assembly":"Create assembly","assembly-no-assembly":"This API does not yet contain an assembly. Would you like to create one?",assemblySearchErrors:"search errors...",assemblySearchOperations:"search operations...",assemblyFilterOperations:"Select operation...",assemblyFilterOperationsLabel:"Filter by operation",assemblyClearFilterOperationsLabel:"Clear operation filter",assemblySearchDefinitions:"search definitions...",assemblyZoomLabel:"Zoom in and out",assemblyShowCatches:"Show catches",assemblyCase:"case",
assemblyCatch:"catch",assemblyEmptyCase:"empty case",assemblyEmptyCatch:"empty catch",assemblyActivityLogContent:"Content",assemblyActivityLogErrorContent:"Error content",assemblyAddCase:"+ Case",assemblyAddCaseTitle:"Add case",assemblyAddCatch:"+ Catch",assemblyAddCatchDefault:"+ Default",assemblyAddCatchTitle:"Add catch",assemblyAddCatchDefaultTitle:"Add default catch",assemblyAddOtherwise:"+ Otherwise",assemblyOtherwise:"otherwise",assemblyRemoveAction:"Remove",assemblyAddAction:"+ Action",assemblyAction:"Action",assemblyRemoveActionTitle:"Remove action",assemblyAddActionTitle:"Add action",assemblyRedactPath:"Path",assemblyRedactRemove:"Remove",assemblyRedactRedact:"Redact",assemblyRedactFrom:"+ redact from...",assemblyRedactAll:"or redact from all",assemblyRemoveCase:"Remove case",assemblyRemoveCatch:"Remove catch",assemblyMoveUp:"Move up",assemblyMoveDown:"Move down",assemblyPinMenu:"Pin menu",assemblyMaximize:"Maximize / minimize",assemblyJumpToSource:"Jump to source",assemblyTitle:"Title",assemblyDescription:"Description",assemblyExpression:"Condition",assemblyConvertToExpression:"Convert to expression",assemblyLaunchExpressionEditor:"edit condition",assemblyOr:"or",assemblyExpressionEditor:"Condition editor",assemblyDefinition:"Definition",assemblyActionValue:"Value",assemblyActionAdd:"Add",assemblyActionSet:"Set",assemblyActionClear:"Clear",assemblyFitToScreen:"Fit to screen",assemblyZoomIn:"Zoom in",assemblyZoomOut:"Zoom out",assemblyPrevious:"Previous",assemblyNext:"Next",assemblyDone:"Done",assemblyCloseInfo:"Close",assemblyInvoke:"Invoke",assemblyTest:"Test",assemblyTestIdentification:"Identification",assemblyTestAuthorization:"Authorization",assemblyTestAuthorize:"Authorize",assemblyTestRefreshToken:"Refresh token",assemblyTestForgetToken:"Forget token",assemblyTestBasicAuth:"This operation is secured with basic authentication",assemblyTestOauthPassword:"This operation is secured with password flow OAuth",assemblyTestOauthImplicit:"This operation is secured with implicit flow OAuth",assemblyTestOauthAccessCode:"This operation is secured with access code flow OAuth",assemblyTestOauthApplication:"This operation is secured with application flow OAuth",assemblyTestOauthTokenStorage:"The token will not be stored in either a cookie or local storage. If you close the test panel, the token will be lost but may still be valid.",assemblyAppSecret:"Please take note of the client ID and secret for this new application. Store the secret somewhere safe as it cannot be retrieved again, although it can be reset if required:",assemblyTestUsername:"Username",assemblyTestPassword:"Password",assemblyBackToTest:"Back to test",assemblyTestSetup:"Setup",assemblyTestResponse:"Response",assemblyTestResponseCode:"Status code",assemblyTestResponseBody:"Body",assemblyTestResponseTime:"Response time",assemblyTestCallCounter:"Counter",assemblyTestTotalTime:"Total time",assemblyTestAverageTime:"Average time",assemblyTestHeaders:"Headers",assemblyTestDebug:"Debug",assemblyNoDebugData:"No debug data was found for this API call",assemblyApiUnpublishedChanges:"The API may have unpublished changes. Would you like to republish the product?",assemblyApiUnsavedChanges:"The API has unsaved changes.",assemblyApiSaveRepublish:"Save and republish",assemblyTestCatalogDesc:"Choose a catalog to test within:",assemblyTestProductDesc:"Choose a product containing this API, or create a new one:",assemblyTestProductExisting:"Choose an existing product",assemblyTestProductCreate:"Or create a new product and publish it to the selected catalog",assemblyTestProductDoesntContainApi:"The selected product does not contain this API",assemblyTestProductNotPublished:" The selected product is not published to the selected catalog, so it is not possible to subscribe the application",assemblyTestProductAddApi:"Add API",assemblyTestPlanDesc:"Choose a plan against which to test:",assemblyTestAppDesc:"Choose an application with which to test, or create a new one:",assemblyTestAppExisting:"Choose an existing application",assemblyTestAppCreate:"Or create a new application and subscribe to the selected plan",assemblyTestChooseOperation:"Choose an operation to invoke:",assemblyTestRepeat:"Repeat",assemblyTestRepeatDesc:"Repeat the API invocation a set number of times, or until the stop button is clicked",assemblyTestRepeatFor:"Stop after:",assemblyTestStopOnError:"Stop on error",assembly_test_minus_one_response:"No response received. Causes include a lack of CORS support on the target server, the server being unavailable, or an untrusted certificate being encountered.",assemblyStopInvoke:"Stop",assemblyShowSchema:"Show schema",assemblyGenerateData:"Generate",assemblyChangeSetup:"Change setup",assemblyGenerateDefaultObject:"Generate an object",assemblyAverageResponseTime:"Average response time: {{value}}ms",assemblyResponseTime:"Response time: {{value}}ms",assemblyContextVariable:"Context variable",assemblyAddInputTitle:"+ input",assemblyAddParametersTitle:"+ parameters for operation...",assemblyAddOutputsTitle:"+ outputs for operation...",assemblyAddOutputTitle:"+ output",assemblyRemoveInput:"Remove input",assemblyRemoveOutput:"Remove output",assemblyRemoveMappingTitle:"Remove mapping",assemblyRemoveStaticValueTitle:"Remove static value",assemblyOtherOperationsSingular:"This policy is used by one other operation",assemblyOtherOperationsPlural:"This policy is used by {{count}} other operations",assemblyShowPalette:"Show / hide policy palette",assemblyInvokeTargetURL:"Target URL",assemblyInvokeTLSProfile:"TLS profile",assemblyInvokeTimeout:"Timeout",assemblyInvokeUsername:"Username",assemblyInvokePassword:"Password",assemblyInvokeVerb:"HTTP Method",assemblyInvokeCompression:"Compression",assemblyInvokeCacheResponse:"Cache Type",assemblyInvokeCacheTTL:"Cache Time-To-Live",assemblyInvokeCacheKey:"Cache Key",assemblyInvokeOutput:"Output variable",assemblyTransformXSLTInput:"Use context current payload",assemblyJ2XRootElementName:"Root XML Element Name",assemblyJ2XAlwayOutputRoot:"Always output the root element.",assemblyVerbGet:"GET",assemblyVerbPost:"POST",assemblyVerbPut:"PUT",assemblyVerbDelete:"DELETE",assemblyVerbPatch:"PATCH",assemblyVerbHead:"HEAD",assemblyVerbOptions:"OPTIONS",assemblyVerbRequest:"Keep",assemblyCacheNone:"Protocol",assemblyCacheNoCache:"No Cache",assemblyCacheTimeToLive:"Time to Live",assemblyDefineInputs:"Define the inputs to be used in the map. You can also assign a title and description to the map.",assemblyDefineOutputs:"Define the outputs to be used in the map.",assembly_delete_node_tooltip:"Delete",assembly_clone_node_tooltip:"Clone",assembly_build_node_tooltip:"Implement policy",assembly_delete_node_title:"Deleting {{name}}...",assembly_delete_node_description:"Are you sure you want to delete this policy?",assembly_inline_definition:"Inline schema",assembly_load_wsdl:"Load schema from WSDL",assembly_edit_inline_definition:"Edit inline schema",assembly_inline_enter_yaml:"Enter YAML or",assembly_inline_as_yaml:"switch to JSON",assembly_inline_enter_json:"Enter JSON or",assembly_inline_as_json:"switch to YAML",assembly_inline_schema:"Provide a schema",assembly_templates:"Web service operations",assembly_add_property:"add property...",assembly_add_item:"add item...",assembly_add_property_placeholder:"property",assembly_add_item_placeholder:"item",assemblyMapName:"Name",assemblyContentType:"Content type",assemblyContentTypeNone:"none",assemblyPruneModelTitle:"Unrecognized Schema Element(s) Encountered",assemblyPruneModelText:"The current mapping contains references to unrecognized schema elements.",assemblyPruneModel:"Do you want to remove these references?",assemblyCancel:"Ignore",assemblyPrune:"Remove",explorer_check_certificate:"Clicking the link below will open the server in a new tab. If the browser displays a certificate issue, you may choose to accept it and return here to test again.",node_multiple_errors:"{{count}} errors need attention"};if(e.translations("en",t),e.registerAvailableLanguageKeys(["en"],{"en_*":"en"}),navigator.languages)e.determinePreferredLanguage();else if("undefined"!=typeof localStorage){var a=localStorage.getItem("apim-client-locale");if(window.apimSessionLocale){var n=window.apimSessionLocale.split("-").join("_");localStorage.setItem("apim-client-locale",n),a=n}a?e.preferredLanguage(a):e.determinePreferredLanguage()}else e.determinePreferredLanguage();e.fallbackLanguage("en")}]),angular.module("apiconnect-assembly").run(["$templateCache",function(e){e.put("src/html/assembler-canvas.html",'<div data-ng-show="(isFlowSlim() && gotFlowID) || (!isFlowSlim() && policiesByType)" class="assemblerCanvas" data-ng-class="{\'filtering\': nodeFilter, \'hideCatches\': !showCatches}"><div data-ng-if="isFlowSlim()" class="assembly-canvas__fin-container"><div class="assembly-canvas__fin"></div></div><div data-ng-if="noAssembly && !isAppConnect()" style="padding: 20px"><div>{{::\'assembly-no-assembly\' | translate}}</div><button style="margin-top: 10px" data-ng-click="createAssembly();">{{::\'assembly-create-assembly\' | translate}}</button></div><div class="assemblyScaler" ng-class="{\'assembly-scaler__slim\': isFlowSlim()}" data-ng-attr-style="transform: scale({{scaleFactor}}) translateX({{(horizontalTranslation ? horizontalTranslation : 0) + \'px\'}});"><div data-ng-show="(!renderingAssembly && !noAssembly) || isAppConnect()" class="outerMain"><div class="inlineContainer" data-ng-if="config.assemblyType === \'api\'"><app-c-request></app-c-request></div><app-c-trigger data-ng-if="config.assemblyType === \'trigger-action\'" class="triggerNode" tabindex="0"></app-c-trigger><div data-ng-if="!isAppConnect()" class="inputNode" tabindex="0" data-ng-click="nodeSelected($event, \'input\');"></div><div class="dropzoneGroup" data-ng-class="{\'dropzoneGroupSingle\': isAppConnect() && !nodes.length && config.assemblyType !== \'api\',\n                        \'dropzoneGroupSingleApi\': isAppConnect() && !nodes.length && config.assemblyType === \'api\',\n                        \'assembly-canvas__insert-point\': allowNewNode()\n                       }" data-ui-on-drop="policyDropped($data, null, -1)"><div class="ghostPolicy" data-ng-class="{\'js-assembly-canvas__animation-target\': isFlowSlim()}" data-ng-click="ghostSelected($event, null, -1)"><md-icon data-ng-if="isAppConnect() && allowNewNode()" md-svg-icon="floweditor:Plus-Light" class="assembly-canvas__plus-inner"></md-icon></div><div ng-if="isAppConnect() && allowNewNode()" class="ghostPadder"></div></div><node-group></node-group><div data-ng-if="!isAppConnect()" class="outputNode" tabindex="0" data-ng-click="nodeSelected($event, \'output\');"></div><div class="inlineContainer" data-ng-if="config.assemblyType === \'api\'"><app-c-response></app-c-response></div></div><div class="outerCatch catchShellContainer" data-ng-class="{\'emptyClause\': isClauseEmpty(node)}"><div data-ng-include="\'src/html/catch.html\'"></div></div></div></div>'),e.put("src/html/assembler.html","<div data-ng-class=\"{'testMode': testMode, 'snipMode': snipping}\"><apim-assembly-test data-ng-if=\"testMode && config.test\"></apim-assembly-test><policy-list data-ng-show=\"!isAppConnect()\"></policy-list><div class=\"assemblySection stretch\" data-ng-class=\"{'maximized': hidePalette || isAppConnect(), 'hideHeader': config.standAlone }\"><div class=\"assemblyFlow\" data-ng-class=\"{\n        'infoPanelOpen': infoPanelOpen,\n        'infoPanelBottom': infoPanelBottom,\n        'infoPanelRight': !infoPanelBottom,\n        'infoPanelDoubleWidth': selectedNode.$$type === 'map' && infoPanelOpen && !infoPanelBottom\n      }\"><navigation-bar data-ng-show=\"!isFlowSlim()\"></navigation-bar><div data-ng-class=\"{'spinner': renderingassembly}\"></div><assembler-canvas></assembler-canvas><apim-sidenav></apim-sidenav></div></div></div>"),e.put("src/html/assembly-editor.html",'<div data-ng-controller="AssemblyEditorController"><div class="bannerActions" data-ng-show="!xhrProcessing"><div class="dijitInline contentBox saveButton"><div class="buttonAndLabel" style="position: relative; text-align: center" title="{{\'save\' | translate}}"><button aria-label="{{::\'save\' | translate}}" title="{{::\'save\' | translate}}" data-ng-disabled="assemblyInFlux || !isDirty" data-ng-click="saveVersion()" class="iconOnlyButton"><div class="material-icons">save</div></button></div></div></div><div class="stretch underMainBanner"><apim-assembler data-policy-factory="ApimPolicyFactory" data-swagger-doc="swaggerDocument" data-schema="swaggerSchema"></apim-assembler></div></div>'),e.put("src/html/assembly-test.html",'<div class="assemblyTestPanel" data-ng-controller="AssemblerTestController as ctrl"><div data-ng-class="{\'spinner\': !testLoaded}"></div><div class="testSection" data-ng-if="currentPage == 1 && testLoaded && !offlineMode"><div class="testHeader"><h3 class="mainTitle">{{::\'assemblyTestSetup\' | translate}}</h3><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 8px 0px 0px" data-ng-click="setTestMode(false, false, true);" title="{{::\'assemblyCloseInfo\' | translate}}"><span class="material-icons">close</span></button></div><div class="testBody"><div class="testItem"><div class="testItemHeader">{{::\'environment\' | translate}}</div><div class="testItemDescription">{{::\'assemblyTestCatalogDesc\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::"environment" | translate}}</label><md-select data-ng-model="$parent.target" data-ng-change="ctrl.targetChange();"><md-option data-ng-repeat="publishTarget in publishTargets" data-ng-value="publishTarget">{{publishTarget.displayAs}}</md-option></md-select></md-input-container></div><div class="testItemRow"><md-input-container data-ng-show="$parent.gwServiceTarget"><label>{{::"datapower_gateway_cluster" | translate}}</label><md-select data-ng-model="$parent.gwServiceTarget" data-ng-change="ctrl.gwServiceChange();"><md-option data-ng-repeat="gwService in matchingGwServices" data-ng-value="gwService.name">{{gwService.name}}</md-option></md-select></md-input-container></div></div><div class="testItem" data-ng-if="secureGatewayDeploymentInfo.length > 0"><div class="testItemHeader">{{::\'secureGateway\' | translate}}</div><div class="testItem" data-ng-repeat="secureGatewayInfo in secureGatewayDeploymentInfo"><div class="testItemDescription">{{::\'assemblyTestSecureGatewayDesc\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::\'assemblyInvokeTargetURL\' | translate}}</label><input type="text" data-ng-model="secureGatewayInfo.destination" readonly="readonly"></md-input-container></div><div class="testItemRow"><md-input-container><label>{{::"secureGateway" | translate}}</label><md-select data-ng-model="secureGatewayInfo.gateway" data-ng-change="ctrl.secureGatewayDeploymentInfoChange();"><md-option data-ng-repeat="secureGateway in secureGateways" data-ng-value="secureGateway._id">{{secureGateway.desc}}</md-option></md-select></md-input-container></div></div></div><div class="testItem"><div class="testItemHeader">{{::\'realProductSingular\' | translate}}</div><div class="testItemDescription">{{::\'assemblyTestProductDesc\' | translate}}</div><div class="testItem"><div class="testItemDescription">{{::\'assemblyTestProductExisting\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::"realProductSingular" | translate}}</label><md-select data-ng-model="$parent.product" data-ng-change="ctrl.productChange();"><md-option data-ng-repeat="product in products" data-ng-value="product">{{product.info.title}} {{product.info.version}}</md-option></md-select></md-input-container></div><button style="margin: 10px; float: right" data-ng-disabled="xhrProcessing || republishingProduct || !$parent.product || needSecureGatewaySetup" data-ng-click="ctrl.republishProduct()" title="{{::\'assemblyRepublishProduct\' | translate}}">{{::\'assemblyRepublishProduct\' | translate}}</button><div class="clearBoth"></div><div class="alertNote alertNoteTopBottom" data-ng-if="!productContainsApi && $parent.product"><div>{{::\'assemblyTestProductDoesntContainApi\' | translate}}</div><button style="float: right; margin-top: 10px" data-ng-disabled="xhrProcessing || republishingProduct || !$parent.product" data-ng-click="ctrl.addApiToProduct()" title="{{::\'assemblyTestProductAddApi\' | translate}}">{{::\'assemblyTestProductAddApi\' | translate}}</button><div class="clearBoth"></div></div><div data-ng-class="{\'spinner\': !creatingProduct && republishingProduct}"></div></div><div class="testItem"><div class="testItemDescription">{{::\'assemblyTestProductCreate\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::"name" | translate}}</label><input data-ng-model="$parent.productName"></md-input-container></div><button style="margin: 10px; float: right" data-ng-disabled="xhrProcessing || creatingProduct || !$parent.productName || needSecureGatewaySetup" data-ng-click="ctrl.createAndPublishProduct()" title="{{::\'assemblyCreateProduct\' | translate}}">{{::\'assemblyCreateProduct\' | translate}}</button><div class="clearBoth"></div><div data-ng-class="{\'spinner\': creatingProduct && republishingProduct}"></div></div></div><div class="testItem" data-ng-show="!$parent.catalog.testAppEnabled"><div class="alertNote alertNoteTopBottom">{{::\'assemblyTestAppNotEnabled\' | translate}}</div></div><div class="testItem" data-ng-show="!$parent.catalog.testAppEnabled"><div class="testItemHeader">{{::\'planSingular\' | translate}}</div><div class="testItemDescription">{{::\'assemblyTestPlanDesc\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::"name" | translate}}</label><md-select data-ng-model="$parent.plan" data-ng-change="ctrl.planChange();"><md-option data-ng-repeat="(planName, plan) in $parent.product.plans" data-ng-value="planName">{{planName}}</md-option></md-select></md-input-container></div></div><div class="testItem" data-ng-show="!$parent.catalog.testAppEnabled"><div class="testItemHeader">{{::\'application\' | translate}}</div><div class="testItemDescription">{{::\'assemblyTestAppDesc\' | translate}}</div><div class="testItem"><div class="testItemDescription">{{::\'assemblyTestAppExisting\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::"application" | translate}}</label><md-select data-ng-model="$parent.application" data-ng-change="ctrl.applicationChange();"><md-option data-ng-repeat="application in applications" data-ng-value="application">{{application.name}}</md-option></md-select></md-input-container></div><button style="margin: 10px; float: right" data-ng-disabled="xhrProcessing || creatingApp || !application" data-ng-click="ctrl.subscribeApp()" title="{{::\'assemblySubscribeApp\' | translate}}">{{::\'assemblySubscribeApp\' | translate}}</button><div class="clearBoth"></div><div class="alertNote alertNoteTopBottom" data-ng-if="productNotPublished">{{::\'assemblyTestProductNotPublished\' | translate}}</div><div data-ng-class="{\'spinner\': subscribingApp}"></div></div><div class="testItem"><div class="testItemDescription">{{::\'assemblyTestAppCreate\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::"assemblyAppName" | translate}}</label><input data-ng-model="$parent.appName"></md-input-container></div><div data-ng-if="applicationCreated" class="alertNote" style="border-bottom: 1px solid #e0e0e0"><div>{{::\'assemblyAppSecret\' | translate}}</div><div style="margin-top: 10px">{{::\'clientId\' | translate}}: {{application.credentials.clientID}}</div><div style="margin-top: 10px">{{::\'clientSecret\' | translate}}: {{application.credentials.clientSecret}}</div></div><button style="margin: 10px; float: right" data-ng-disabled="xhrProcessing || creatingApp || !$parent.appName" data-ng-click="ctrl.createAndSubscribeApp()" title="{{::\'assemblyCreateAndSubscribeApp\' | translate}}">{{::\'assemblyCreateAndSubscribeApp\' | translate}}</button><div class="clearBoth"></div><div data-ng-class="{\'spinner\': creatingApp}"></div></div></div><button style="margin: 10px; float: right" data-ng-disabled="!product || !catalog || xhrProcessing" data-ng-click="ctrl.setCurrentPage(2);" title="{{::\'assemblyNext\' | translate}}">{{::\'assemblyNext\' | translate}}</button><div class="clearBoth"></div><div data-ng-class="{\'spinner\': xhrProcessing}"></div></div></div><div class="testSection" data-ng-if="currentPage == 2 && testLoaded"><div class="testHeader"><h3 class="mainTitle">{{::\'assemblyTest\' | translate}}</h3><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 8px 0px 0px" data-ng-click="setTestMode(false, false, true);" title="{{::\'assemblyCloseInfo\' | translate}}"><span class="material-icons">close</span></button></div><div class="testBody"><div class="testItem" data-ng-show="!offlineMode"><div class="testItemHeader">{{::\'assemblyTestSetup\' | translate}}</div><div class="testSetup"><div data-ng-if="!catalog.testAppEnabled">{{target.displayAs}}, {{product.info.title}} {{product.info.version}}, {{plan}}, {{application.name}}</div><div data-ng-if="catalog.testAppEnabled">{{target.displayAs}}, {{product.info.title}} {{product.info.version}}, {{\'assemblyTestUsingTestApp\' | translate}}</div><button style="float: right" data-ng-disabled="xhrProcessing || $parent.invokeRunning" data-ng-click="ctrl.setCurrentPage(1);" title="{{::\'assemblyChangeSetup\' | translate}}">{{::\'assemblyChangeSetup\' | translate}}</button> <button style="margin-right: 10px; float: right" data-ng-disabled="xhrProcessing || republishingProduct || !$parent.product || needSecureGatewaySetup" data-ng-click="ctrl.republishProduct()" title="{{::\'assemblyRepublishProduct\' | translate}}">{{::\'assemblyRepublishProduct\' | translate}}</button><div class="clearBoth"></div><div class="alertNote alertNoteTopBottom" style="margin: 10px -10px 0px -10px" data-ng-if="!offlineMode && !productContainsApi && $parent.product"><div>{{::\'assemblyTestProductDoesntContainApi\' | translate}}</div><button style="float: right; margin-top: 10px" data-ng-disabled="xhrProcessing || republishingProduct || !$parent.product" data-ng-click="ctrl.addApiToProduct()" title="{{::\'assemblyTestProductAddApi\' | translate}}">{{::\'assemblyTestProductAddApi\' | translate}}</button><div class="clearBoth"></div></div><div data-ng-class="{\'spinner\': republishingProduct}"></div></div></div><div class="alertNote" data-ng-if="apiDirty"><span>{{::\'assemblyApiUnsavedChanges\' | translate}}</span></div><div class="alertNote" data-ng-if="!apiDirty && saveSinceLastPublish"><span>{{::\'assemblyApiUnpublishedChanges\' | translate}}</span></div><div class="testItem"><div class="testItemHeader">{{::\'product_api_operation\' | translate}}</div><div class="testItemDescription">{{::\'assemblyTestChooseOperation\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::"product_api_operation" | translate}}</label><md-select data-ng-model="$parent.selectedOperation" data-ng-change="ctrl.operationChange();"><md-option data-ng-value="operation" data-ng-repeat="operation in swaggerOperations"><span data-ng-if="operation.verb">{{operation.verb}} {{operation.path}}</span> <span data-ng-if="!operation.verb">{{operation.operationId}}</span></md-option></md-select></md-input-container></div></div><div data-ng-show="operation && (swaggerDocument.schemes.length > 1)" class="testItem"><div class="testItemHeader">{{::\'scheme\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::\'scheme\' | translate}}</label><md-select data-ng-model="$parent.scheme"><md-option data-ng-repeat="scheme in swaggerDocument.schemes" data-ng-value="scheme">{{scheme}}</md-option></md-select></md-input-container></div></div><div class="testItem" data-ng-show="ctrl.config.requiresSecuritySection && ctrl.config.securityFlows.length > 1"><div class="testItemHeader">{{::\'explorer_security_flow\' | translate}}</div><div class="testItemRow"><md-select style="margin-top: 0; margin-bottom: 0" data-ng-model="$parent.securityFlow" data-ng-change="ctrl.updateConfig();" required="true" name="securityFlow"><md-option data-ng-repeat="securityFlow in ctrl.config.securityFlows" data-ng-selected="$index == 0" data-ng-value="securityFlow">{{::securityFlow.$$label}}</md-option></md-select></div><div class="hidden" data-ng-show="ctrl.config.requiresOauth"><div class="testItemHeader">{{::\'explorer_client_type\' | translate}}</div><div class="testItemRow"><md-radio-group data-ng-model="$parent.clientType" required="true" name="clientType"><md-radio-button md-no-ink class="md-primary" style="margin-bottom: 10px" value="public">{{::\'public\' | translate}}</md-radio-button><md-radio-button md-no-ink class="md-primary" value="confidential">{{::\'confidential\' | translate}}</md-radio-button></md-radio-group></div></div></div><div class="testItem" data-ng-show="operation && (ctrl.config.requiresClientId || ctrl.config.requiresClientSecret)"><div class="testItemHeader">{{::\'assemblyTestIdentification\' | translate}}</div><div class="testItemRow" data-ng-show="ctrl.config.requiresClientId"><md-input-container><label>{{::"clientId" | translate}}</label><input data-ng-model="$parent.clientId" autocomplete="off"></md-input-container></div><div class="testItemRow" data-ng-show="ctrl.config.requiresClientSecret"><md-input-container><label>{{::"clientSecret" | translate}}</label><input type="password" data-ng-model="$parent.clientSecret" autocomplete="off"></md-input-container></div></div><div class="testItem" data-ng-show="operation && (ctrl.config.requiresBasicAuth || ctrl.config.requiresOauth)"><div class="testItemHeader">{{::\'assemblyTestAuthorization\' | translate}}</div><div class="testItemDescription" data-ng-if="ctrl.config.requiresBasicAuth">{{::\'assemblyTestBasicAuth\' | translate}}</div><div class="testItemDescription" data-ng-if="ctrl.config.requiresOauth && ctrl.config.oauthFlow == \'password\'">{{::\'assemblyTestOauthPassword\' | translate}}</div><div class="testItemDescription" data-ng-if="ctrl.config.requiresOauth && ctrl.config.oauthFlow == \'application\'">{{::\'assemblyTestOauthApplication\' | translate}}</div><div class="testItemDescription" data-ng-if="ctrl.config.requiresOauth && ctrl.config.oauthFlow == \'implicit\'">{{::\'assemblyTestOauthImplicit\' | translate}}</div><div class="testItemDescription" data-ng-if="ctrl.config.requiresOauth && ctrl.config.oauthFlow == \'accessCode\'">{{::\'assemblyTestOauthAccessCode\' | translate}}</div><div class="testItemRow" data-ng-show="ctrl.config.requiresBasicAuth || (ctrl.config.requiresOauth && ctrl.config.oauthFlow == \'password\')"><md-input-container><label>{{::"assemblyTestUsername" | translate}}</label><input data-ng-model="$parent.username"></md-input-container></div><div class="testItemRow" data-ng-show="ctrl.config.requiresBasicAuth || (ctrl.config.requiresOauth && ctrl.config.oauthFlow == \'password\')"><md-input-container><label>{{::"assemblyTestPassword" | translate}}</label><input type="password" data-ng-model="$parent.password"></md-input-container></div><div class="testItemRow" data-ng-show="ctrl.config.requiresRedirectUri"><md-input-container><label>{{::\'explorer_redirect_uri\' | translate}}</label><input data-ng-model="$parent.redirectUri"></md-input-container></div><div class="testItemRow" style="display: inline-block" data-ng-show="ctrl.config.oauthScopes"><div>{{::\'explorer_scopes\' | translate}}</div><md-checkbox class="md-primary" style="margin-bottom: 0" data-ng-repeat="scope in ctrl.config.oauthScopes" data-ng-model="$parent.scopes[scope]">{{::scope}}</md-checkbox></div><div style="margin: 0px 10px 10px 10px" data-ng-show="ctrl.config.requiresOauth"><div data-ng-if="ctrl.config.requiresOauth && ctrl.config.oauthAuthUrl"><span style="font-size: 1.2em; margin-right: 10px">{{::\'api_security_oauth_authorization_url\' | translate}}:</span> <span style="word-break: break-word">{{ctrl.config.oauthAuthUrl}}</span></div><div data-ng-if="ctrl.config.requiresOauth && ctrl.config.oauthTokenUrl"><span style="font-size: 1.2em; margin-right: 10px">{{::\'api_security_oauth_token_url\' | translate}}:</span> <span style="word-break: break-word">{{ctrl.config.oauthTokenUrl}}</span></div></div><div class="testItemRow" data-ng-show="ctrl.config.oauthFlow === \'accessCode\'"><button style="margin: 18px 10px 0 0; height: 26px" class="apimAuthorize" data-ng-click="ctrl.authorize();">{{::\'explorer_authorize\' | translate}}</button><md-input-container style="flex: 1"><label>{{::\'explorer_auth_code\' | translate}}</label><input type="password" data-ng-model="$parent.authToken[\'code\']"></md-input-container></div><div class="testItemRow" data-ng-show="ctrl.config.requiresOauth"><button style="margin: 18px 10px 0 0; height: 26px" class="apimGetToken" data-ng-show="ctrl.config.oauthFlow === \'accessCode\' && $parent.authToken[\'code\']" data-ng-click="ctrl.getToken();">{{::\'explorer_get_token\' | translate}}</button> <button style="margin: 18px 10px 0 0; height: 26px" class="apimAuthorize" data-ng-show="ctrl.config.oauthFlow !== \'accessCode\'" data-ng-click="ctrl.authorize();">{{::\'explorer_authorize\' | translate}}</button><md-input-container style="flex: 1"><label>{{::\'explorer_access_token\' | translate}}</label><input type="password" data-ng-model="$parent.authToken[\'access_token\']"></md-input-container></div><div class="testItemRow" data-ng-show="$parent.authToken[\'refresh_token\']"><button style="margin: 18px 10px 0 0; height: 26px" class="apimRefreshToken" data-ng-show="ctrl.config.oauthFlow === \'accessCode\'" data-ng-click="ctrl.refreshToken();">{{::\'explorer_refresh_token\' | translate}}</button></div><div class="alertNote" data-ng-if="authError"><div style="font-size: 1.2em">{{::\'assemblyTestResponseCode\' | translate}}:{{authError.status}}</div><div data-ng-if="authError.statusText">{{authError.statusText}}</div><div data-ng-if="authError.data.error">{{authError.data.error}}</div><div data-ng-if="authError.data.error_description">{{authError.data.error_description}}</div></div></div><div data-ng-show="operation && (ctrl.config.requiresParametersSection || swaggerDocument.consumes.length > 0 || swaggerDocument.produces.length > 0)" class="testItem"><div class="testItemHeader">{{::\'parameters\' | translate}}</div><div data-ng-show="swaggerDocument.consumes.length > 0" class="testItemRow"><md-input-container><label>Content-Type</label><md-select data-ng-model="$parent.contentTypeHeader"><md-option data-ng-repeat="contentType in swaggerDocument.consumes" data-ng-selected="$index == 0" data-ng-value="contentType">{{contentType}}</md-option></md-select></md-input-container></div><div data-ng-show="swaggerDocument.produces.length > 0" class="testItemRow"><md-input-container><label>Accept</label><md-select data-ng-model="$parent.acceptHeader"><md-option data-ng-repeat="accept in swaggerDocument.produces" data-ng-selected="$index == 0" data-ng-value="accept">{{accept}}</md-option></md-select></md-input-container></div><div data-ng-repeat="parameter in ctrl.config.parameters track by parameter.$$tmpId" class="testItemRow"><apim-test-parameter style="width: 100%"></apim-test-parameter></div></div><div class="testItem" data-ng-show="operation"><div style="padding: 5px 10px" class="testItemHeader"><md-checkbox style="margin: 0px" md-no-ink aria-label="Repeat" data-ng-model="$parent.repeater.repeat" class="md-primary">{{::\'assemblyTestRepeat\' | translate}}</md-checkbox></div><div class="testItemDescription">{{::\'assemblyTestRepeatDesc\' | translate}}</div><div class="testItemRow"><md-input-container><label>{{::\'assemblyTestRepeatFor\' | translate}}</label><input data-ng-disabled="!$parent.repeater.repeat" data-ng-model="$parent.repeater.count"></md-input-container><md-checkbox data-ng-disabled="!$parent.repeater.repeat" md-no-ink aria-label="Stop on error" data-ng-model="$parent.repeater.stopOnError" class="md-primary">{{::\'assemblyTestStopOnError\' | translate}}</md-checkbox></div></div><div class="testItem" data-ng-show="operation && offlineMode"><div style="padding: 5px 10px" class="testItemHeader"><md-checkbox style="margin: 0px" md-no-ink aria-label="proxy" data-ng-model="$parent.proxy" class="md-primary">{{::\'assemblyTestProxy\' | translate}}</md-checkbox></div><div class="testItemDescription">{{::\'assemblyTestProxyDesc\' | translate}}</div></div><button style="margin: 10px 10px 10px 0px; float: right" data-ng-show="$parent.repeater.repeat" data-ng-disabled="!$parent.invokeRunning" data-ng-click="$parent.stopInvoke = true;" title="{{::\'assemblyStopInvoke\' | translate}}">{{::\'assemblyStopInvoke\' | translate}}</button> <button style="margin: 10px; float: right" data-ng-disabled="!selectedOperation" data-ng-click="ctrl.invoke();" title="{{::\'assemblyInvoke\' | translate}}">{{::\'assemblyInvoke\' | translate}}</button><div class="clearBoth"></div><div data-ng-class="{\'spinner\': invokeRunning}"></div><div data-ng-if="response.statusCode" class="testItem testItemResponse"><div class="testItemHeader">{{::\'assemblyTestResponse\' | translate}}</div><div class="testItemRow" data-ng-if="response.callCounter"><div style="flex: 1"><div style="font-size: 1.2em">{{::\'assemblyTestCallCounter\' | translate}}:</div><div>{{response.callCounter}} / {{$parent.repeater.count}}</div></div><div style="flex: 1"><div style="font-size: 1.2em">{{::\'assemblyTestTotalTime\' | translate}}:</div><div>{{response.totalTime}}ms</div></div><div style="flex: 1"><div style="font-size: 1.2em">{{::\'assemblyTestAverageTime\' | translate}}:</div><div>{{response.avgResponseTime}}ms</div></div></div><div class="testItemRow" style="display: block" data-ng-if="response.statusCode"><div style="font-size: 1.2em">{{::\'assemblyTestResponseCode\' | translate}}:</div><div>{{response.statusCode}}</div><div class="alertNote alertNoteTopBottom" style="margin: 10px -10px 0px -10px" data-ng-if="response.statusInfo">{{response.statusInfo}}</div><div class="alertNote alertNoteTopBottom" style="margin: 10px -10px 0px -10px" data-ng-if="response.statusCode == -1"><div>{{::\'explorer_check_certificate\' | translate}}</div><a style="color: #4b68fa" target="_blank" data-ng-attr-href="{{response.request.url}}">{{response.request.url}}</a></div></div><div class="testItemRow" style="display: block" data-ng-if="response.responseTime"><div style="font-size: 1.2em">{{::\'assemblyTestResponseTime\' | translate}}:</div><div>{{response.responseTime}}ms</div></div><div class="testItemRow" style="display: block" data-ng-if="response.containsHeaders"><div style="font-size: 1.2em">{{::\'assemblyTestHeaders\' | translate}}:</div><div data-ng-repeat="(name, value) in response.headers"><span>{{name}}:</span><span>{{value}}</span></div></div><div class="testItemRow" style="display: block" data-ng-if="response.responseData"><div style="font-size: 1.2em">{{::\'assemblyTestResponseBody\' | translate}}:</div><div class="hljs" hljs source="response.responseDataString"></div></div><button style="margin: 0px 10px 10px 10px; float: right" data-ng-show="response.transactionId" data-ng-click="ctrl.loadDebugData(); ctrl.setCurrentPage(3);" title="{{::\'assemblyTestDebug\' | translate}}">{{::\'assemblyTestDebug\' | translate}}</button><div class="clearBoth"></div></div></div></div><div class="testSection" data-ng-if="currentPage == 3 && testLoaded"><div class="testHeader"><h3 class="mainTitle">{{::\'assemblyTestDebug\' | translate}}</h3><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 8px 0px 0px" data-ng-click="setTestMode(false, false, true);" title="{{::\'assemblyCloseInfo\' | translate}}"><span class="material-icons">close</span></button></div><div class="testBody"><div class="alertNote alertNoteTop" data-ng-if="!loadingDebugData && !debugData">{{::\'assemblyNoDebugData\' | translate}}</div><div class="testItem" style="word-wrap: break-word" data-ng-if="!loadingDebugData && debugData.length > 1" data-ng-repeat="data in debugData"><div data-ng-if="$index > 0" data-ng-controller="AssemblyTestDebugDataController"><div class="testItemHeader" style="margin-bottom: 0px" data-ng-class="{\'selected\': selectedDebugData == data}">{{data.name}}</div><div class="hljs" hljs source="yamlValue" hljs-language="http"></div></div></div><div data-ng-class="{\'spinner\': loadingDebugData}"></div><div class="testItem"><button style="margin: 10px; float: right" data-ng-disabled="xhrProcessing || !$parent.product" data-ng-click="ctrl.setCurrentPage(2);" title="{{::\'assemblyBackToTest\' | translate}}">{{::\'assemblyBackToTest\' | translate}}</button><div class="clearBoth"></div></div></div></div></div>'),
e.put("src/html/catch.html",'<div class="catchShell"><div class="catchLabel" data-ng-click="nodeSelected($event, node)">{{::\'assemblyCatch\' | translate}}</div><div class="catchContainer" data-ng-repeat="catch in node.catch"><div class="clauseRow"><div class="clauseLabel" data-ng-class="{\'expanded\': expanded[$index]}" data-ng-click="expanded[$index] = !expanded[$index]">{{catch | catchMessage}}</div><div tabindex="0" class="catchIcon" data-ng-class="{\'searchMiss\': !conditionHasMatchedSearch(catch), \'searchHit\': conditionHasMatchedSearch(catch)}" data-ng-keydown="keyPressed($event, catch);" data-ng-click="nodeSelected($event, node)"></div><div class="dropzoneGroup" data-ui-on-drop="policyDropped($data, node, $index, -1)"><div class="ghostPolicy"></div></div><div class="inlineContainer" data-ng-repeat="node in catch.execute | transformNodeModel: policiesByType"><div class="inlineContainer"><apim-node></apim-node></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, $parent.$parent.node, $parent.$parent.$index, $index)"><div class="ghostPolicy"></div></div></div><div class="inlineContainer" data-ng-repeat="node in catch.default | transformNodeModel: policiesByType"><div class="inlineContainer"><apim-node></apim-node></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, $parent.$parent.node, $parent.$parent.$index, $index)"><div class="ghostPolicy"></div></div></div><div class="outputNode" tabindex="0"></div></div></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="clauseDropzoneGroup" data-ui-on-drop="policyDropped($data, $parent.$parent.node, -1)"><div class="catchGhost"></div></div></div>'),e.put("src/html/clause.html",'<div data-ng-class="{\'clauseShell\': node.case, \'selectedNode\': selectedNode == node, \'conditionShell\': node.condition || node.execute}"><div class="clauseContainer" data-ng-if="node.case" data-ng-repeat="case in node.case" data-ng-controller="NodeCaseController"><div class="clauseRow" data-ng-class="{\'otherwiseClause\': !!case.otherwise}"><div class="clauseRowInner" ng-class="{\'clause-row--selected\': $index === node.$$selectedBranch}"><div class="clauseLabel" data-ng-class="{\'expanded\': expanded[$index]}" data-ng-click="expanded[$index] = !expanded[$index]"><span ng-if="!isAppConnect()"><button class="clauseToggle" style="" data-ng-if="collapseNodes" data-ng-click="showContent($event);">+</button> <button class="clauseToggle" data-ng-if="!collapseNodes" data-ng-click="hideContent($event);">-</button> <span>{{case | clauseMessage}}</span> </span><span ng-if="isAppConnect()"><span ng-if="$first" translate="ifPanel.if"></span> <span ng-if="$last" translate="ifPanel.else"></span> <span ng-if="$middle" translate="ifPanel.elseIf"></span><branch-label ng-if="!case.otherwise" condition="case.condition" node="node"></branch-label></span></div><div data-ng-if="!collapseNodes"><div class="clauseIcon" data-ng-if="!case.otherwise" tabindex="0" data-ng-class="{\'searchMiss\': !conditionHasMatchedSearch(case), \'searchHit\': conditionHasMatchedSearch(case)}" data-ng-keydown="keyPressed($event, case);" data-ng-click="nodeSelected($event, node)"></div><div class="dropzoneGroupSpacer"></div><div class="dropzoneGroup" data-ng-class="{\'assembly-canvas__insert-point\': allowNewNode()}" data-ui-on-drop="policyDropped($data, node, $index, -1)"><div class="ghostPolicy" data-ng-click="ghostSelected($event, node, $index, -1)"><md-icon data-ng-if="isAppConnect() && allowNewNode()" md-svg-icon="floweditor:Plus-Light" class="assembly-canvas__plus-inner"></md-icon></div><div ng-if="isAppConnect() && allowNewNode()" class="ghostPadder"></div></div><div class="inlineContainer" data-ng-repeat="node in case.execute | transformNodeModel: policiesByType"><div class="inlineContainer"><apim-node></apim-node></div><div class="dropzoneGroupSpacer"></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="dropzoneGroup" data-ng-class="{\'assembly-canvas__insert-point\': allowNewNode()}" data-ui-on-drop="policyDropped($data, $parent.$parent.node, $parent.$parent.$index, $index)"><div class="ghostPolicy" data-ng-click="ghostSelected($event, $parent.$parent.node, $parent.$parent.$index, $index)"><md-icon data-ng-if="isAppConnect() && allowNewNode()" md-svg-icon="floweditor:Plus-Light" class="assembly-canvas__plus-inner"></md-icon></div><div ng-if="isAppConnect() && allowNewNode()" class="ghostPadder"></div></div></div><div class="inlineContainer" data-ng-repeat="node in case.otherwise | transformNodeModel: policiesByType"><div class="inlineContainer"><apim-node></apim-node></div><div class="dropzoneGroupSpacer"></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="dropzoneGroup" data-ng-class="{\'assembly-canvas__insert-point\': allowNewNode()}" data-ui-on-drop="policyDropped($data, $parent.$parent.node, $parent.$parent.$index, $index)"><div class="ghostPolicy" data-ng-click="ghostSelected($event, $parent.$parent.node, $parent.$parent.$index, $index)"><md-icon data-ng-if="isAppConnect() && allowNewNode()" md-svg-icon="floweditor:Plus-Light" class="assembly-canvas__plus-inner"></md-icon></div><div ng-if="isAppConnect() && allowNewNode()" class="ghostPadder"></div></div></div><div class="clauseRowTerminator"><div class="clause-row__map-button-wrapper"><div class="clause-row__map-button-tooltip-wrapper" ng-show="!hasOutputSchema(node)"><md-tooltip>{{"ifPanel.outputSchemaCanvasTooltip" | translate}}</md-tooltip></div><md-button ng-if="isAppConnect()" ng-click="expandBranch($event, node, $index)" ng-class="{\'clause-row__map-button--active\': $index === node.$$expandedBranch}" class="iconOnlyButton clause-row__map-button"><md-icon md-svg-icon="floweditor:output-data"></md-icon></md-button></div></div></div></div></div></div><div class="clauseContainer conditionContainer" data-ng-if="node.condition || node.execute"><div class="clauseRow"><div class="clauseRowInner"><div class="clauseLabel" data-ng-class="{\'expanded\': expanded[$index]}" data-ng-click="expanded[$index] = !expanded[$index]">{{node.condition}}</div><div class="clauseIcon" data-ng-show="node.condition" data-ng-class="{\'searchMiss\': !conditionHasMatchedSearch(node.condition), \'searchHit\': conditionHasMatchedSearch(node.condition)}" data-ng-keydown="$event.stopPropagation();" data-ng-click="$event.stopPropagation();" data-popover="{{node | clauseMessage}}" data-popover-placement="left" data-popover-trigger="focus" data-popover-animation="true"></div><div class="dropzoneGroupSpacer"></div><div class="dropzoneGroup" data-ui-on-drop="policyDropped($data, node, 0, -1)"><div class="ghostPolicy"></div></div><div class="inlineContainer" data-ng-repeat="node in node.execute | transformNodeModel: policiesByType"><div class="inlineContainer"><apim-node></apim-node></div><div class="dropzoneGroupSpacer"></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, $parent.$parent.node, 0, $index)"><div class="ghostPolicy"></div></div></div></div></div></div><span data-ng-if="node.case" class="clauseDropzoneGroup" data-ng-class="{\'clause-dropzone-group--hidden\': node.case.length > 9}" data-ui-on-drop="policyDropped($data, node, -1)"><div class="clauseGhost"></div></span></div>'),e.put("src/html/condition-builder.html","<div><apic-condition-expression></apic-condition-expression></div>"),e.put("src/html/condition-expression.html",'<span class="expression-clause operation-clause" data-ng-if="isOperation"><span class="button-panel" style="float: left"><button data-ng-if="!expanded" data-ng-click="expand(true);" class="iconOnlyButton material-icons">expand_more</button><button data-ng-if="expanded" data-ng-click="expand(false);" class="iconOnlyButton material-icons">expand_less</button> </span><span data-ng-click="expand(!expanded);">{{operationString}}</span> <span class="button-panel"><button data-ng-click="deleteExpression(expression);" class="iconOnlyButton material-icons">delete</button> </span></span><span data-ng-if="!expression.$$edit && (!isOperation || expanded)"><span data-ng-if="expression.type == \'Literal\'"><span>{{expression.raw}}</span> </span><span data-ng-if="expression.type == \'Identifier\'"><span>{{expression.name}}</span> </span><span class="expression-clause binary-expression" data-ng-if="expression.type == \'BinaryExpression\'"><apic-condition-expression-left data-ng-click="$parent.expression.$$edit = true;"></apic-condition-expression-left><span data-ng-click="$parent.expression.$$edit = true;">{{expression.operator}}</span><apic-condition-expression-right data-ng-click="$parent.expression.$$edit = true;"></apic-condition-expression-right><span class="button-panel"><button data-ng-click="insertLogicalExpression(\'||\');" class="iconOnlyButton material-icons">add_circle_outline</button><button data-ng-click="expression.$$edit = true;" class="iconOnlyButton material-icons">edit</button><button data-ng-click="deleteExpression(expression);" class="iconOnlyButton material-icons">delete</button> </span></span><span data-ng-if="expression.type == \'CallExpression\'" class="call-expression"><span>{{expression.callee.name}}(</span><span data-ng-repeat="expression in expression.arguments" class="argument"><apic-condition-expression></apic-condition-expression><span class="argument-separator">,</span> </span><span>)</span> </span><span data-ng-if="expression.type == \'MemberExpression\'"><span>{{expression.object.name}}.{{expression.property.name}}</span> </span><span class="expression-clause expression-group" data-ng-if="expression.type == \'LogicalExpression\'"><apic-condition-expression-left></apic-condition-expression-left><button class="operator" data-ng-if="expression.operator == \'&&\'" data-ng-click="changeOperator(\'||\');">AND</button><button class="operator" data-ng-if="expression.operator == \'||\'" data-ng-click="changeOperator(\'&&\');">OR</button><apic-condition-expression-right class="expression-right"></apic-condition-expression-right><div class="button-panel"><button data-ng-click="insertLogicalExpression(\'||\');" class="iconOnlyButton material-icons">add_circle_outline</button></div></span></span><span data-ng-if="expression.$$edit && (!isOperation || expanded)" class="expression-editor"><input data-ng-model="$parent.expressionString" data-ng-model-options="{debounce: 200}" style="width: 90%; margin: 8px"> <span class="button-panel"><button data-ng-click="commitExpression();" class="iconOnlyButton material-icons">done</button> </span></span>'),e.put("src/html/confirmation-dialog.html",'<md-dialog aria-labelledby="{{$id}}_bannerHeading"><md-toolbar><div class="md-toolbar-tools"><h2 id="{{$id}}_bannerHeading">{{::\'assemblyPruneModelTitle\' | translate}}</h2></div></md-toolbar><md-dialog-content style="min-width: 450px"><div class="secondaryText">{{::\'assemblyPruneModelText\' | translate}}</div><div class="secondaryText unrecognizedList"><ul><li data-ng-repeat="schema in unrecognized">{{schema}}</li></ul></div><div class="secondaryText">{{::\'assemblyPruneModel\' | translate}}</div></md-dialog-content><div class="md-actions layout-row"><button class="cancelButton" data-ng-click="cancel();">{{::\'assemblyCancel\' | translate}}</button> <button class="createButton" data-ng-click="prune();">{{::\'assemblyPrune\' | translate}}</button></div></md-dialog>'),e.put("src/html/draft-assemblies.html",'<div class="assemblies centerColumn secondaryBackground slideContainer absolutelyFabulous fullHeightMinusBanner" data-ng-controller="AssembliesController"><div class="bannerActions" style="margin-right:5px" data-ng-if="!offlineMode"><div class="dropdown" dropdown data-is-open="addAssemblyOpen"><button class="iconOnlyButton" role="button" title="{{::\'assembly_add\' | translate}}"><div class="material-icons" aria-label="{{::\'assembly_add\' | translate}}">add_circle_outline</div></button></div></div><div class="whiteBackground layout fullWidth searchBanner"><div class="displayInline itsAllRelative flex"><input style="border-top: 0" type="search" aria-label="{{::\'assemblies_search\' | translate}}" placeholder="{{::\'assemblies_search\' | translate}}" data-ng-model="query" data-ng-disabled="!assemblies.$resolved"> <button type="reset" class="iconOnlyButton" data-ng-click="query = \'\'" data-ng-show="query" title="{{::\'resetFilter\' | translate}}"><div class="closeIcon"></div></button></div></div><div class="expanded"><div class="secondaryBackground listingColumn assembliesCollection"><div class="floatRight"><pagination style="margin: 0px" data-ng-show="totalItems > pageSize" boundary-links="true" rotate="false" data-ng-change="pageChanged(currentPage)" total-items="totalItems" data-ng-model="currentPage" class="pagination-sm" previous-text="" next-text="" first-text="" last-text="" items-per-page="pageSize" max-size="3"></pagination></div><div class="clearBoth"></div><div class="tableHeaderBackground apiSelfClear"><div class="column draftAssemblyNameColumn">{{::\'assembly_title\' | translate}}</div><div class="column draftAssemblyLastModifiedColumn">{{::\'assemblyLastModified\' | translate}}</div><div class="column draftAssemblyActionsColumn"></div></div><div data-ng-class="{\'spinner\': xhrProcessing}"></div><div class="emptyCollectionMessage xlargePadding" data-ng-show="!xhrProcessing && filteredAssemblies && filteredAssemblies.length == 0">{{assemblies | noAssemblies}}</div><ul data-ng-show="!xhrProcessing && filteredAssemblies && filteredAssemblies.length > 0"><li data-ng-repeat="assembly in filteredAssemblies = (assemblies | assemblyTitleQuery: query | orderBy: [\'info.title\', \'-info.version\'])"><apim-draft-assembly></apim-draft-assembly></li></ul></div></div></div>'),e.put("src/html/draft-assembly.html",'<div class="card primaryBorder apiSelfClear" data-ng-class="{backgroundDisabled: beingDeleted}" data-ng-controller="AssemblyVersionController"><div class="dijitInline boundedText draftAssemblyNameColumn"><a class="documentNameLink" href="#/design/assemblies/{{assembly.info.name}}:{{assembly.info.version}}" data-ng-bind-html="assembly.info.title | highlight: query"></a> <span>{{assembly.info.version}}</span> <span style="margin-left: 10px" data-ng-if="assembly.file">[{{assembly.file}}]</span></div><div class="dijitInline draftAssemblyLastModifiedColumn" title="{{apiVersion.updatedAt}}">{{assembly.updatedAt | since}}</div><div class="dijitInline draftAssemblyActionsColumn"><button class="iconOnlyButton material-icons" data-ng-disabled="beingDeleted" data-ng-if="!offlineMode" title="{{::\'ttDelete\' | translate}}" data-ng-click="delete()">delete</button></div></div>'),e.put("src/html/error-dialog.html",'<div class="error-header"><svg class="error-icon"></svg> <span class="error-message">{{errorMessage}}</span> <button data-ng-if="dismissable" class="error-close-button material-icons" data-ng-click="closeDialog(true);" aria-label="Close Dialog">close</button></div><div data-ng-if="errorCode" class="error-code">{{errorCodeText}}: {{errorCode}}</div><div class="error-description">{{errorDescription}}</div><div data-ng-if="errorLinkUrl" class="error-link"><a data-ng-href="{{errorLinkUrl}}" target="_blank">{{errorLinkText}}</a></div><div class="error-buttons"><md-button data-ng-repeat="button in errorButtons" data-ng-click="runCallback(button.callbackFunction, button.keepDialogOpen)" md-no-ink="true">{{button.buttonTitle}}</md-button></div>'),e.put("src/html/execute.html",'<div class="executeShell" data-ng-if="node.execute && node.iterator"><div class="executeContainer"><div class="clauseRow"><div class="dropzoneGroup" data-ui-on-drop="policyDropped($data, node, $index, -1)"><div class="ghostPolicy"></div></div><div class="inlineContainer" data-ng-repeat="node in node.execute | transformNodeModel: policiesByType"><div class="inlineContainer"><apim-node></apim-node></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, $parent.$parent.node, $parent.$parent.$index, $index)"><div class="ghostPolicy"></div></div></div></div></div><div data-ng-if="node.case" class="clauseDropzoneGroup" data-ui-on-drop="policyDropped($data, node, -1)"><div class="clauseGhost"></div></div></div>'),e.put("src/html/expression-editor.html",'<header class="modal-header" role="banner" aria-label="{{::\'assemblyExpressionEditor\' | translate}}"><hgroup><h2 class="modal-title floatLeft">{{::\'assemblyExpressionEditor\' | translate}}</h2></hgroup><div class="clearBoth"></div></header><section class="modal-body" style="padding: 0px; min-width: 50vw"><div class="editor-wrapper ace_editor ace-atom-dark ace_dark" style="min-height: 100px" data-ng-model="expressionString" data-ng-model-options="{debounce:200}" ui-ace="{useWrapMode: true, mode: \'javascript\', theme: \'atom_dark\'}"></div></section><footer class="modal-footer" role="contentinfo" aria-label="{{\'footerSectionLabel\' | translate}}"><button class="cancelButton" data-ng-click="cancel();">{{::\'cancel\' | translate}}</button> <button class="createButton" data-ng-click="commit();">{{::\'done\' | translate}}</button></footer>'),e.put("src/html/inline-schema.html",'<header class="modal-header" role="banner" aria-label="{{::\'assembly_inline_schema\' | translate}}"><hgroup><h2 class="modal-title floatLeft">{{::\'assembly_inline_schema\' | translate}}</h2></hgroup><div class="clearBoth"></div></header><section class="modal-body inline-schema-dialog" style="padding: 0px"><md-content><md-tabs md-dynamic-height md-border-bottom md-selected="selectedTabIndex"><md-tab label="{{::\'assembly_inline_enter_yaml\' | translate}}"><div class="editor-wrapper ace_editor ace-atom-dark ace_dark" style="min-height: 300px" data-ng-model="inlineYamlSchema" ui-ace="{useWrapMode: true, mode: \'yaml\', theme: \'atom_dark\'}"></div></md-tab><md-tab label="{{::\'assembly_inline_enter_json\' | translate}}"><div class="editor-wrapper ace_editor ace-atom-dark ace_dark" style="min-height: 300px" data-ng-model="inlineJsonSchema" ui-ace="{useWrapMode: true, mode: \'json\', theme: \'atom_dark\'}"></div></md-tab><md-tab label="{{::\'assembly_inline_generate_json\' | translate}}"><div class="editor-wrapper ace_editor ace-atom-dark ace_dark" style="min-height: 300px" data-ng-model="inlineJsonObject" ui-ace="{useWrapMode: true, mode: \'json\', theme: \'atom_dark\'}"></div></md-tab><md-tab label="{{::\'assembly_inline_generate_xml\' | translate}}"><div class="editor-wrapper ace_editor ace-atom-dark ace_dark" style="min-height: 300px" data-ng-model="inlineXMLObject" ui-ace="{useWrapMode: true, mode: \'xml\', theme: \'atom_dark\'}"></div></md-tab></md-tabs></md-content></section><footer class="modal-footer" role="contentinfo" aria-label="{{\'footerSectionLabel\' | translate}}"><button class="createButton" data-ng-show="selectedTabIndex === 2 || selectedTabIndex === 3" data-ng-disabled="!validSchema" data-ng-click="generateAndShow();">{{::\'generate\' | translate}}</button> <button class="createButton" data-ng-disabled="!validSchema" data-ng-click="commit();">{{::\'done\' | translate}}</button> <button class="cancelButton" data-ng-click="cancel();">{{::\'cancel\' | translate}}</button></footer>'),e.put("src/html/logic-node.html",'<script data-ng-if="!isAppConnect()" type="text/ng-template" id="errorPopover"><div class="popoverArrow"></div>\n  <div data-ng-if="gatewayErrorMessage" class="popoverError">\n    {{gatewayErrorMessage}}\n  </div>\n  <div data-ng-if="!gatewayErrorMessage" class="popoverError">\n    {{errorMessage}}\n  </div></script><div data-drag="data" data-ui-draggable="isDraggable()" data-ng-keydown="keyPressed($event, node)" data-ng-click="nodeSelected($event, node)" data-ng-controller="NodeController as NodeController" class="policyNode logicNode subflowNode {{node.$$type}} {{node.$$classes.join(\' \')}}" data-ng-class="{\'policyWithContent\': policyWithContent, \'hover-effect\' : isHovered, \'policyGatewayMiss\': policyGatewayMiss(), \'minimized\': node.$$minimized, \'snipped\': snipping && node.$$snipped, \'isSelected\': node.$$isSelected, \'logic-node__has-branch-selected\': node.$$selectedBranch !== undefined}" ng-mouseover="highlightNode(true, $event)" ng-mouseout="highlightNode(false, $event)"><div class="outerShell"><div data-ng-if="gatewayErrorMessage && !isAppConnect()" class="errorShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0"><div class="errorIcon"></div></div><div data-ng-if="errorMessage && !gatewayErrorMessage && node.$$touched && !isAppConnect()" class="errorShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0"><div class="errorIcon"></div></div><div class="innerShell" data-ng-class="{\'searchMiss\': !hasMatchedSearch(), \'searchHit\': hasMatchedSearch()}" data-ng-attr-style="background-color: {{node.$$display.color}};"><div data-ng-if="isAppConnect()"><appc-node-decorator data-node-touched="node.$$touched" data-messages="node.$$errors" data-icon-name="exclamation"></appc-node-decorator></div><div class="iconShell iconShellBackground"><div ng-if="!isAppConnect()" class="material-icons" style="transform: rotate(-135deg)">{{node | iconForNode}}</div><div ng-if="isAppConnect()" class="logic-node__icon-container"><md-icon class="logic-node__icon" md-svg-icon="{{node | iconForNode}}"></md-icon></div></div><div class="policyName" data-ng-bind-html="node | policyDisplayName | highlight: nodeFilter"></div><div ng-if="isAppConnect() && node.$$minimized" class="logic-node__actions-count">{{countInnerActions(node)}} {{::\'ifNode.actions\' | translate}}</div><div class="nodeActionsContainer"><div class="closeShell" data-ng-show="isDraggable()"><button data-ng-if="!isAppConnect() && node.$$type !== \'throw\' && node.$$minimized" data-ng-click="minimize($event);" class="iconOnlyButton material-icons collapseNode">fullscreen</button> <button data-ng-if="!isAppConnect() && node.$$type !== \'throw\' && !node.$$minimized" data-ng-click="minimize($event);" class="iconOnlyButton material-icons collapseNode">fullscreen_exit</button> <button data-ng-if="isAppConnect() && node.$$minimized" data-ng-click="minimize($event);" class="iconOnlyButton collapseNode" title="{{::\'assembly_maximise_node_tooltip\' | translate}}" aria-label="{{::\'assembly_maximise_node_tooltip\' | translate}}"><md-icon class="node-actions-container__appc-icon" md-svg-icon="floweditor:maximize-node"></md-icon></button> <button data-ng-if="isAppConnect() && !node.$$minimized" data-ng-click="minimize($event);" class="iconOnlyButton collapseNode" title="{{::\'assembly_minimise_node_tooltip\' | translate}}" aria-label="{{::\'assembly_minimise_node_tooltip\' | translate}}"><md-icon class="node-actions-container__appc-icon" md-svg-icon="floweditor:minimize-node"></md-icon></button> <button data-ng-show="config.components" class="iconOnlyButton material-icons snipNode" title="{{::\'assemblySnipNode\' | translate}}" aria-label="{{::\'assemblySnipNode\' | translate}}" data-ng-click="snipNode(node);">content_cut</button> <button class="iconOnlyButton material-icons jumpToCode" title="{{::\'assemblyJumpToSource\' | translate}}" aria-label="{{::\'assemblyJumpToSource\' | translate}}" data-ng-click="jumpToCode(node.$$type, node.$$instance);">code</button> <button data-ng-if="!isAppConnect()" class="iconOnlyButton material-icons copyNode" title="{{::\'assembly_clone_node_tooltip\' | translate}}" aria-label="{{::\'assembly_clone_node_tooltip\' | translate}}" data-ng-click="cloneNode($event, node);">content_copy</button> <button data-ng-if="!isAppConnect()" class="iconOnlyButton material-icons deleteNode" style="margin-left: 0px" title="{{::\'assembly_delete_node_tooltip\' | translate}}" aria-label="{{::\'assembly_delete_node_tooltip\' | translate}}" data-ng-click="deleteNode($event, node);">delete</button> <button data-ng-if="isAppConnect()" class="iconOnlyButton deleteNode" title="{{::\'assembly_delete_node_tooltip\' | translate}}" aria-label="{{::\'assembly_delete_node_tooltip\' | translate}}" data-ng-click="deleteNode($event, node);"><md-icon class="node-actions-container__appc-icon" md-svg-icon="floweditor:delete"></md-icon></button></div></div><div data-ng-if="operationFilter && node.$$operations" class="operationCountShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0">{{node.$$operations}}</div></div><div class="catchShellContainer" data-ng-if="showCatches && node.catch && !node.$$minimized" data-ng-class="{\'emptyClause\': isClauseEmpty()}"><div data-ng-include="\'src/html/catch.html\'"></div></div><div data-ng-if="!node.$$minimized" class="clauseShellContainer" data-ng-class="{\'emptyClause\': isClauseEmpty()}"><div data-ng-include="\'src/html/clause.html\'"></div></div></div></div><div data-ng-if="node.type == \'response\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, node, $index)"></div><div data-ng-if="node.type == \'response\'" class="outputNode"></div>'),e.put("src/html/navigation-bar.html",'<div class="searchContainer"><span data-ng-show="!testMode && !isAppConnect()" class="searchSectionBorder searchSectionSlim"><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 0px 0px 0px" data-ng-click="hidePalette = !hidePalette" title="{{::\'assemblyShowPalette\' | translate}}"><span data-ng-class="{\'rotate180\': hidePalette}" class="material-icons transition200">navigate_before</span></button> </span><span data-ng-show="config.test && !testMode" class="searchSectionBorder searchSectionSlim"><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 0px 0px 0px" data-ng-click="testMode = true;" title="{{::\'assemblyTest\' | translate}}"><span class="material-icons">play_arrow</span></button></span><div class="searchSectionBorder" flex><div data-ng-class="{focused: searchBoxFocused}" class="searchBoxContainer"><button data-ng-show="!nodeFilter" class="iconOnlyButton searchIcon"></button> <button data-ng-show="nodeFilter" data-ng-click="nodeFilter = \'\'" class="iconOnlyButton clearIcon material-icons">close</button> <input style="border-bottom: none" class="searchBox" data-ng-focus="searchBoxFocused = true" data-ng-blur="searchBoxFocused = false" data-ng-change="nodeFiltered();" data-ng-model="nodeFilter" type="text" spellcheck="false" title="{{\'search\' | translate}}" placeholder="{{\'search\' | translate}}"></div></div><span data-ng-if="nodeFilter" class="searchResults searchSectionBorder searchSection"><span class="ui-match">{{searchCount}} {{hitString}}</span><div class="searchButtonContainer" data-ng-show="searchCount"><button class="iconOnlyButton material-icons" style="font-size: 16px; padding: 5px 0px" data-ng-click="searchBack();" title="{{::\'assemblyPrevious\' | translate}}">navigate_before</button> <button class="iconOnlyButton material-icons" style="font-size: 16px; padding: 5px 0px" data-ng-click="searchForward();" title="{{::\'assemblyNext\' | translate}}">navigate_next</button></div></span><span class="searchSectionBorder searchSection operationFilter" data-ng-show="!testMode && !config.hideOperationsFilter"><md-select placeholder="{{::\'assemblyFilterOperations\' | translate}}" class="displayInline alignTop" style="margin: 5px 0px 0px 0px; font-size: 1.2em" data-ng-if="showOperationFilter" data-ng-model="$parent.operationFilter"><md-option data-ng-value="operation" data-ng-repeat="operation in swaggerOperations"><span data-ng-if="!operation.verb">{{operation.operationId}}</span> <span data-ng-if="operation.verb">{{operation.verb}} {{operation.path}}</span></md-option></md-select><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 0px 0px 0px" data-ng-show="!showOperationFilter" data-ng-click="showOperationFilter = !showOperationFilter" title="{{::\'assemblyFilterOperationsLabel\' | translate}}"><span class="material-icons">filter_list</span></button> <button class="iconOnlyButton" style="font-size: 16px; padding: 8px 0px 0px 0px" data-ng-show="showOperationFilter" data-ng-click="operationFilter = null; showOperationFilter = false;" title="{{::\'assemblyClearFilterOperationsLabel\' | translate}}"><span class="material-icons">close</span></button> </span><span class="searchSectionBorder searchSection catchSwitch"><md-switch ng-model="showCatches" md-no-ink aria-label="{{::\'assemblyShowCatches\' | translate}}" class="assemblyCatchSwitch md-block">{{::\'assemblyShowCatches\' | translate}}</md-switch></span><span class="searchSectionBorder searchSection"><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 0px 0px 0px" data-ng-click="fitToScreen();" title="{{::\'assemblyFitToScreen\' | translate}}"><span class="material-icons">gps_fixed</span></button> </span><span class="searchSectionBorder searchSection" data-ng-if="allowReferences"><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 0px 0px 0px" data-ng-show="!snipping" data-ng-click="toggleSnipMode();" title="{{::\'assemblySnip\' | translate}}"><span class="material-icons">content_cut</span></button> <span style="margin-right: 10px" data-ng-if="snipping"><apic-component-mover data-reference-source="snippedAssembly" data-reference-scope="assemblies" empty-message="snippedAssemblyEmpty()"></apic-component-mover></span><button class="iconOnlyButton" style="font-size: 16px; padding: 8px 0px 0px 0px" data-ng-show="snipping" data-ng-click="toggleSnipMode();" title="{{::\'close\' | translate}}"><span class="material-icons">close</span></button> </span><span class="sliderSection searchSection"><button class="iconOnlyButton displayInline material-icons" data-ng-click="zoomOut();" style="padding-top: 8px" title="{{::\'assemblyZoomOut\' | translate}}">remove</button><md-slider class="assemblySlider displayInline" aria-label="{{::\'assemblyZoomLabel\' | translate}}" md-discrete data-ng-model="scaleFactor" step="0.05" min="0.1" max="1.5"></md-slider><button class="iconOnlyButton displayInline material-icons" data-ng-click="zoomIn();" style="padding-top: 8px" title="{{::\'assemblyZoomIn\' | translate}}">add</button></span></div>'),e.put("src/html/node-group.html",'<div class="nodeGroup" data-ng-repeat="node in nodes | transformNodeModel: policiesByType: operationFilter: operationMap: true"><div class="inlineContainer"><apim-node></apim-node></div><div class="dropzoneGroup" data-ui-on-drop="policyDropped($data, null, $index)" data-ng-class="{\'assembly-canvas__insert-point\': allowNewNode(), \'dropzoneGroupApi\': config.assemblyType === \'api\'}"><div class="ghostPolicy" data-ng-class="{\'js-assembly-canvas__animation-target\': isFlowSlim()}" data-ng-click="ghostSelected($event, null, $index)"><md-icon data-ng-if="isAppConnect() && allowNewNode()" md-svg-icon="floweditor:Plus-Light" class="assembly-canvas__plus-inner"></md-icon></div><div ng-if="isAppConnect() && allowNewNode()" class="ghostPadder"></div></div></div>'),e.put("src/html/node.html",'<div class="nodeWrapper" data-ng-if="node.$$application" data-ng-include src="\'/app/nodeTemplates/application-node.html\'"></div><div class="nodeWrapper" data-ng-if="node.$$logic" data-ng-include src="\'src/html/logic-node.html\'"></div><div class="nodeWrapper" data-ng-if="!node.$$logic && !node.$$application && !node.$$subflow" data-ng-include src="\'src/html/policy-node.html\'"></div><div class="nodeWrapper" data-ng-if="node.$$subflow" data-ng-include src="\'src/html/subflow-node.html\'"></div>'),e.put("src/html/policy-list.html",'<div class="policyList stretch" data-ng-show="!hidePalette && !testMode"><div class="searchContainer"><div class="filterBoxContainer displayInline" data-ng-class="{\'makeSpaceForGateways\': config.gateways}"><div data-ng-class="{focused: filterBoxFocused}" class="filterBoxFocus" flex><button data-ng-show="!policyFilter" class="iconOnlyButton searchIcon"></button> <button data-ng-show="policyFilter" data-ng-click="policyFilter = \'\'" class="iconOnlyButton clearIcon material-icons">close</button> <input class="filterBox" data-ng-focus="filterBoxFocused = true" data-ng-blur="filterBoxFocused = false" data-ng-change="nodeFiltered();" data-ng-model="policyFilter" type="text" spellcheck="false" title="{{\'Filter\' | translate}}" placeholder="{{\'Filter\' | translate}}"></div></div><div class="displayInline alignTop policyFilterIcon" data-ng-show="config.gateways"><button class="iconOnlyButton material-icons" style="font-size: 16px; padding: 6px 6px 0px 7px" data-ng-click="showPolicyFilter = !showPolicyFilter" title="{{::\'assembly_filter_policies\' | translate}}">filter_list</button></div></div><ul class="policyGateways" data-ng-show="config.gateways && showPolicyFilter"><md-radio-group data-ng-model="$gateway" data-ng-model-options="{getterSetter: true}"><md-radio-button value="micro-gateway" class="md-primary">{{::\'assembly_policies_filter_micro\' | translate}}</md-radio-button><md-radio-button value="datapower-gateway" class="md-primary">{{::\'assembly_policies_filter_dp\' | translate}}</md-radio-button></md-radio-group></ul><ul class="simpleList policyInner" data-ng-class="{\'gatewaysShown\': config.gateways && showPolicyFilter}"><div class="policyCategoryGroup" data-ng-repeat="(category, policies) in filteredCategories"><li class="policyCategoryHeader" data-ng-click="closeCategory($event, category);"><span>{{::category}}</span> <button class="iconOnlyButton minimizeButton"><span class="material-icons" data-ng-class="{\'rotate180\': collapsedCategories[category]}">keyboard_arrow_up</span></button></li><div class="policyCategoryContents" data-ng-show="!collapsedCategories[category]"><li data-ng-repeat="policy in policies | orderBy: \'info.title\'"><apim-assembly-policy></apim-assembly-policy></li></div></div></ul></div>'),
e.put("src/html/policy-node.html",'<script type="text/ng-template" id="errorPopover"><div class="popoverArrow"></div>\n<div data-ng-if="gatewayErrorMessage" class="popoverError">\n  {{gatewayErrorMessage}}\n</div>\n<div data-ng-if="!gatewayErrorMessage" class="popoverError">\n  {{errorMessage}}\n</div></script><div data-ng-controller="NodeController as NodeController" class="policyNode {{node.$$type}} {{node.$$classes.join(\' \')}}" data-ng-class="{\n    \'policyWithContent\': policyWithContent(),\n    \'policyGatewayMiss\': policyGatewayMiss(),\n    \'snipped\': snipping && node.$$snipped\n  }"><div class="outerShell"><div data-ng-if="gatewayErrorMessage" class="errorShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0"><div class="errorIcon"></div></div><div data-ng-if="errorMessage && !gatewayErrorMessage && node.$$touched" class="errorShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0"><div class="errorIcon"></div></div><div tabindex="0" data-drag="data" data-ui-draggable="isDraggable()" class="innerShell" data-ng-click="nodeSelected($event, node)" data-ng-keydown="keyPressed($event, node)" data-ng-class="{\n        \'searchMiss\' : !hasMatchedSearch(),\n        \'searchHit\'  : hasMatchedSearch(),\n        \'isSelected\' : node.$$isSelected\n      }"><div class="nodeHeader"><div class="iconShell material-icons" data-ng-attr-style="background-color: {{node.$$display.color}};">{{node | iconForNode}}</div><div class="policyName" data-ng-bind-html="node | policyDisplayName | highlight: nodeFilter" ng-attr-title="{{node | policyDisplayName}}"></div></div><div class="nodeActionsContainer"><div class="closeShell"><button class="iconOnlyButton material-icons jumpToCode" title="{{::\'assemblyJumpToSource\' | translate}}" aria-label="{{::\'assemblyJumpToSource\' | translate}}" data-ng-click="jumpToCode(node.$$type, node.$$instance);">code</button> <button class="iconOnlyButton material-icons copyNode" title="{{::\'assembly_clone_node_tooltip\' | translate}}" aria-label="{{::\'assembly_clone_node_tooltip\' | translate}}" data-ng-click="cloneNode($event, node);">content_copy</button> <button class="iconOnlyButton material-icons deleteNode" style="margin-left: 0px" title="{{::\'assembly_delete_node_tooltip\' | translate}}" aria-label="{{::\'assembly_delete_node_tooltip\' | translate}}" data-ng-click="deleteNode($event, node);">delete</button></div></div><div data-ng-if="operationFilter && node.$$operations" class="operationCountShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0">{{node.$$operations}}</div></div><div class="catchShellContainer" data-ng-if="showCatches && node.catch" data-ng-class="{\'emptyClause\': isClauseEmpty()}"><div data-ng-include="\'src/html/catch.html\'"></div></div><div class="clauseShellContainer" data-ng-class="{\'emptyClause\': isClauseEmpty()}"><div data-ng-include="\'src/html/clause.html\'"></div></div></div></div><div data-ng-if="node.type == \'response\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, node, $index)"></div><div data-ng-if="node.type == \'response\'" class="outputNode"></div>'),e.put("src/html/policy.html",'<div class="policy {{::policy.info.name}} {{::policy.classes.join(\' \')}}" tabindex="0" data-drag="policy" data-ui-draggable="isDraggable()" title="{{::policy.info.title}}"><div class="policyHeader" data-ng-class="{\'expanded\': showPolicyInfo && policy.info.description}"><div class="iconShell" data-ng-attr-style="background-color: {{policy.info.display.color}};"><div data-ng-class="{\'material-icons\': (policy | iconForNode)}" class="iconInnerShell">{{::policy | iconForNode}}</div></div><span class="policyName boundedText" data-ng-bind-html="policy.info.title || policy.info.name | highlight: policyFilter" data-ng-attr-title="{{policy.info.title || policy.info.name}}"></span> <span data-ng-if="policy.custom" class="policyVersion">{{::policy.info.version}}</span> <button class="iconOnlyButton policyInfoButton material-icons" data-ng-if="policy.info.description" data-ng-click="$parent.showPolicyInfo = !$parent.showPolicyInfo">info</button></div><div data-ng-if="showPolicyInfo && policy.info.description" style="margin-top: 10px; padding: 3px" marked="policy.info.description"></div></div>'),e.put("src/html/sidenav.html",'<md-sidenav md-component-id="assembly-info" data-ng-class="{\n    \'pinned\': assemblyInfoPinned,\n    \'maximized\': assemblyInfoMaximized,\n    \'doubleWidth\': selectedNode.$$type === \'map\'\n  }" md-is-locked-open="assemblyInfoPinned" data-ng-keydown="keyDown($event)" class="assemblyInfoSection md-sidenav-right"><div class="assemblyInfo"><div class="infoView {{selectedNode.$$type}} {{selectedNode.selectedApplication.name}} {{selectedNode.$$classes.join(\' \')}}" data-ng-if="selectedNode" data-ng-controller="AssemblerInfoController"><div ng-if="!isFlowSlim()" class="header" layout="row" layout-align="center center"><div data-ng-if="!isAppConnect()" data-ng-class="{\'material-icons\': (selectedNode | iconForNode)}" class="iconShell" ng-attr-style="background-color: {{selectedNode.$$display.color}}"><div class="iconInnerShell">{{selectedNode | iconForNode}}</div></div><div class="assembly-info__content-container" flex layout="row" layout-align="start center"><div ng-if="isAppConnect()" class="iconShell" data-ng-class="{\'node--has-application\': selectedNode.selectedApplication && selectedNode.selectedApplication.name}"><md-icon class="iconInnerShell" md-svg-icon="{{selectedNode | iconForNode}}"></md-icon></div><div class="assembly-info__node-info" layout="column" flex layout-align="center start"><span class="policyName boundedText">{{selectedNode | policyDisplayName}}</span> <span class="assembly-info__account-name" ng-if="selectedNode.accountName && isAppConnect()">{{selectedNode.accountName}}</span></div></div><div class="assembly-info__control-buttons" layout="row" layout-align="end center"><button class="iconOnlyButton material-icons togglePanelPosition" data-ng-click="toggleInfoPanelBottom($event);" title="{{::\'assembly-move-panel\' | translate}}" aria-label="{{::\'assembly-move-panel\' | translate}}">screen_rotation</button> <button class="iconOnlyButton material-icons jumpToCode" data-ng-show="!selectedNode.$$readOnly && !selectedNode.$$parentReadOnly" data-ng-click="jumpToCode(selectedNode.$$type, selectedNode.$$instance);" title="{{::\'assemblyJumpToSource\' | translate}}" aria-label="{{::\'assemblyJumpToSource\' | translate}}">code</button> <button class="iconOnlyButton material-icons maximizeInfo" data-ng-click="maximizeAssemblyInfo($event);" title="{{::\'assemblyMaximize\' | translate}}" aria-label="{{::\'assemblyMaximize\' | translate}}">{{assemblyInfoMaximized | assemblyInfoMaximizeLabel}}</button> <button class="iconOnlyButton material-icons closeInfo" data-ng-click="closeInfo($event);" title="{{::\'assemblyCloseInfo\' | translate}}" aria-label="{{::\'assemblyCloseInfo\' | translate}}">close</button></div></div><div data-ng-include src="scope.config.html + getPolicyPartial(selectedNode.$$type, selectedNode.version)" class="policyPartial"></div></div></div></md-sidenav>'),e.put("src/html/subflow-node.html",'<script type="text/ng-template" id="errorPopover"><div class="popoverArrow"></div>\n<div data-ng-if="gatewayErrorMessage" class="popoverError">\n  {{gatewayErrorMessage}}\n</div>\n<div data-ng-if="!gatewayErrorMessage" class="popoverError">\n  {{errorMessage}}\n</div></script><div data-ng-controller="NodeController as NodeController" class="policyNode subflowNode referenceNode {{node.$$type}} {{node.$$classes.join(\' \')}}" data-ng-init="node.$$minimized = true;" data-ng-class="{\'policyWithContent\': policyWithContent(), \'policyGatewayMiss\': policyGatewayMiss(), \'minimized\': node.$$minimized, \'snipped\': snipping && node.$$snipped}"><div class="outerShell"><div data-ng-if="gatewayErrorMessage" class="errorShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0"><div class="errorIcon"></div></div><div data-ng-if="errorMessage && !gatewayErrorMessage && node.$$touched" class="errorShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0"><div class="errorIcon"></div></div><div data-drag="data" data-ui-draggable="isDraggable()" class="innerShell" data-ng-click="nodeSelected($event, node)" data-ng-keydown="keyPressed($event, node)" data-ng-class="{\'searchMiss\': !hasMatchedSearch(), \'searchHit\': hasMatchedSearch()}"><div class="iconShell material-icons">{{node | iconForNode}}</div><div class="policyName" data-ng-bind-html="node | policyDisplayName | highlight: nodeFilter"></div><div class="nodeActionsContainer"><div class="closeShell"><button data-ng-if="node.$$type !== \'throw\' && node.$$minimized" data-ng-click="minimize($event);" class="iconOnlyButton material-icons collapseNode">fullscreen</button> <button data-ng-if="node.$$type !== \'throw\' && !node.$$minimized" data-ng-click="minimize($event);" class="iconOnlyButton material-icons collapseNode">fullscreen_exit</button> <button class="iconOnlyButton material-icons jumpToCode" title="{{::\'assemblyJumpToSource\' | translate}}" aria-label="{{::\'assemblyJumpToSource\' | translate}}" data-ng-click="jumpToCode(node.$$type, node.$$instance);">code</button> <button class="iconOnlyButton material-icons copyNode" title="{{::\'assembly_clone_node_tooltip\' | translate}}" aria-label="{{::\'assembly_clone_node_tooltip\' | translate}}" data-ng-click="cloneNode($event, node);">content_copy</button> <button class="iconOnlyButton material-icons deleteNode" style="margin-left: 0px" title="{{::\'assembly_delete_node_tooltip\' | translate}}" aria-label="{{::\'assembly_delete_node_tooltip\' | translate}}" data-ng-click="deleteNode($event, node);">delete</button></div></div><div data-ng-if="operationFilter && node.$$operations" class="operationCountShell" ns-popover ns-popover-template="errorPopover" ns-popover-trigger="mouseenter" ns-popover-placement="bottom|center" ns-popover-timeout="0">{{node.$$operations}}</div></div><div class="clauseShellContainer" data-ng-if="!node.$$minimized" data-ng-class="{\'emptyClause\': isClauseEmpty()}"><div data-ng-include="\'src/html/clause.html\'"></div></div><div class="catchShellContainer" data-ng-if="showCatches && node.catch && !node.$$minimized" data-ng-class="{\'emptyClause\': isClauseEmpty()}"><div data-ng-include="\'src/html/catch.html\'"></div></div><div data-ng-if="false"><div class="dropzoneGroupSpacer"></div><div class="dropzoneGroup" data-ui-on-drop="policyDropped($data, node, $index, -1)"><div class="ghostPolicy"></div></div><div class="inlineContainer" data-ng-repeat="node in node.execute | transformNodeModel: policiesByType"><div class="inlineContainer"><apim-node></apim-node></div><div class="dropzoneGroupSpacer"></div><div data-ng-if="node.type !== \'response\' && node.type !== \'throw\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, $parent.$parent.node, $parent.$parent.$index, $index)"><div class="ghostPolicy"></div></div></div><div class="catchShellContainer" data-ng-if="showCatches && node.catch" data-ng-class="{\'emptyClause\': isClauseEmpty()}"><div data-ng-include="\'src/html/catch.html\'"></div></div></div></div></div><div data-ng-if="node.type == \'response\'" class="dropzoneGroup" data-ui-on-drop="policyDropped($data, node, $index)"></div><div data-ng-if="node.type == \'response\'" class="outputNode"></div>'),e.put("src/html/target-connector.html",'<md-dialog aria-labelledby="{{$id}}_bannerHeading"><md-toolbar><div class="md-toolbar-tools"><h2 id="{{$id}}_bannerHeading">{{::\'assemblerMapperConfigureTarget\' | translate}}</h2></div></md-toolbar><md-dialog-content style="min-width: 900px"><div data-ng-show="sources" style="margin: 10px 0px"><div class="displayInline alignTop">{{::\'assemblerMapperMappedFrom\' | translate}}</div><div class="displayInline alignTop" style="font-weight: bold; margin: 0px 30px"><div data-ng-repeat="from in sources"><button style="margin: -5px 10px 0 0; vertical-align: middle" class="iconOnlyButton material-icons" data-ng-click="removeMapping(from);" title="{{::\'assemblyRemoveMappingTitle\' | translate}}">delete</button> <span>{{from}}</span></div></div></div><div data-ng-show="foreach && iterators.length > 0" style="margin: 10px 0px"><div class="secondaryText">{{::\'assemblerMapperIterateOutput\' | translate}}</div><div data-ng-repeat="(target, source) in foreach" style="margin-top: 5px"><span>{{\'assemblerMapperOutputArray\' | translate}}: </span><span style="font-weight: bold">{{target}}</span><span style="margin-right: 10px">, {{\'assemblerMapperInputArray\' | translate}}:</span><md-input-container style="margin-top: -7px; font-weight: bold"><md-select data-ng-model="foreach[target]"><md-option data-ng-repeat="iterator in iterators" value="{{iterator}}">{{iterator}}</md-option></md-select></md-input-container></div></div><div data-ng-show="mergeable" style="margin: 10px 0px"><md-checkbox md-no-ink data-ng-model="merge" class="md-primary">{{::\'assemblyMapperMergeMatchingRules\' | translate}}</md-checkbox><button class="material-icons iconOnlyButton alignMiddle infoIcon" data-ng-click="showTooltip = !showTooltip;" data-tooltip-is-open="showTooltip" data-tooltip="{{::\'assemblyMapperMergeMatchingRulesDescription\' | translate}}" data-tooltip-placement="right">info_outline</button></div><label data-ng-show="true">{{::\'assemblerMapperValue\' | translate}}</label><div data-ng-show="true" class="editor-wrapper ace_editor ace-atom-dark ace_dark" style="font-size: 1.0em; min-height: 10.0em" data-ng-model="value" ui-ace="{useWrapMode: true, mode: \'javascript\', theme: \'atom_dark\', require: [\'ace/ext/language_tools\'], advanced: {enableBasicAutocompletion: true, enableLiveAutocompletion: true}, onLoad: aceLoaded}"></div><md-input-container data-ng-show="!emptyString" ng-switch on="valueType" style="width: 100%"><label>{{::"assemblerMapperDefault" | translate}}</label><input ng-switch-when="integer|number" ng-switch-when-separator="|" type="number" data-ng-model="$parent.default"><input ng-switch-default data-ng-model="$parent.default"></md-input-container><div class="secondaryText">{{::\'assemblerMapperDefaultDescription\' | translate}}</div><br><md-checkbox md-no-ink data-ng-model="emptyString" data-ng-show="valueType===\'string\'" class="md-primary">{{::\'assemblerMapperEmptyString\' | translate}}</md-checkbox></md-dialog-content><div class="md-actions layout-row"><button class="cancelButton" data-ng-click="cancel();">{{::\'cancel\' | translate}}</button> <button class="createButton" data-ng-click="deleteMapping();">{{::\'delete\' | translate}}</button> <button class="createButton" data-ng-click="updateModel();">{{::\'ok\' | translate}}</button></div></md-dialog>'),e.put("src/html/template.html",'<div class="template {{::template.info.name}}" tabindex="0" data-drag="template" data-ui-draggable="isDraggable()" title="{{::template.info.name}}" data-ng-show="showPolicy(template.info.name, template);"><div class="policyHeader" data-ng-class="{\'expanded\': showPolicyInfo && template.info.description}"><span class="iconShell material-icons" data-ng-attr-style="background-color: {{template.info.display.color}};">{{::template | iconForNode}}</span> <span class="policyName boundedText" data-ng-bind-html="template.info.name | highlight: policyFilter">{{::template.name}}</span> <span data-ng-if="template.custom" class="policyVersion">{{::template.info.version}}</span> <button class="iconOnlyButton policyInfoButton material-icons" data-ng-if="template.info.description" data-ng-click="$parent.showPolicyInfo = !$parent.showPolicyInfo">info</button></div><div data-ng-if="showPolicyInfo && template.info.description" style="margin-top: 10px; padding: 3px" marked="template.info.description"></div></div>'),e.put("src/html/test-parameter.html",'<div data-ng-controller="AssemblerTestParameterController as paramCtrl"><div data-ng-if="parameter.description">{{parameter.description}}</div><div><md-input-container data-ng-if="parameter.in !== \'body\' && parameter.type !== \'boolean\'" style="width: 100%"><label>{{parameter.name}}</label><input data-ng-model="parameterValues[parameter.name]" data-ng-required="parameter.required"></md-input-container><md-input-container data-ng-if="parameter.in === \'body\'" style="width: 100%"><label>{{parameter.name}}</label><textarea data-ng-model="parameterValues[parameter.name]" data-ng-required="parameter.required"></textarea></md-input-container><md-checkbox style="margin: 10px 0" class="md-primary" data-ng-if="parameter.type === \'boolean\' && !!parameter.required" data-ng-model="parameterValues[parameter.name]" data-ng-init="parameterValues[parameter.name] = false">{{parameter.name}}</md-checkbox><md-input-container data-ng-if="parameter.type === \'boolean\' && !parameter.required" data-ng-model="parameterValues[parameter.name]"><label>{{parameter.name}}</label><md-select data-ng-model="parameterValues[parameter.name]"><md-option data-ng-value="true">true</md-option><md-option data-ng-value="false">false</md-option><md-option data-ng-value="omit">{{::\'explorer_dont_send\' | translate}}</md-option></md-select></md-input-container><div><div><a data-ng-if="parameter.schema" data-ng-click="$parent.showSchema = !$parent.showSchema">{{::\'assemblyShowSchema\' | translate}}</a> <span data-ng-if="parameter.schema">| </span><a data-ng-show="canGenerate" data-ng-click="paramCtrl.generateExample()">{{::\'assemblyGenerateData\' | translate}}</a></div><json-schema-view data-ng-if="showSchema" data-ng-attr-schema="schema" open="2" data-ng-attr-definitions="$parent.swaggerDocument.definitions"></json-schema-view></div></div></div>'),e.put("src/html/warning-dialog.html",'<div class="warning-content"><svg class="warning-icon"></svg> <span class="warning-message">{{warningMessage}}</span> <span class="warning-buttons"><md-button data-ng-repeat="button in warningButtons" data-ng-click="runCallback(button.callbackFunction, button.keepDialogOpen)" md-no-ink="true">{{button.buttonTitle}}</md-button></span></div>'),e.put("src/html/policies/catch.html",'<div data-ng-if="showCatches" data-ng-controller="CatchController as catchCtrl" class="infoSection"><fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly"><div class="catchCase" data-ng-repeat="catch in selectedNode.catch" data-ng-controller="CatchBlockController as catchBlockCtrl"><span><div><span class="catchIcon"></span> <span data-ng-if="!catch.default" style="margin-right: 10px; line-height: 49px; font-size: 1.2em; min-width: 70px">{{::\'assemblyCatch\' | translate}} {{$index}}</span> <span data-ng-if="catch.default" style="margin-right: 10px; line-height: 49px; font-size: 1.2em; min-width: 70px; flex: 1">{{::\'policies_default\' | translate}}</span></div><div><button style="margin: 0px" data-ng-if="catchCtrl.canMoveUp($index);" class="iconOnlyButton material-icons" data-ng-click="catchCtrl.moveUp($index)" title="{{::\'assemblyMoveUp\' | translate}}">arrow_upward</button> <button style="margin: 0px" data-ng-if="catchCtrl.canMoveDown($index);" class="iconOnlyButton material-icons" data-ng-click="catchCtrl.moveDown($index)" title="{{::\'assemblyMoveDown\' | translate}}">arrow_downward</button> <button style="margin: 0px" class="iconOnlyButton material-icons" data-ng-click="catchCtrl.removeCatch($index)" title="{{::\'assemblyRemoveCatch\' | translate}}">delete</button></div></span><span class="catchContent"><md-chips data-ng-if="!catch.default" data-ng-model="catch.errors" md-autocomplete-snap md-require-match="false"><md-autocomplete md-min-length="0" md-search-text="catchBlockCtrl.searchText" md-no-cache="true" md-items="error in catchBlockCtrl.filter()" placeholder="{{::\'assemblySearchErrors\' | translate}}"><md-item-template><span md-highlight-text="catchBlockCtrl.searchText">{{error}}</span></md-item-template></md-autocomplete><md-chip-template><span>{{$chip}}</span></md-chip-template></md-chips></span></div><button style="margin: 10px" class="floatLeft" data-ng-click="catchCtrl.addCatch()" title="{{::\'assemblyAddCatchTitle\' | translate}}">{{::\'assemblyAddCatch\' | translate}}</button> <button style="margin: 10px" class="floatLeft" data-ng-show="!catchCtrl.hasDefault();" data-ng-click="catchCtrl.addCatchDefault()" title="{{::\'assemblyAddCatchDefaultTitle\' | translate}}">{{::\'assemblyAddCatchDefault\' | translate}}</button><div class="clearBoth"></div></fieldset></div>'),e.put("src/html/policies/generator.html",'<div class="infoSection"><fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly"><div data-ng-show="!schema" style="padding: 10px">{{::\'assembly_empty_schema\' | translate}}</div><div class="property_form" data-ng-show="schema"><form class="json-schema-form" schema-form="schema" data-ng-model="model" data-ng-change="formChanged(model);"></form></div></fieldset></div>'),e.put("src/html/policies/if.html",'<div data-ng-controller="ValidationDefinitionController as ctrl" class="infoSection"><fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly"><div><md-input-container><label>{{::"assemblyTitle" | translate}}</label><input data-ng-model="selectedNode.title" data-ng-model-options="{debounce:200}"></md-input-container><md-input-container><label>{{::"assemblyDescription" | translate}}</label><textarea data-ng-model="selectedNode.description" data-ng-model-options="{debounce:200}"></textarea></md-input-container><label>{{::"assemblyCondition" | translate}}</label><div class="editor-wrapper ace_editor ace-atom-dark ace_dark" style="min-height: 300px; margin: 10px" data-ng-model="selectedNode.condition" ui-ace="{useWrapMode: true, mode: \'javascript\', theme: \'atom_dark\', require: [\'ace/ext/language_tools\'], advanced: {enableBasicAutocompletion: true, enableLiveAutocompletion: true}}"></div></div></fieldset></div>'),e.put("src/html/policies/mapper.html",'<div data-ng-controller="MapperController as mapperController"><fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly"><div data-ng-if="mapperController.currentPage == \'map\'"><div class="mapper-container"><div class="mapper-inputs"><div class="mapper-header">{{::\'assemblyMapSource\' | translate}} <button class="mapperEditIcon iconOnlyButton floatRight material-icons" data-ng-click="mapperController.currentPage = \'inputs\';" title="{{::\'assemblyEditInputs\' | translate}}" aria-label="{{::\'assemblyEditInputs\' | translate}}">edit</button></div><div class="mapper-inputs-container"><div data-ng-repeat="inputSchema in $parent.inputSchemas" class="schema-block"><apic-mapper-schema class="mapper-input-schema" data-ng-attr-schema="inputSchema" data-editable="!map.readOnly" data-references="references" open="5" data-ng-attr-definitions="swaggerDocument"></apic-mapper-schema><div class="clearBoth"></div></div></div></div><div class="mapper-transformation"><div class="mapper-header"><button class="mapperEditIcon iconOnlyButton material-icons" style="float: left" data-ng-click="mapperController.currentPage = \'options\';" title="{{::\'assemblerMapperConfigure\' | translate}}" aria-label="{{::\'assemblerMapperConfigure\' | translate}}">settings</button> <span>{{::\'assemblyMapTransformation\' | translate}}</span> <button class="mapperEditIcon iconOnlyButton floatRight material-icons" data-ng-click="mapperController.constructCanvas();" title="{{::\'assemblyRefresh\' | translate}}" aria-label="{{::\'assemblyRefresh\' | translate}}">refresh</button></div><svg width="300" height="400" id="node-mapper" class="mapper-canvas"></svg></div><div class="mapper-outputs"><div class="mapper-header">{{::\'assemblyMapTarget\' | translate}} <button class="mapperEditIcon iconOnlyButton floatRight material-icons" data-ng-click="mapperController.currentPage = \'outputs\';" title="{{::\'assemblyEditOutputs\' | translate}}" aria-label="{{::\'assemblyEditOutputs\' | translate}}">edit</button></div><div class="mapper-outputs-container"><div data-ng-repeat="outputSchema in $parent.outputSchemas" class="schema-block"><apic-mapper-schema class="mapper-output-schema" data-ng-attr-schema="outputSchema" data-editable="!map.readOnly" data-references="references" open="5" data-ng-attr-definitions="swaggerDocument"></apic-mapper-schema></div></div></div></div></div><div style="margin: 10px" data-ng-if="mapperController.currentPage == \'inputs\'"><div data-ng-controller="MapInputOutputController as inOutController" data-ng-repeat="(name, object) in selectedNode.inputs track by name"><div class="mapObject"><md-input-container class="halfWidth"><label>{{::\'assemblyContextVariable\' | translate}}</label><input apim-context-variable data-ng-model="object.variable" data-ng-model-options="{debounce:200}"></md-input-container><md-input-container class="halfWidth"><label>{{::"assemblyMapName" | translate}}</label><input data-ng-model="$inputName" data-ng-model-options="{getterSetter: true, updateOn: \'blur\'}"></md-input-container><div style="width: 88px"></div></div><div class="mapObject"><div class="halfWidth"><label style="padding-left: 3px" for="$id + \'_inputType\'">{{::"assemblyContentType" | translate}}</label><apim-combobox style="font-weight: bold" id="$id + \'_inputType\'" item-list="inOutController.contentTypes" selection="contentType"></apim-combobox></div><md-input-container class="halfWidth"><label for="$id + \'_definition\'">{{::\'assemblyDefinition\' | translate}}</label><md-select required data-ng-model="selectedDefinition"><md-option data-ng-repeat="definition in definitions" data-ng-value="definition.value || definition.name">{{definition.name}}</md-option></md-select></md-input-container><button style="margin: 10px" data-ng-show="selectedDefinition == \'inline\'" class="iconOnlyButton material-icons" data-ng-click="inOutController.launchInlineEditor()" title="{{::\'assembly_edit_inline_definition\' | translate}}">code</button><div style="width: 44px" data-ng-show="selectedDefinition !== \'inline\'"></div><button style="margin: 10px" class="iconOnlyButton material-icons" data-ng-click="mapperController.removeInput(name)" title="{{::\'assemblyRemoveInput\' | translate}}">delete</button></div></div><div><button data-ng-click="mapperController.addInput()" title="{{::\'assemblyAddInputTitle\' | translate}}">{{::\'assemblyAddInputTitle\' | translate}}</button><md-menu><md-button ng-click="$mdOpenMenu($event);" title="{{::\'assemblyAddParametersTitle\' | translate}}">{{::\'assemblyAddParametersTitle\' | translate}}</md-button><md-menu-content><md-menu-item data-ng-repeat="operation in swaggerOperations"><span data-ng-if="operation.operationId" data-ng-click="mapperController.addParametersForOperation(operation);">{{operation.operationId}}</span> <span data-ng-if="!operation.operationId" data-ng-click="mapperController.addParametersForOperation(operation);">{{operation.verb}} {{operation.path}}</span></md-menu-item></md-menu-content></md-menu><button style="float: right" data-ng-click="mapperController.switchToMap();" title="{{::\'assemblyDone\' | translate}}">{{::\'assemblyDone\' | translate}}</button><div class="clearBoth"></div></div></div><div style="margin: 10px" data-ng-if="mapperController.currentPage == \'outputs\'"><div data-ng-controller="MapInputOutputController as inOutController" data-ng-repeat="(name, object) in selectedNode.outputs track by name"><div class="mapObject"><md-input-container class="halfWidth"><label>{{::\'assemblyContextVariable\' | translate}}</label><input apim-context-variable data-ng-model="object.variable" data-ng-model-options="{debounce:200}"></md-input-container><md-input-container class="halfWidth"><label>{{::"assemblyMapName" | translate}}</label><input data-ng-model="$outputName" data-ng-model-options="{getterSetter: true, updateOn: \'blur\'}"></md-input-container><div style="width: 88px"></div></div><div class="mapObject"><div class="halfWidth"><label style="padding-left: 3px" for="$id + \'_outputType\'">{{::"assemblyContentType" | translate}}</label><apim-combobox style="font-weight: bold" id="$id + \'_outputType\'" item-list="inOutController.contentTypes" selection="contentType"></apim-combobox></div><md-input-container class="halfWidth"><label for="$id + \'_definition\'">{{::\'assemblyDefinition\' | translate}}</label><md-select required data-ng-model="selectedDefinition"><md-option data-ng-repeat="definition in definitions" data-ng-value="definition.value || definition.name">{{definition.name}}</md-option></md-select></md-input-container><button style="margin: 10px" data-ng-show="selectedDefinition == \'inline\'" class="iconOnlyButton material-icons" data-ng-click="inOutController.launchInlineEditor()" title="{{::\'assembly_edit_inline_definition\' | translate}}">code</button><div style="width: 44px" data-ng-show="selectedDefinition !== \'inline\'"></div><button style="margin: 10px" class="iconOnlyButton material-icons" data-ng-click="mapperController.removeOutput(name)" title="{{::\'assemblyRemoveOutput\' | translate}}">delete</button></div></div><div><button data-ng-click="mapperController.addOutput()" title="{{::\'assemblyAddOutputTitle\' | translate}}">{{::\'assemblyAddOutputTitle\' | translate}}</button><md-menu><md-button ng-click="$mdOpenMenu($event);" title="{{::\'assemblyAddOutputsTitle\' | translate}}">{{::\'assemblyAddOutputsTitle\' | translate}}</md-button><md-menu-content><md-menu-item data-ng-repeat="operation in swaggerOperations"><span data-ng-if="operation.operationId" data-ng-click="mapperController.addOutputsForOperation(operation);">{{operation.operationId}}</span> <span data-ng-if="!operation.operationId" data-ng-click="mapperController.addOutputsForOperation(operation);">{{operation.verb}} {{operation.path}}</span></md-menu-item></md-menu-content></md-menu><button style="float: right" data-ng-click="mapperController.switchToMap();" title="{{::\'assemblyDone\' | translate}}">{{::\'assemblyDone\' | translate}}</button><div class="clearBoth"></div></div></div><div style="margin: 10px" data-ng-if="mapperController.currentPage == \'options\'"><md-input-container><label>{{::"assemblyTitle" | translate}}</label><input data-ng-model="selectedNode.title" data-ng-model-options="{debounce:200}"></md-input-container><md-input-container style="flex: 0.7"><label>{{::"assemblyDescription" | translate}}</label><textarea data-ng-model="selectedNode.description" data-ng-model-options="{debounce:200}"></textarea></md-input-container><label style="display: block; margin: 20px 0 10px 0">{{::"assemblerMapperConfigureXML" | translate}}</label><div><md-checkbox md-no-ink aria-label="{{::\'assemblerMapperIncludeEmpty\' | translate}}" data-ng-model="includeEmptyXMLElements" data-ng-model-options="{\'getterSetter\': true}" class="flex40 md-primary"><span>{{::"assemblerMapperIncludeEmpty" | translate}}</span><label style="display: block">{{::"assemblerMapperIncludeEmptyDesc" | translate}}</label></md-checkbox></div><div><md-checkbox md-no-ink aria-label="{{::\'assemblerMapperNamespaceInheritance\' | translate}}" data-ng-model="namespaceInheritance" data-ng-model-options="{\'getterSetter\': true}" class="flex40 md-primary"><span>{{::"assemblerMapperNamespaceInheritance" | translate}}</span><label style="display: block">{{::"assemblerMapperNamespaceInheritanceDesc" | translate}}</label></md-checkbox></div><div><md-checkbox md-no-ink aria-label="{{::\'assemblerMapperNamespaceInlining\' | translate}}" data-ng-model="inlineNamespaces" data-ng-model-options="{\'getterSetter\': true}" class="flex40 md-primary"><span>{{::"assemblerMapperNamespaceInlining" | translate}}</span><label style="display: block">{{::"assemblerMapperNamespaceInliningDesc" | translate}}</label></md-checkbox></div><button style="float: right" data-ng-click="mapperController.switchToMap();" title="{{::\'assemblyDone\' | translate}}">{{::\'assemblyDone\' | translate}}</button><div class="clearBoth"></div></div></fieldset></div>'),
e.put("src/html/policies/switch.html",'<div data-ng-controller="SwitchController as ctrl" class="infoSection"><fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly"><div class="switch"><md-input-container><label>{{::"assemblyTitle" | translate}}</label><input data-ng-model="selectedNode.title" data-ng-model-options="{debounce:200}"></md-input-container><md-input-container><label>{{::"assemblyDescription" | translate}}</label><textarea data-ng-model="selectedNode.description" data-ng-model-options="{debounce:200}"></textarea></md-input-container><div class="switchCase" data-ng-repeat="case in selectedNode.case" data-ng-controller="CaseController as caseCtrl"><span><div><span class="caseIcon"></span> <span data-ng-if="!case.otherwise" style="margin-right: 10px; line-height: 49px; font-size: 1.2em; min-width: 70px">{{::\'assemblyCase\' | translate}} {{$index}}</span> <span data-ng-if="case.otherwise" style="margin-right: 10px; line-height: 49px; font-size: 1.2em; min-width: 70px">{{::\'assemblyOtherwise\' | translate}}</span></div><div><button style="margin: 0px" class="iconOnlyButton material-icons" data-ng-click="ctrl.removeCase($index)" title="{{::\'assemblyRemoveCase\' | translate}}">delete</button> <button style="margin: 0px" data-ng-if="caseCtrl.canMoveUp($index);" class="iconOnlyButton material-icons" data-ng-click="ctrl.moveUp($index)" title="{{::\'assemblyMoveUp\' | translate}}">arrow_upward</button> <button style="margin: 0px" data-ng-if="caseCtrl.canMoveDown($index);" class="iconOnlyButton material-icons" data-ng-click="ctrl.moveDown($index)" title="{{::\'assemblyMoveDown\' | translate}}">arrow_downward</button></div></span><span class="conditionContent" data-ng-if="!case.otherwise && (!case.condition || highLevelExpression)"><md-chips style="display: inline-block; vertical-align: middle; margin-right: 0px; width: calc(100% - 10px)" data-ng-model="chips" md-autocomplete-snap md-require-match="true"><md-autocomplete md-min-length="0" md-search-text="caseCtrl.searchText" md-no-cache="true" md-items="operation in caseCtrl.filter()" placeholder="{{::\'assemblySearchOperations\' | translate}}"><md-item-template><span data-ng-if="operation.operationId" md-highlight-text="caseCtrl.searchText">{{operation.operationId}}</span> <span data-ng-if="operation.verb" md-highlight-text="caseCtrl.searchText">{{operation.verb.toUpperCase()}} {{operation.path}}</span></md-item-template></md-autocomplete><md-chip-template><span data-ng-if="$chip.operationId">{{$chip.operationId}}</span> <span data-ng-if="$chip.verb && $chip.path">{{$chip.verb.toUpperCase()}} {{$chip.path}}</span></md-chip-template></md-chips><div style="margin: 10px">{{::\'assemblyOr\' | translate}} <a data-ng-click="caseCtrl.launchExpressionEditor()">{{::\'assemblyLaunchExpressionEditor\' | translate}}</a></div></span><span class="conditionContent" data-ng-if="!case.otherwise && !highLevelExpression"><md-input-container><label>{{::"assemblyExpression" | translate}}</label><textarea class="expressionTextArea" data-ng-model="case.condition" data-ng-model-options="{debounce:1000}"></textarea></md-input-container><div data-ng-show="!selectedNode.$$readOnly && !selectedNode.$$parentReadOnly" style="margin: 10px"><a data-ng-click="caseCtrl.launchExpressionEditor()">{{::\'assemblyLaunchExpressionEditor\' | translate}}</a></div></span></div><button style="margin: 10px" data-ng-click="ctrl.addCase()" title="{{::\'assemblyAddCaseTitle\' | translate}}">{{::\'assemblyAddCase\' | translate}}</button> <button style="margin: 10px" data-ng-show="!hasOtherwise();" data-ng-click="ctrl.addOtherwise()" title="{{::\'assemblyAddOtherwise\' | translate}}">{{::\'assemblyAddOtherwise\' | translate}}</button></div></fieldset></div>'),e.put("src/html/policies/throw.html",'<div class="infoSection"><fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly"><md-input-container><label>{{::"assemblyTitle" | translate}}</label><input data-ng-model="selectedNode.title" data-ng-model-options="{debounce:200}"></md-input-container><md-input-container><label>{{::"policy.throw.property.name.label" | translate}}</label><input data-ng-model="selectedNode[\'name\']" data-ng-model-options="{debounce:200}"><div class="assemblyDescription">{{::"policy.throw.property.name.description" | translate}}</div></md-input-container><md-input-container><label>{{::"policy.throw.property.message.label" | translate}}</label><textarea data-ng-model="selectedNode[\'message\']" data-ng-model-options="{debounce:200}">\n\t\t\t<div class="assemblyDescription">{{::"policy.throw.property.message.description" | translate}}</div>\n\t\t</md-input-container>\n\t</fieldset>\n</div>'),e.put("src/html/mapper-schema/add-property.html",'<div class="inner addProperty" data-ng-controller="AddPropertyController"><div style="margin-left: 17px" data-ng-click="addProp = true;" data-ng-show="!isArray && !addProp">{{::\'assembly_add_property\' | translate}}</div><div style="margin-left: 17px" data-ng-click="addProp = true;" data-ng-show="isArray && !addProp">{{::\'assembly_add_item\' | translate}}</div><div style="margin-left: 17px; display: flex; line-height: 15px" data-ng-show="addProp"><md-input-container md-no-float data-ng-show="!isArray" style="flex: 0.6; margin-right: 10px; margin-top: -6px"><input type="text" placeholder="{{::\'assembly_add_property_placeholder\' | translate}}" data-ng-model="propertyName"></md-input-container><md-select style="flex: 0.4; margin: 0 10px 0 0;height: 25px" required aria-label="::{{\'type\' | translate}}" data-ng-model="propertyType"><md-option data-ng-repeat="(definitionName, definition) in ::basicTypes" data-ng-value="definitionName">{{definitionName}}</md-option></md-select><button class="iconOnlyButton material-icons" style="line-height: 30px" data-ng-disabled="!isArray && !propertyName" data-ng-click="addProperty();" title="{{::\'add\' | translate}}">add_circle_outline</button> <button class="iconOnlyButton material-icons" style="margin-right: 5px; line-height: 30px" data-ng-click="addProp = false;" title="{{::\'cancel\' | translate}}">delete</button></div></div>'),e.put("src/html/mapper-schema/discriminator.html",'<div class="inner"><div class="discriminator"><label>{{::\'assemblyDiscriminatorType\' | translate}}</label><md-select aria-label="{{::\'assemblyDiscriminatorSelect\' | translate}}" data-ng-model="$discriminatorType" data-ng-model-options="{getterSetter: true}"><md-option md-option-empty value="">{{::\'none\' | translate}}</md-option><md-option data-ng-repeat="extendedType in ::schema.$$extendingTypes" data-ng-value="getUniqueTypeName(extendedType)">{{getUniqueTypeName(extendedType)}}</md-option></md-select></div></div>'),e.put("src/html/mapper-schema/enum.html",'<div class="inner enums" ng-if="!isCollapsed && schema.enum"><b>Enum:</b><json-formatter class="inner" json="schema.enum" open="open"></json-formatter></div>'),e.put("src/html/mapper-schema/json-schema-view.html",'<div class="json-schema-view mapper-schema-path" ng-class="{\'collapsed\': isCollapsed, \'mapper-schema-container\': !isPrimitive && !isRoot}" data-ng-attr-path="{{::getPath()}}" data-ng-attr-dimensions="{{::getDimensionArray()}}" data-ng-attr-container="{{::getContainer()}}" data-ng-attr-type="{{schema.type}}"><div class="primitive" ng-if="isPrimitive"><span data-ng-if="schema.title || schema.$$title || name" class="name">{{schema.title || schema.$$title || name}}</span> <span class="type">{{schema.type}}</span> <span class="required" ng-if="isRequired(schema)">*</span> <span class="format" ng-if="!isCollapsed && schema.format">({{schema.format}})</span> <span class="range minimum" ng-if="!isCollapsed && schema.minimum">minimum:{{schema.minimum}}</span> <span class="range exclusiveMinimum" ng-if="!isCollapsed && schema.exclusiveMinimum">(ex)minimum:{{schema.exclusiveMinimum}}</span> <span class="range maximum" ng-if="!isCollapsed && schema.maximum">maximum:{{schema.maximum}}</span> <span class="range exclusiveMaximum" ng-if="!isCollapsed && schema.exclusiveMaximum">(ex)maximum:{{schema.exclusiveMaximum}}</span> <span class="range minLength" ng-if="!isCollapsed && schema.minLength">minLength:{{schema.minLength}}</span> <span class="range maxLength" ng-if="!isCollapsed && schema.maxLength">maxLength:{{schema.maxLength}}</span><div class="inner description">{{schema.description}}</div><div ng-include="\'src/html/mapper-schema/enum.html\'" ng-if="!isCollapsed && schema.enum"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="!isCollapsed && schema.allOf" onload="type = \'allOf\'"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="!isCollapsed && schema.anyOf" onload="type = \'anyOf\'"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="!isCollapsed && schema.oneOf" onload="type = \'oneOf\'"></div><button data-ng-if="!isRoot && schemaEditable" class="iconOnlyButton material-icons" data-ng-click="deleteProperty();" title="{{::\'delete\' | translate}}">delete</button></div><div ng-if="isArray" class="array"><a class="title"><span class="toggle-handle" ng-click="toggle()"></span><span data-ng-if="schema.title || schema.$$title || name" class="name">{{schema.title || schema.$$title || name}}</span><span class="extender" data-ng-if="schema.$$extender">{{schema.$$extender}}</span><span class="opening bracket">[</span><span class="closing bracket" ng-if="isCollapsed">]</span> <button data-ng-if="!isRoot && schemaEditable" class="iconOnlyButton material-icons" data-ng-click="deleteProperty();" title="{{::\'delete\' | translate}}">delete</button></a><div class="inner"><div class="description">{{schema.description}}</div><apic-mapper-schema root="false" editable="schemaEditable" data-ng-class="{\'array-container\': propertyIsArray(schema.items), \'object-container\': propertyIsObject(schema.items)}" schema="schema.items" parent-schema="schema" open="open - 1" definitions="definitions" references="references" data-ng-if="!isCollapsed && schema.items"></apic-mapper-schema></div><div ng-include="\'src/html/mapper-schema/enum.html\'" ng-if="!isCollapsed && schema.enum"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="schema.allOf" onload="type = \'allOf\'"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="schema.anyOf" onload="type = \'anyOf\'"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="schema.oneOf" onload="type = \'oneOf\'"></div><div data-ng-include="\'src/html/mapper-schema/add-property.html\'" onload="isArray = true" data-ng-if="!isCollapsed && schemaEditable && !schema.items"></div><span class="closing bracket" style="padding-left: 17px" a ng-if="!isCollapsed">]</span></div><div ng-if="!isPrimitive && !isArray" class="object"><a class="title"><span class="toggle-handle" ng-click="toggle()"></span><span data-ng-if="schema.title || schema.$$title || name" class="name">{{schema.title || schema.$$title || name}}</span><span class="extender" data-ng-if="schema.$$extender">{{schema.$$extender}}</span><span class="opening brace">{</span><span class="closing brace" ng-if="isCollapsed">}</span> <button data-ng-if="!isRoot && schemaEditable" class="iconOnlyButton material-icons" data-ng-click="deleteProperty();" title="{{::\'delete\' | translate}}">delete</button></a><div class="inner"><div class="description">{{schema.description}}</div><div class="property" ng-repeat="(propertyName, property) in schema.properties" data-ng-if="showProperty(propertyName)" data-ng-controller="SchemaPropertyController as propCtrl"><apic-mapper-schema root="false" editable="schemaEditable" data-ng-class="{\'array-container\': propertyIsArray, \'object-container\': propertyIsObject}" schema="property" parent-schema="schema" name="propertyName" open="open - 1" definitions="definitions" references="references"></apic-mapper-schema></div></div><div data-ng-include="\'src/html/mapper-schema/discriminator.html\'" data-ng-if="!isCollapsed && schema.$$extendingTypes && isDiscriminator"></div><div ng-include="\'src/html/mapper-schema/enum.html\'" ng-if="!isCollapsed && schema.enum"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="!isCollapsed && schema.allOf" onload="type = \'allOf\'"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="!isCollapsed && schema.anyOf" onload="type = \'anyOf\'"></div><div ng-include="\'src/html/mapper-schema/x_of.html\'" ng-if="!isCollapsed && schema.oneOf" onload="type = \'oneOf\'"></div><div data-ng-include="\'src/html/mapper-schema/add-property.html\'" data-ng-if="!isCollapsed && schemaEditable"></div><span class="closing brace" style="padding-left: 17px" ng-if="!isCollapsed">}</span></div></div>'),e.put("src/html/mapper-schema/x_of.html",'<div class="inner"><div class="xOf" style="margin-left: 14px">{{convertXOf(type)}}:</div><div class="inner" ng-repeat="subSchema in schema[type]"><apic-mapper-schema root="false" editable="schemaEditable" open="open - 1" schema="subSchema" parent-schema="schema" definitions="definitions" references="references"></apic-mapper-schema></div></div>')}]);