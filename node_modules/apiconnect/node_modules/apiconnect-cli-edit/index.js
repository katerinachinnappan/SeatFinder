/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2016, 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/
// Node module: apiconnect-cli-edit

'use strict';

var SG = require('strong-globalize');
SG.SetRootDir(__dirname);

var Promise = require('bluebird');
var g = SG();

exports.getTopics = function() {
  return [ {
    name: 'local',
    visible: false,
    commands: [ {
      command: 'edit [path]',
      options: [ { name: 'skipOpen', type: 'boolean' } ],
      aliases: [ 'edit' ],
      helpInfo: function() {
        return g.f('apic_local_edit_help.txt');
      },
      action: function(path, command) {
        var apicConfig = require('apiconnect-config');
        var project = require('apiconnect-project');

        var pathInfo = project.inspectPath(path || process.cwd());
        var config = apicConfig.loadConfig();
        if (config.getOne('accessibility-mode') === 'enabled') {
          command.accessibility = true;
        }
        var openUI = Promise.promisify(require('apim-ui'));
        return openUI(pathInfo, command);
      },
    } ],
  } ];
};

