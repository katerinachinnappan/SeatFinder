// Copyright IBM Corp. 2017. All Rights Reserved.
// Node module: apiconnect-collective-jmx
// US Government Users Restricted Rights - Use, duplication or disclosure
// restricted by GSA ADP Schedule Contract with IBM Corp.

'use strict';

var _debug = require('debug');
var name = require('../package.json').name;

var MAX = 60;

module.exports = debug;

function debug() {
  var components = [name];
  components.push.apply(components, arguments);
  var fn = _debug(components.join(':'));
  // XXX(sam) could make this functions be nul-ops if ! fn.enabled
  fn.json = json;
  return fn;
}

function json(js) {
  // Don't json encode the string if debug is disabled.
  if (this.enabled) {
    var s = JSON.stringify(js);

    if (s.length < MAX)
      return s;

    return s.substring(0, MAX) + '...';
  }
  return '';
}
