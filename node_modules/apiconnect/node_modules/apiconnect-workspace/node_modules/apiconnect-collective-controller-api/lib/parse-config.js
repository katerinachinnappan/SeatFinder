// Copyright IBM Corp. 2016. All Rights Reserved.
// Node module: apiconnect-collective-controller-api
// US Government Users Restricted Rights - Use, duplication or disclosure
// restricted by GSA ADP Schedule Contract with IBM Corp.

'use strict';

var extend = require('./util').extend;
var fs = require('fs');
var path = require('path');

module.exports = exports = parseConfig;

function parseConfig(options) {
  if (options.configFile) {
    try {
      var config = JSON.parse(
        fs.readFileSync(path.resolve(options.configFile))
      );
      options = extend(config, options);
    } catch (err) {
      return {
        error: err,
      };
    }
  }
  return options;
}
