'use strict';

var debug = require('../lib/debug')();
var tap = require('tap');

tap.test('debug', function(t) {
  t.test('json stringify', function(t) {
    debug.enabled = true;
    testJson('object', { foo: 'bar' }, '{"foo":"bar"}');
    testJson('undefined', undefined, 'undefined');
    t.end();
  });

  function testJson(label, input, expected) {
    var out = debug.json(input);
    t.test(label, function(t) {
      t.ok(label, 'output exists');
      t.equal(out, expected, 'output was correct');
      t.end();
    });
  }

  t.end();
});
