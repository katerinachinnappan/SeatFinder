/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2016, 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/
// Node module: apiconnect-cli-components


'use strict';

//var Promise = require('bluebird');
var _ = require('lodash');
//var catalogAPI = require('./catalogs');
var f = require('util').format;
//var fs = Promise.promisifyAll(require('fs'));
//var g = require('strong-globalize')();
//var jsYaml = require('js-yaml');
//var path = require('path');
//var project = require('apiconnect-project');
var reqOpts = require('./req-options');
var request = require('./request');
//var validator = require('./opts-validator');

//var PRODUCT_TYPE = 'productVersion';

/**
 * List products based on options
 *
 * @param {object} options
 * @param {object} options.creds || options.server
 * @param {object} options.organization name or GUID of provider organization */
// * @return Promise.<Components> */
function list(options) {
  var reqOptions = reqOpts(_.defaults({
    url: f('/v1/orgs/%s/components', options.organization),
    headers: {
      Accept: 'application/json',
    },
    json: true,
  }, options));
  reqOptions.ignoreErrors = [ 'checkPermissions.unauthorisedException' ];
  return request(reqOptions);
};

module.exports = {
  list: list,
};

