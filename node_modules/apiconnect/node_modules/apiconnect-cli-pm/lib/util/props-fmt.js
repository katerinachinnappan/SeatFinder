/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2016, 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/
// Node module: apiconnect-cli-pm

'use strict';

var _ = require('lodash');
var fmt = require('util').format;

exports.print = print;
exports.printDelete = printDelete;

// [service-name] key: value
var serviceNameFormat = '[%s]';
var basicKeyFormat = '%s:';
var deletedKeyFormat = 'Deleted %s:';

function print(logger, envs, serviceName) {
  return printInternal(basicKeyFormat, logger, envs, serviceName);
}

function printDelete(logger, envs, serviceName) {
  return printInternal(deletedKeyFormat, logger, envs, serviceName);
}

function printInternal(keyFormat, logger, envs, serviceName) {
  var vals = serviceName ? [ fmt(serviceNameFormat, serviceName) ] : [];
  Object.keys(envs).forEach(function(key) {
    // Create array consisting of [serviceName], key:, value
    var v = _.union(vals, [ fmt(keyFormat, key), envs[ key ] ]);
    logger.writeln(_.join(v, ' '));
  });
}

