/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2015, 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/
// Node module: apim-ui

'use strict';

/* Filters */

var apps = angular.module('apim.apps');

apps.filter('appSubscriptionQuery', function() {
  return function (subscriptions, query) {
    if(!subscriptions) return subscriptions;
    if(!query) return subscriptions;
    var term = query.toLowerCase();
    return subscriptions.filter(function(subscription) {
      return (subscription.app.appName && subscription.app.appName.toLowerCase().indexOf(term) > -1);
    });
  };
});

apps.filter('selectedSubscriptionsCount', ['translatePluralityFilter', function(translatePluralityFilter) {
  return function (subscriptions) {
    if(!subscriptions) return subscriptions;
    var selected = subscriptions.filter(function(subscription) {
      return subscription.selected;
    });
    return translatePluralityFilter(selected.length, 'manageMigrateCountSelected', 'count');
  };
}]);

