/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2015, 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/
// Node module: apim-ui

'use strict';

var networkMode = 'online';

$(function () {
  var appInit = function() {

    if (window.isExplorer && typeof window.apiconnectExplorer !== "undefined" &&
      window.apiconnectExplorer.adapter &&
      window.apiconnectExplorer.directive) {
        // removes the need for AngularJS in apiconnect-explorer
        angular.module('apiconnect-explorer', [])
          .directive('apiconnectExplorer', window.apiconnectExplorer.directive);
        window.apiconnectExplorer.adapter.bootstrap(window.document, ['apim']);
        window.angular2Loaded = true;
    } else {
      angular.bootstrap(window.document, ['apim']);
    }
  };

  $.get('/network-mode')
    .done(function(data) {
      networkMode = data.mode;
    })
    .fail(function() {
      networkMode = 'online';
    })
    .always(appInit);

});

