<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="orgView" data-ng-class="{backgroundDisabled: beingDeleted}" data-ng-controller="DeveloperCtrl as developerController">
	<div class="card primaryBorder" data-ng-class="{'open': showOrgDetails}">
		<div class="developerSummary">
			<div class="displayInline developerSpacerColumn">
				<button class="iconOnlyButton productExpander" data-ng-click="showOrgDetails = !showOrgDetails" title="{{::'ttExpand' | translate}}"><div class="dijitInline webapiIcon maximizeIcon transition200" data-ng-class="{'rotate270': !showOrgDetails}"></div></button>
			</div><div class="displayInline alignTop developerNameColumn boundedText">
				<a href="#/catalogs/{{environment.id}}/developers/{{developer.id}}" class="displayInline orgName boundedText" title="{{developer.displayName}}" data-ng-bind-html="developer.displayName | highlight: query">{{developer.displayName}}</a><span class="boundedText alignMiddle">{{developer.name}}</span>
			</div><div class="displayInline alignTop developerActionsColumn">
				<ul role="list" class="simpleList tagContainer displayInline">
					<li role="listitem" class="displayInline" data-ng-repeat="tag in devTags = (developer | tagsForDeveloper: allTags: tags: favourites)">
						<apim-tag class="displayInline compactTag"></apim-tag>
					</li>
					<li role="listitem" class="displayInline">
						<div role="listitem" class="displayInline dropdown orgTagButton" dropdown data-is-open="tagDropdownOpen">
							<button class="mediumButton iconOnlyButton dropdown-toggle" role="button" dropdown-toggle title="{{::'assignCommunity' | translate}}"><div class="material-icons" aria-label="{{::'assignCommunity' | translate}}">add_circle_outline</div></button>
							<ul class="dropdown-menu simpleList tagContainer tagDropdown" aria-label="{{::'addTaglabel' | translate}}" role="menu" onkeypress="tagDropdownOpen = true;">
								<li role="menuitem" class="clickable" data-ng-keypress="assignTag(tag);" data-ng-click="assignTag(tag);" data-ng-repeat="tag in tags | notInArrayByField: devTags: 'value' | excludeUntagged">
									<apim-tag></apim-tag>
								</li>
								<li role="menuitem" data-ng-click="$event.stopPropagation();" title="{{::'createNewCommunityPlaceholder' | translate}}">
									<input data-ng-keypress="createTag($event);" title="{{::'createNewCommunityPlaceholder' | translate}}" placeholder="{{::'createNewCommunityPlaceholder' | translate}}" style="padding: 5px; width: 148px; margin-top: 3px;" data-ng-model="newTag" maxlength="100" required>
								</li>
							</ul>
						</div>
					</li>
				</ul>
				<div class="displayInline dropdown publishMenu" dropdown data-is-open="publishIsOpen">
					<button class="iconOnlyButton dropdown-toggle menuDropdown" role="button" title="{{::'ttManage' | translate}}" dropdown-toggle><div class="material-icons">more_horiz</div></button>
					<ul class="dropdown-menu pull-right" role="menu" onkeypress="publishIsOpen" aria-label="{{::'ttManage' | translate}}">
						<li role="menuitem" class="publishingMenuItem" aria-label="{{::'resendInvite' | translate}}"><a href="javascript:;" data-ng-show="developer.status == 'pending'" data-ng-click="resendInvite();">{{::'resendInviteOwner' | translate}}</a></li>
						<li role="menuitem" class="publishingMenuItem" aria-label="{{::'changeOrgOwner' | translate}}"><a href="javascript:;" data-ng-click="changeOwner();">{{::'changeOrgOwner' | translate}}</a></li>
						<li role="menuitem" class="publishingMenuItem" aria-label="{{::'messageSend' | translate}}"><a href="javascript:;" data-ng-click="messageDeveloper();">{{::'messageSend' | translate}}</a></li>
						<li class="publishingMenuItem divider"></li>
						<li role="menuitem" class="publishingMenuItem" aria-label="{{::'ttDelete' | translate}}"><a href="javascript:;" data-ng-click="deleteDeveloper();">{{::'ttDelete' | translate}}</a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="developerList" data-ng-show="showOrgDetails">
			<div class="tableHeaderBackground apiSelfClear">
				<div class="column developerNameColumn">{{::'name' | translate}}
				</div><div class="column developerEmailColumn">{{::'Email' | translate}}
				</div><div class="column developerRolesColumn">{{::'rolesColumnTitle' | translate}}
				</div><div class="column developerActiveColumn">{{::'activeColumnTitle' | translate}}</div>
			</div>
			<ul class="developersList" data-ng-if="members.length > 0">
				<li data-ng-repeat="dev in members">
					<div class="developer secondaryBorder secondaryHighlight">
						<div class="displayInline developerNameColumn">{{renderUserName(dev.user)}}
						</div><div class="displayInline developerEmailColumn">{{dev.user.email}}
						</div><div class="displayInline developerRolesColumn">
							<div data-ng-repeat="role in dev.roles" class="roleTag">{{roleNames[role.name]}}</div>
						</div><div class="displayInline developerActiveColumn">{{dev.user.lastLoginTime ? (dev.user.lastLoginTime | since) : ('neverActive' | translate)}}</div>
					</div>
				</li>
			</ul>
		</div>
	</div>
</div>
