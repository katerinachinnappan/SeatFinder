<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div data-ng-controller="EnvironmentPoliciesController as policiesController">
	<div class="productsCollection policiesCollection collectionPadding">
		<h3 class="floatLeft" data-ng-if="features.multipleGatewayCatalogs">{{'custom_policies' | translate}}</h3>
		<h2 class="floatLeft" data-ng-show="!features.multipleGatewayCatalogs &&!xhrProcessing && policies && policies.length">{{policies.length | translatePlurality:'policyCount':'count'}}</h2>
		<button class="iconOnlyButton" data-ng-disabled="!permissions[selectedEnvironment.id + '/catalog_catalogSettings/manage'] || spaceId" data-ng-click="import();" title="{{::'ttImportPolicy' | translate}}"><div class="dijitInline webapiIcon policyImportIcon material-icons">file_upload</div></button>
		<div  data-ng-hide="features.multipleGatewayCatalogs" class="floatRight">
      <div class="displayInline unifiedSearch bx--search" role="search">
          <bx-icon class="bx--search__icon--magnifier" icon="search"></bx-icon>
          <label for="search__input" class="bx--search__label">Search</label>
        <input type="search" class="bx--search__input" id="search__input" data-ng-model="query" type="search" spellcheck="false" title="{{::'find' | translate}}" placeholder="{{::'find' | translate}}">
      </div>
		</div>
		<div class="clearBoth"></div>
		<div class="loadingAnimation38" data-ng-show="xhrProcessing"></div>
		<div class='emptyCollectionMessage xlargePadding' data-ng-show="!xhrProcessing && policies && policies.length == 0">{{policies | deploymentNoDescriptors:'policies'}}</div>
    <div class="tableHeaderBackground apiSelfClear topMargin">
      <div class="column managePolicyNameColumn">{{::'policyName' | translate}}</div><div
        class="column managePolicyVersionColumn">{{::'policyVersion' | translate}}</div><div
        class="column managePolicyActionsColumn floatRight">{{::'apiActions' | translate}}</div>
    </div>
    <ul class="policyVersions">
      <li data-ng-repeat="policyVersion in policies | policiesQuery: query | orderBy: ['title','-version']">
        <apim-environment-policy-version></apim-environment-policy-version>
      </li>
    </ul>
	</div>
</div>
