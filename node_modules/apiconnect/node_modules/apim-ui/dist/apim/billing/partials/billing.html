<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<section class="paymentGatewaysCollection centerColumn absolutelyFabulous" data-ng-controller="billingController" tabindex="0">
  <div data-ng-class="{spinner: loading}"></div>
  <div data-ng-show="!loading" aria-hidden="false">
    <div class="secondaryBackground">
      <div class="bx--responsive-table-container">
        <div class="actionSection apiSelfClear">
          <span class="actionLabel">{{::'billingIntegrations' | translate}}</span>
          <div class="sectionAction displayInline dropdown registryMenu open buttonArea" data-is-open="idpCreateMenuIsOpen" dropdown data-ng-show="permissions['org_organizationManagement/manage']" aria-hidden="false">
            <button class="bx--btn" role="button" data-ng-show="!stripeInfo.id" dropdown-toggle aria-haspopup="true" aria-expanded="true">
                  {{::'add' | translate}}
                  <svg class="bx--btn--right-icon__icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#bx-src-icons--add--glyph"></use></svg>
              </button>
            <ul class="dropdown-menu dropdown-menu-right exclude-this" role="menu" aria-label="User Registry" tabindex="0" onkeypress="idpCreateMenuIsOpen = true;">
              <li role="menuitem" class="registryMenuItem"><a href="javascript:void(0)" data-ng-click="showModal(modalType.connect)">{{::'billingStripeIntegration' | translate}}</a></li>
            </ul>
          </div>
        </div>
        <table class="bx--responsive-table">
          <thead class="bx--table-head">
            <tr class="bx--table-row">

              <th class="bx--table-header bx--table-sort bxTablePaddingLeft bx--table-sort-active" ng-class="{'bx--table-sort--ascending' : orderDirection, 'bx--table-sort-active' : orderProp === 'type'}" data-ng-click="orderProp = 'type'; orderDirection = !orderDirection;"
                  role="button" tabindex="0">
                <span>{{::'billingTableType' | translate}}</span>
                <svg class="bx--table-sort__svg"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#bx-src-icons--caret--down"></use></svg>
              </th>

              <th class="bx--table-header bx--table-sort" ng-class="{'bx--table-sort--ascending' : orderDirection, 'bx--table-sort-active' : orderProp === 'name'}" data-ng-click="orderProp = 'name'; orderDirection = !orderDirection;" role="button" tabindex="0">
                <span>{{::'billingTableName' | translate}}</span>
                <svg class="bx--table-sort__svg"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#bx-src-icons--caret--down"></use></svg>
              </th>

              <th class="bx--table-header bx--table-sort" ng-class="{'bx--table-sort--ascending' : orderDirection, 'bx--table-sort-active' : orderProp === 'status'}" data-ng-click="orderProp = 'status'; orderDirection = !orderDirection;" role="button" tabindex="0">
                <span>{{::'billingTableStatus' | translate}}</span>
                <svg class="bx--table-sort__svg"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#bx-src-icons--caret--down"></use></svg>
              </th>

              <th class="bx--table-header bx--table-sort" ng-class="{'bx--table-sort--ascending' : orderDirection, 'bx--table-sort-active' : orderProp === 'issues'}" data-ng-click="orderProp = 'issues'; orderDirection = !orderDirection;" role="button" tabindex="0" data-ng-if="issueCount > 0">
                <span>{{::'billingTableIssues' | translate}}</span>
                <svg class="bx--table-sort__svg"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#bx-src-icons--caret--down"></use></svg>
              </th>
              <th class="bx--table-header bxTablePaddingRight"></th>
            </tr>
          </thead>
          <tbody class="bx--table-body">
            <tr class="bx--table-row bx--parent-row" data-ng-show="!stripeInfo.id" aria-hidden="false">
              <td class="bxTablePaddingLeft table-empty" colspan="3">{{::'billingIntegrationsNone' | translate}}</td>
            </tr>
            <tr class="bx--table-row bx--parent-row" ng-class-even="'bx--parent-row--even'" data-ng-show="stripeInfo.id">

              <td class="bxTablePaddingLeft">
                <span>{{::'billingStripeIntegration' | translate}}</span>
                <button class="material-icons iconOnlyButton alignMiddle infoIcon infoIconTopMargin" data-ng-click="showTooltip = !showTooltip" data-tooltip-is-open="showTooltip" data-tooltip-html-unsafe="{{'billingStripeAccountTooltip' | translate}}" data-tooltip-placement="right">info_outline</button>
              </td>

              <td>{{stripeInfo.name}}</td>
              <td>{{stripeInfo.connection | translate}}</td>
              <td data-ng-if="issueCount > 0">
                <span>{{issueCount}}{{::'billingBlockedJobs' | translate}}</span>
                <button class="material-icons iconOnlyButton alignMiddle infoIcon infoIconTopMargin" data-ng-click="showTooltip = !showTooltip" data-tooltip-is-open="showTooltip" data-tooltip-html-unsafe="{{'billingBlockedJobsTooltip' | translate}}" data-tooltip-placement="right">info_outline</button>
              </td>
              <td class="bx--table-overflow bxTablePaddingRight">
                <div class="dropdown actionMenu" dropdown data-is-open="menuOpen">
                  <bx-overflow-menu>
                    <bx-overflow-menu-item item-text="{{::'billingStripeAccountUpdate' | translate}}" data-ng-click="showModal(modalType.update)">
                    </bx-overflow-menu-item>

                    <bx-overflow-menu-item item-text="{{::'billingStripeAccountDisconnect' | translate}}" data-ng-click="showModal(modalType.disconnect)">
                    </bx-overflow-menu-item>

                    <bx-overflow-menu-item item-text="{{::'billingBlockedJobsRetry' | translate}}" data-ng-click="retryJobs()" data-ng-if='issueCount > 0'>
                    </bx-overflow-menu-item>
                  </bx-overflow-menu>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>
