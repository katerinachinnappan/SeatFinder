<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="usersCollection stretch underMainBanner expanded" data-ng-controller="UsersController as usersController">
	<div data-ng-class="{'spinner': !usersLoaded || !finishedDrawing}"></div>
	<div data-ng-show="usersLoaded && finishedDrawing" class="centerColumn">
		<div class="searchBanner apiSelfClear layout">
      <button class="bx--btn" role="button" title="{{::'add' | translate}}" data-ng-click="newUser()" data-ng-disabled="!users.$resolved" data-ng-show="canEdit">
        {{::'add' | translate}}
        <bx-icon class="bx--btn--right-icon__icon" icon="add--glyph"></bx-icon>
      </button>
      <div class="displayInline itsAllRelative searchBanner flex fullWidth bx--search" role="search">
          <bx-icon class="bx--search__icon--magnifier" icon="search"></bx-icon>
          <label for="search__input" class="bx--search__label">Search</label>
        <input type="search" class="bx--search__input" id="search__input" aria-label="{{::'usersSearch' | translate}}" placeholder="{{::'usersSearch' | translate}}" data-ng-model="query" data-ng-disabled="!users.$resolved">
        <button type="reset" class="iconOnlyButton" data-ng-click="query = ''" data-ng-show="query" title="{{::'resetFilter' | translate}}"><div class="closeIcon"></div></button>
      </div>
		</div>
		<div class="secondaryBackground listingColumn stretch bxTableBackground">
		  <div class="dataBox" data-ng-class="{noScope: spaceId}" apim-sliding-column data-column-class="roleColumnScroll" data-column-rows="filteredUsers.length">
	      <div class="tableHeaderBackground apiSelfClear rowPadding bxTableHeader" data-ng-show="filteredUsers && filteredUsers.length > 0">
	        <div class="column sortable nameColumn" data-ng-class="{ascendingSort: orderProp == 'lastName' && !orderDirection, descendingSort: orderProp == 'lastName' && orderDirection}" data-ng-click="orderProp = 'lastName'; orderDirection = !orderDirection;">{{::'apiUsersName' | translate}}
	        </div><div class="column locationColumn">{{::'apiScope' | translate}}
	        </div><div class="column roleColumn">
						<div data-ng-if="canViewRoles" class="roleBox fixOverlap">
						  <div class="roleColumnScroll"><div data-ng-repeat="role in roles | notOwnerRole" class="column oneRoleColumn">{{role.displayName}}</div></div>
						</div>
						<div data-ng-if="!canViewRoles">{{::'userRoles' | translate}}</div>
	        </div><div class="column sortable statusColumn bxTableStatusHeader" data-ng-class="{ascendingSort: orderProp == 'lastLoginTime' && !orderDirection, descendingSort: orderProp == 'lastLoginTime' && orderDirection}" data-ng-click="orderProp = 'lastLoginTime'; orderDirection = !orderDirection;">{{::'lastLogin' | translate}}
	        </div><div data-ng-show="canEdit" class="column bxActionsColumn">{{::'actions' | translate}}</div>
	      </div>
	      <div class="emptyCollectionMessage mediumPadding" data-ng-show="filteredUsers && filteredUsers.length == 0 && finishedDrawing">{{::'noUsersFound' | translate}}</div>
        <ul class="userList">
          <li data-ng-repeat="user in filteredUsers = (users | usersByScope: usersScope | usersQuery: query | orderBy: orderProp: orderDirection)"
            ng-class-even="'bxTableRowEven'" ng-class-odd="'bxTableRowOdd'">
            <apim-user></apim-user>
          </li>
        </ul>
		  </div>
		</div>
	</div>
</div>
