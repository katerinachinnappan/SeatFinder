<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div data-ng-controller="RoleController as roleController" class="manageRoles">
	<div data-ng-class="{'spinner': !metadataLoaded}"></div>
	<div data-ng-show="metadataLoaded" class="bx--right-nav-roles">
		<form name="userRoleForm">
			<div class="webapiFormRow layout mediumPadding">
				<bx-input-container>
					<label class="mandatory">{{::'displayName' | translate}}</label>
					<input type="text" data-ng-model="selectedRoleDetails.displayName" apim-auto-focus required data-ng-disabled="!permissions['org_organizationManagement/manage'] || !selectedRoleDetails.modifiable"
					/>
				</bx-input-container>
				<bx-input-container>
					<label class="mandatory">{{::'name' | translate}}</label>
					<input type="text" data-ng-model="selectedRoleDetails.name" required data-ng-disabled="!permissions['org_organizationManagement/manage'] || !selectedRoleDetails.modifiable"
					/>
				</bx-input-container>
				<bx-input-container>
					<label>{{::'description' | translate}}</label>
					<input type="text" data-ng-model="selectedRoleDetails.description" data-ng-disabled="!permissions['org_organizationManagement/manage'] || !selectedRoleDetails.modifiable"
					/>
				</bx-input-container>
			</div>
			<div class="subtitle">{{::'permissionsOrg' | translate}}</div>
			<ul class="permissionList">
				<li data-ng-repeat="permission in rolesPermissions | filter: {type: '!'}" class="permissionListItem">
					<div class="dijitInline">
						<hgroup>
							<h5>{{::permission.displayName| translate}}</h5>
							<h6>{{::permission.description| translate}}</h6>
						</hgroup>
					</div>
					<div class="checkboxes">
						<ul>
							<li class="viewLabel" data-ng-repeat="action in permission.actions" data-ng-controller="ActionController as actionController">
								<bx-checkbox data-ng-disabled="!permissions['org_organizationManagement/manage'] || !selectedRoleDetails.modifiable || amIImplied()"
								 data-ng-model="$action" data-ng-model-options="{getterSetter:true, debounce:200}">{{::action.displayName | translate}}</bx-checkbox>
							</li>
						</ul>
					</div>
				</li>
			</ul>
			<div class="defaultPermissions">
				<div class="defaultPermContainer">
					<div class="subtitle">
						<div class="twistieRoom">
							<div>{{::'permissionsCatalogDefault' | translate}}</div>
							<div class="description">{{::'permissionsCatalogDesc' | translate}}</div>
						</div>
						<button data-ng-class="{'rotate180': defExpanded}" class="twistie iconOnlyButton material-icons" data-ng-click="defExpanded = !defExpanded">
                      keyboard_arrow_down
			      </button>
					</div>
					<ul class="permissionList" data-ng-show="defExpanded">
						<li data-ng-repeat="permission in rolesPermissions | filter: {type: 'environment'}" class="permissionListItem">
							<div class="dijitInline">
								<hgroup>
									<h5>{{::permission.displayName | translate}}</h5>
									<h6>{{::permission.description | translate}}</h6>
								</hgroup>
							</div>
							<div class="checkboxes">
								<ul>
									<li class="viewLabel" data-ng-repeat="action in permission.actions" data-ng-controller="ActionController as actionController">
										<bx-checkbox data-ng-disabled="!permissions['org_organizationManagement/manage'] || !selectedRoleDetails.modifiable || amIImplied()"
										 data-ng-model="$action" data-ng-model-options="{getterSetter:true, debounce:200}">
											{{::action.displayName | translate}}
										</bx-checkbox>
									</li>
								</ul>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</form>
	</div>
</div>
