<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="authUrlEditor" data-ng-controller="AuthUrlCtrl as authUrlController">
  <form name="authUrlForm">
    <div class="webapiFormRow layout">
      <bx-input-container>
        <div>
          <label class="mandatory">{{::'displayName' | translate}}</label>
          <button class="icon-position iconOnlyButton" title="{{::'idpRealm' | translate}}" tooltip="{{::'authUrlNameTip' | translate}}" tooltip-placement="right">
            <div class="material-icons infoIcon">info</div>
          </button>
        </div>
        <input type="text" data-ng-model="selectedIDP.title" data-ng-pattern="/^[\w :\/_\-:\.\<\>\{\}\[\]\(\)]+$/" apim-auto-focus required data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
      </bx-input-container>
      <bx-input-container data-ng-if="!isDialog">
        <label>{{::'idpType' | translate}}</label>
        <input type="text" value="{{idpTypeLookup[selectedIDP.type]}}" readonly />
      </bx-input-container>
      <bx-input-container>
        <label class="mandatory">{{::'idpNameLabel' | translate}}</label>
        <input type="text" data-ng-model="selectedIDP.name" data-ng-pattern="/^[a-z]+[a-z0-9]*(\-[a-z0-9]+)*$/" ng-trim="false" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" required />
      </bx-input-container>
    </div>
    <div class="webapiFormRow layout">
      <bx-input-container>
        <label class="mandatory">{{::'idpRealm' | translate}}</label>
        <input type="text" data-ng-model="selectedIDP.realm" data-ng-pattern="/^[\w\s]/" data-ng-minlength="1" data-ng-maxlength="64" required data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
      </bx-input-container>
      <bx-input-container>
        <label>{{::'authUrlDescription' | translate}}</label>
        <input type="text" data-ng-model="selectedIDP.description" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
      </bx-input-container>
    </div>
    <div class="webapiFormRow topMargin layout">
      <div class="inlineInput" data-ng-show="context == 'cmc'">
        <bx-checkbox name="publicCheckbox" class="floatLeft" ng-checked="selectedIDP.scope.indexOf('portal') != -1" data-ng-click="handlePublicClick(selectedIDP)" aria-label="{{::'sslPublic' | translate}}">{{::'sslPublic' | translate}}</bx-checkbox>
        <button class="icon-position iconOnlyButton" title="{{::'public' | translate}}" tooltip="{{::'idpPublicHelp' | translate}}">
          <div class="material-icons infoIcon">info</div>
        </button>
      </div>
    </div>
    <div class="webapiFormRow layout">
      <bx-input-container class="flex-100">
        <label class="mandatory">{{::'authUrlUrl' | translate}}</label>
        <input type="text" data-ng-model="selectedIDP.authUrlConfig.authenticationUrl" required data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
      </bx-input-container>
    </div>
    <div class="webapiFormRow topMargin layout">
      <div class="bx--form__row-item">
        <md-switch class="md-primary" data-md-no-ink data-ng-model="ssl" aria-label="{{::'ldapSSLToggleLabel' | translate}}" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
          <span>
            {{::'ldapSSLToggleLabel' | translate}}
            <button class="icon-position iconOnlyButton" title="{{::'ldapSSLProfileLabel' | translate}}" tooltip="{{::'authUrlSSLProfileTip' | translate}}"><div class="material-icons infoIcon">info</div></button>
          </span>
        </md-switch>
      </div>
      <div class="bx--form__row-item bx--select labeledSelect">
        <label class="apiScreenReaderOnly" for="{{$id}}_ldapSSLProfile">{{::'ldapSSLProfileLabel' | translate}}</label>
        <select class="bx--select__input" id="{{$id}}_ldapSSLProfile" data-ng-model="selectedIDP.authUrlConfig.sslProfile" data-ng-disabled="!ssl || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-options="profile.id as profile.name for profile in sslProfiles"></select>
        <bx-icon class="bx--select__arrow" icon="caret--down"></bx-icon>
      </div>
    </div>
    <div class="webapiFormRow topMargin layout">
      <div class="bx--form__row-item">
        <md-switch class="md-primary" data-md-no-ink data-ng-model="selectedIDP.caseSensitive" aria-label="{{::'idpCaseSensitive' | translate}}" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
          <span>
            {{::'idpCaseSensitive' | translate}}
            <button class="icon-position iconOnlyButton" title="{{::'idpCaseSensitive' | translate}}" tooltip="{{::'idpCaseSensitiveHelp' | translate}}"><div class="material-icons infoIcon">info</div></button>
          </span>
        </md-switch>
      </div>
      <div class="webapiFormRow topMargin layout">
        <p class="webapiFormRow topExtraMargin">{{::'authUrlExampleHeader' | translate}}</p>
        <div class="exampleLogin" data-ng-bind-html="selectedIDP.realm | exampleName:this:'authUrlExample'"></div>
      </div>
    </div>
  </form>
</div>
