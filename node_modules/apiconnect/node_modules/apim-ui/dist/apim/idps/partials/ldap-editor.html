<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="ldapEditor xlargePadding" data-ng-controller="LDAPCtrl as ldapController">
	<form name="ldapForm">
		<div class="apiHidden stickyNote" data-ng-class="{apiHidden: !isLdapUsed}" data-ng-if="permissions['org_organizationManagement/manage'] && selectedIDP.orgId">
			<div>{{::'updatingLdapWithUsers' | translate}}</div>
			<div>{{::'updatingLdapWithUsersDesc' | translate}}</div>
		</div>
		<div class="webapiFormRow layout">
			<bx-input-container>
				<label class="mandatory">{{::'displayName' | translate}}</label>
				<input type="text" data-ng-model="selectedIDP.title" data-ng-pattern="/^[\w :\/_\-:\.\<\>\{\}\[\]\(\)]+$/" apim-auto-focus required data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
			</bx-input-container>
			<bx-input-container data-ng-if="!isDialog">
				<label>{{::'idpType' | translate}}</label>
				<input type="text" value="{{idpTypeLookup[selectedIDP.type]}}" readonly />
			</bx-input-container>
			<bx-input-container>
				<label class="mandatory">{{::'idpNameLabel' | translate}}</label>
				<input type="text" data-ng-model="selectedIDP.name" data-ng-pattern="/^[a-z]+[a-z0-9]*(\-[a-z0-9]+)*$/" ng-trim="false" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" required />
			</bx-input-container>
		</div>
		<br/>
		<br/>
		<div class="webapiFormRow layout">
			<bx-input-container class="flex-100">
				<label>{{::'ldapDescription' | translate}}</label>
				<input type="text" data-ng-model="selectedIDP.description" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
			</bx-input-container>
		</div>
		<div class="webapiFormRow topMargin layout">
			<div class="inlineInput" data-ng-show="context == 'cmc'">
					<bx-checkbox name="publicCheckbox" md-no-ink class="md-primary" ng-checked="selectedIDP.scope.indexOf('portal') != -1" data-ng-click="handlePublicClick(selectedIDP)" aria-label="{{::'sslPublic' | translate}}">{{::'sslPublic' | translate}}</bx-checkbox>
					<button class="iconOnlyButton" title="{{::'public' | translate}}" tooltip="{{::'idpPublicHelp' | translate}}"><div class="material-icons infoIcon">info</div></button>
			</div>
		</div>
		<div class="webapiFormRow layout">
			<bx-input-container>
				<label class="mandatory">{{::'ldapHostnameLabel' | translate}}</label>
				<input type="text" data-ng-model="selectedIDP.ldapConfig.host" required data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
			</bx-input-container>
			<bx-input-container>
				<label class="mandatory">{{::'ldapPortNumberLabel' | translate}}</label>
				<input type="text" data-ng-model="selectedIDP.ldapConfig.port" data-ng-pattern="/^[\d]+$/" data-ui-validate="'validatePort($value)'" required data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
			</bx-input-container>
			<bx-input-container>
				<label for="{{$id}}_ldapVersion">{{::'ldapLdapVersionLabel' | translate}}</label>
				<select id="{{$id}}_ldapVersion" data-ng-model="selectedIDP.ldapConfig.protocolVersion" data-ng-options="ver.value as ver.name for ver in ldapVersions" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)"></select>
			</bx-input-container>
		</div>
		<div class="webapiFormRow topMargin layout">
			<md-switch class="md-primary" data-md-no-ink data-ng-model="selectedIDP.ldapConfig.ssl" aria-label="{{::'ldapSSLToggleLabel' | translate}}" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
				{{::'ldapSSLToggleLabel' | translate}}
			</md-switch>
			<bx-input-container class="hiddenLabel floatLeft">
				<label class="apiScreenReaderOnly" for="{{$id}}_ldapSSLProfile">{{::'ldapSSLProfileLabel' | translate}}</label>
 				<select id="{{$id}}_ldapSSLProfile" data-ng-model="selectedIDP.ldapConfig.sslProfile" data-ng-disabled="!selectedIDP.ldapConfig.ssl || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)"  data-ng-options="profile.id as profile.title for profile in sslProfiles"></select>
			</bx-input-container>
			<button class="iconOnlyButton" title="{{::'ldapSSLProfileLabel' | translate}}" tooltip="{{::'ldapSSLProfileTip' | translate}}" tooltip-trigger="click"><div class="material-icons infoIcon">info</div></button>
		</div>
		<div class="webapiFormRow topMargin layout">
			<md-switch class="md-primary floatLeft" data-md-no-ink data-ng-model="selectedIDP.caseSensitive" aria-label="{{::'idpCaseSensitive' | translate}}" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
				{{::'idpCaseSensitive' | translate}}
			</md-switch>
			<button class="iconOnlyButton" title="{{::'idpCaseSensitive' | translate}}" tooltip="{{::'idpCaseSensitiveHelp' | translate}}" tooltip-trigger="click"><div class="material-icons infoIcon">info</div></button>
		</div>
		<div class="navRow topExtraMargin" data-ng-if="!lite">
			<nav class="subBanner" role="navigation" aria-label="{{::'ldapServerOptions' | translate}}">
				<ul class="menuList" data-ng-if="permissions['org_organizationManagement/manage'] && (isDialog || selectedIDP.orgId)">
					<li data-ng-click="selectedIDP.ldapConfig.authMethod = 'bindUPN'" data-ng-class="{selected: selectedIDP.ldapConfig.authMethod == 'bindUPN'}" tabindex="-1">
						<a href="javascript: void(0);" title="{{::'ldapComposeUPNTabLabel' | translate}}" data-ng-click="selectedIDP.ldapConfig.authMethod = 'bindUPN'">{{::'ldapComposeUPNTabLabel' | translate}}</a>
					</li><li data-ng-click="selectedIDP.ldapConfig.authMethod = 'bindDN'" data-ng-class="{selected: selectedIDP.ldapConfig.authMethod == 'bindDN'}" tabindex="-1">
						<a href="javascript: void(0);" title="{{::'ldapComposeDNTabLabel' | translate}}" data-ng-click="selectedIDP.ldapConfig.authMethod = 'bindDN'">{{::'ldapComposeDNTabLabel' | translate}}</a>
					</li><li data-ng-click="selectedIDP.ldapConfig.authMethod = 'searchDN'" data-ng-class="{selected: selectedIDP.ldapConfig.authMethod == 'searchDN'}" tabindex="-1">
						<a href="javascript: void(0);" title="{{::'ldapSearchDNLabel' | translate}}" data-ng-click="selectedIDP.ldapConfig.authMethod = 'searchDN'">{{::'ldapSearchDNLabel' | translate}}</a>
					</li>
				</ul>
				<ul class="menuList" data-ng-if="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
					<li data-ng-class="{selected: selectedIDP.ldapConfig.authMethod == 'bindUPN'}">
						<a href="javascript: void(0);" title="{{::'ldapComposeUPNTabLabel' | translate}}">{{::'ldapComposeUPNTabLabel' | translate}}</a>
					</li><li data-ng-class="{selected: selectedIDP.ldapConfig.authMethod == 'bindDN'}">
						<a href="javascript: void(0);" title="{{::'ldapComposeDNTabLabel' | translate}}">{{::'ldapComposeDNTabLabel' | translate}}</a>
					</li><li data-ng-class="{selected: selectedIDP.ldapConfig.authMethod == 'searchDN'}">
						<a href="javascript: void(0);" title="{{::'ldapSearchDNLabel' | translate}}">{{::'ldapSearchDNLabel' | translate}}</a>
					</li>
				</ul>
				<button class="iconOnlyButton" title="{{::'ldapServerOptions' | translate}}" tooltip-html-unsafe="{{::'ldapStackTooltip' | translate}}" tooltip-trigger="click"><div class="material-icons infoIcon">info</div></button>
			</nav>
		</div>
		<section data-ng-show="selectedIDP.ldapConfig.authMethod == 'bindUPN'" data-ng-if="!lite">
			<div class="webapiFormRow layout">
				<div class="staticText elipseString" title="{{::'ldapUsernameLabel' | translate}}">{{::'ldapUsernameLabel' | translate}}</div>
				<bx-input-container>
					<label class="mandatory">{{::'ldapDomainLabel' | translate}}</label>
					<input type="text" data-ng-model="selectedIDP.ldapConfig.bindSuffix" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindUPN'" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
				</bx-input-container>
			</div>
			<div class="topMargin">
				<md-switch class="md-primary" data-md-no-ink data-ng-model="handleAuthGroup" data-ng-model-options="{getterSetter:true, debounce:100}" aria-label="{{::'authGroupLabel' | translate}}" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
					{{::'authGroupLabel' | translate}}
				</md-switch>
				<div class="webapiFormRow layout" data-ng-show="selectedIDP.ldapConfig.groupAuthMethod != 'none'">
					<bx-input-container class="flex-100">
						<label class="mandatory">{{::'authGroupFilterLabel' | translate}}</label>
						<input type="text" data-ng-model="selectedIDP.ldapConfig.dynamicGroupFilter" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindUPN' && selectedIDP.ldapConfig.groupAuthMethod != 'none'" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
					</bx-input-container>
				</div>
			</div>
		</section>
		<section data-ng-show="selectedIDP.ldapConfig.authMethod == 'bindDN'" data-ng-if="!lite">
			<div class="webapiFormRow layout">
				<bx-input-container>
					<label class="mandatory">{{::'ldapPrefixLabel' | translate}}</label>
					<input type="text" data-ng-model="selectedIDP.ldapConfig.bindPrefix" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindDN'" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
				</bx-input-container>
				<div class="staticText elipseString" title="{{::'ldapUsernameLabel' | translate}}">{{::'ldapUsernameLabel' | translate}}</div>
				<bx-input-container>
					<label class="mandatory">{{::'ldapSuffixLabel' | translate}}</label>
					<input type="text" data-ng-model="selectedIDP.ldapConfig.bindSuffix" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindDN'" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
				</bx-input-container>
			</div>
			<div class="topMargin">
				<md-switch class="md-primary" data-md-no-ink data-ng-model="handleAuthGroup" data-ng-model-options="{getterSetter:true, debounce:100}" aria-label="{{::'authGroupLabel' | translate}}" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
					{{::'authGroupLabel' | translate}}
				</md-switch>
				<fieldset class="switchIndent" data-ng-show="selectedIDP.ldapConfig.groupAuthMethod != 'none'">
					<legend class="apiScreenReaderOnly">{{::'ldapSearchDNLabel' | translate}}</legend>
					<md-radio-group data-ng-model="staticAuth" aria-label="{{::'ldapBindType' | translate}}">
						<md-radio-button data-md-no-ink data-ng-value="true" class="md-primary topMargin" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">{{::'ldapStaticGroupLabel' | translate}}</md-radio-button>
						<div class="radioIndent">
							<div class="webapiFormRow layout">
								<bx-input-container>
									<label class="mandatory">{{::'ldapGroupBaseDNLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.staticGroupDN" data-ng-disabled="!staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && staticAuth" />
								</bx-input-container>
							</div>
							<div class="webapiFormRow layout">
								<bx-input-container>
									<label class="mandatory">{{::'ldapPrefixLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.staticGroupFilterPrefix" data-ng-disabled="!staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && staticAuth" />
								</bx-input-container>
								<div class="staticText elipseString" title="{{::'ldapUsernameLabel' | translate}}">{{::'ldapUserIdLabel' | translate}}</div>
								<bx-input-container>
									<label class="mandatory">{{::'ldapSuffixLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.staticGroupFilterSuffix" data-ng-disabled="!staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && staticAuth" />
								</bx-input-container>
							</div>
						</div>
						<md-radio-button data-md-no-ink data-ng-value="false" class="md-primary topMargin">{{::'ldapDynamicGroupLabel' | translate}}</md-radio-button>
						<div class="radioIndent">
							<div class="webapiFormRow layout">
								<md-input-container class="flex-100">
									<label class="mandatory">{{::'authGroupFilterLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.dynamicGroupFilter" data-ng-disabled="staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'bindDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && !staticAuth" />
								</md-input-container>
							</div>
						</div>
					</md-radio-group>
				</fieldset>
			</div>
 		</section>
		<section class="topMargin" data-ng-show="selectedIDP.ldapConfig.authMethod == 'searchDN'">

		<bx-radio-group data-ng-model="selectedIDP.ldapConfig.authenticatedBind" aria-label="{{::'ldapBindType' | translate}}">
		<bx-radio-button data-md-no-ink data-value="false" class="md-primary" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-label-text="{{::'ldapAnonMethodLabel' | translate}}">
		</bx-radio-button>
		<bx-radio-button data-md-no-ink data-value="true" class="md-primary" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-label-text="{{::'ldapAuthMethodLabel' | translate}}">
		</bx-radio-button>
		</bx-radio-group>


			<div class="webapiFormRow layout">
				<bx-input-container>
					<label>{{::'ldapAdminDNLabel' | translate}}</label>
					<input type="text" data-ng-model="selectedIDP.ldapConfig.authenticatedBindAdminDN" data-ng-disabled="!selectedIDP.ldapConfig.authenticatedBind || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" title="{{::'ldapAdminDNPlaceholder' | translate}}" />
				</bx-input-container>
				<bx-input-container>
					<label>{{::'ldapAdminDNPasswordLabel' | translate}}</label>
					<input type="password" data-ng-model="selectedIDP.ldapConfig.authenticatedBindPassword" data-ng-disabled="!selectedIDP.ldapConfig.authenticatedBind || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" />
				</bx-input-container>
			</div>
			<div class="webapiFormRow topMargin" data-ng-if="permissions['org_organizationManagement/manage'] && (isDialog || selectedIDP.orgId)">
				<button data-ng-click="testLdapAuth()" class="bx--btn bx--btn--sm" type="button">{{::'ldapTestAuthLabel' | translate}}</button>
			</div>
			<div class="webapiFormRow mdPad">
				<label class="mandatory topMargin bx--form__label">{{::'ldapBaseDNLabel' | translate}}</label>
				<div class="oneRowOnly">
					<apim-combobox id="$id + '_baseDNCombo'" item-list="baseDNList" selection="selectedIDP.ldapConfig.searchDNBase" apim-combobox-disabled="!$parent.permissions['org_organizationManagement/manage'] || (!$parent.isDialog && !$parent.selectedIDP.orgId)"></apim-combobox>
					<button class="iconOnlyButton" title="{{::'ldapBaseDNLabel' | translate}}" tooltip-html-unsafe="{{::'ldapBaseDNTooltip' | translate}}" tooltip-placement="left" tooltip-trigger="click"><div class="material-icons infoIcon">info</div></button>
				</div>
			</div>
			<div class="webapiFormRow layout">
				<bx-input-container>
					<label class="mandatory">{{::'ldapPrefixLabel' | translate}}</label>
					<input type="text" data-ng-model="selectedIDP.ldapConfig.searchDNFilterPrefix" data-ng-disabled="isLdapUsed || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'searchDN'" />
				</bx-input-container>
				<div class="staticText elipseString" title="{{::'ldapUsernameLabel' | translate}}">{{::'ldapUsernameLabel' | translate}}</div>
				<br/>
				<bx-input-container>
					<label class="mandatory">{{::'ldapSuffixLabel' | translate}}</label>
					<input type="text" data-ng-model="selectedIDP.ldapConfig.searchDNFilterSuffix" data-ng-disabled="isLdapUsed || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'searchDN'" />
				</bx-input-container>
			</div>
			<div class="topMargin" data-ng-if="!lite">
				<md-switch class="md-primary" data-md-no-ink data-ng-model="handleAuthGroup" data-ng-model-options="{getterSetter:true, debounce:100}" aria-label="{{::'authGroupLabel' | translate}}" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">
					{{::'authGroupLabel' | translate}}
				</md-switch>
				<fieldset class="switchIndent" data-ng-show="selectedIDP.ldapConfig.groupAuthMethod != 'none'">
					<legend class="apiScreenReaderOnly">{{::'ldapSearchDNLabel' | translate}}</legend>
					<md-radio-group data-ng-model="staticAuth" aria-label="{{::'ldapAuthGroup' | translate}}">
						<md-radio-button data-md-no-ink data-ng-value="true" class="md-primary topMargin" data-ng-disabled="!permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)">{{::'ldapStaticGroupLabel' | translate}}</md-radio-button>
						<div class="radioIndent">
							<div class="webapiFormRow layout">
								<md-input-container class="flex-100">
									<label class="mandatory">{{::'ldapGroupBaseDNLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.staticGroupDN" data-ng-disabled="!staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'searchDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && staticAuth" />
								</md-input-container>
							</div>
							<div class="webapiFormRow layout">
								<bx-input-container>
									<label class="mandatory">{{::'ldapPrefixLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.staticGroupFilterPrefix" data-ng-disabled="!staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'searchDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && staticAuth" />
								</bx-input-container>
								<div class="staticText elipseString" title="{{::'ldapUsernameLabel' | translate}}">{{::'ldapUserIdLabel' | translate}}</div>
								<bx-input-container>
									<label class="mandatory">{{::'ldapSuffixLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.staticGroupFilterSuffix" data-ng-disabled="!staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)"  data-ng-required="selectedIDP.ldapConfig.authMethod == 'searchDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && staticAuth" />
								</bx-input-container>
							</div>
						</div>
						<md-radio-button data-md-no-ink data-ng-value="false" class="md-primary topMargin">{{::'ldapDynamicGroupLabel' | translate}}</md-radio-button>
						<div class="radioIndent">
							<div class="webapiFormRow layout">
								<bx-input-container class="flex-100">
									<label class="mandatory">{{::'authGroupFilterLabel' | translate}}</label>
									<input type="text" data-ng-model="selectedIDP.ldapConfig.dynamicGroupFilter" data-ng-disabled="staticAuth || !permissions['org_organizationManagement/manage'] || (!isDialog && !selectedIDP.orgId)" data-ng-required="selectedIDP.ldapConfig.authMethod == 'searchDN' && selectedIDP.ldapConfig.groupAuthMethod != 'none' && !staticAuth" />
								</bx-input-container>
							</div>
						</div>
					</md-radio-group>
				</fieldset>
			</div>
		</section>
	</form>
	<div class="topExtraMargin" data-ng-if="permissions['org_organizationManagement/manage'] && (isDialog || selectedIDP.orgId)">
		<div data-ng-if="!isDialog">
			<button data-ng-click="showTestConnection()" class="bx--btn bx--btn--sm" type="button" data-ng-disabled="ldapForm.$invalid">{{::'ldapTestConnectionLabel' | translate}}</button>
		</div>
		<div data-ng-if="isDialog">
			<button data-ng-click="openTest()" class="bx--btn bx--btn--sm" type="button" data-ng-disabled="ldapForm.$invalid" data-ng-show="!revealTest">{{::'ldapTestConnectionLabel' | translate}}</button>
			<form class="testConnectionForm" name="testConnectionForm" data-ng-show="revealTest">
				<p>{{::'testConnectionText' | translate}}</p>
				<div class="layout">
					<bx-input-container>
						<label class="mandatory">{{::'username' | translate}}</label>
						<input type="text" class="mediumWidth" data-ng-model="testDetails.testUsername" data-ng-disabled="performingTest" required />
					</bx-input-container>
					<bx-input-container>
						<label class="mandatory">{{::'password' | translate}}</label>
						<input type="password" class="mediumWidth" data-ng-model="testDetails.testPassword" data-ng-disabled="performingTest" required />
					</bx-input-container>
				</div>
				<p id="{{$id}}_statusText" class="errorMessage" data-ng-show="testFailed">{{::'idpConnectionFail' | translate}}</p>
        <div class="bx--sets-of-buttons innerButtons">
          <button id="{{$parent.$id}}_ldapCloseTest" data-ng-click="closeTest()" class="bx--btn--secondary bx--btn--sm" type="button" data-ng-disabled="performingTest">{{::'close' | translate}}</button>
          <button data-ng-click="performTest()" class="bx--btn bx--btn--sm" type="button" data-ng-disabled="ldapForm.$invalid || !testDetails.testUsername || !testDetails.testPassword || performingTest">{{::'testConnectionLabel' | translate}}</button>
          <div class="loadingAnimate apiHidden" data-ng-class="{apiHidden: !performingTest}"></div>
        </div>
			</form>
		</div>
	</div>
</div>
