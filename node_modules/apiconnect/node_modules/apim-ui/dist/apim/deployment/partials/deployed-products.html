<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="webapi">
<div class="apiConsolePanel centerColumn absolutelyFabulous fullHeightMinusBanner secondaryBackground slideContainer" data-ng-class="{expanded: expanded}" data-ng-controller="DeployedProductsController as productsController">
	<div class="ng-hide" data-ng-show="!products && environment && permissions && !permissions[spaceId ? spaceId+'/space_productDeployment/view' : environment.id+'/catalog_productDeployment/view']" style="min-height:425px;">
		<div class="stickyNote">{{'noPermissionToViewProductsInThisEnv' | translate}}</div>
	</div>
	<div class="ng-hide" data-ng-show="!environment">
		<div class="stickyNote">{{::'catalog_not_exist' | translate}}</div>
	</div>
	<div data-ng-show="permissions[spaceId ? spaceId+'/space_productDeployment/view' : environment.id+'/catalog_productDeployment/view']">
		<div class="layout fullWidth searchBanner">
      <div data-search-with-options class="displayInline itsAllRelative flex bx--search bx--search-with-options" role="search">
          <bx-icon class="bx--search__icon--magnifier" icon="search"></bx-icon>
          <label for="search__input" class="bx--search__label">Search</label>
        <input style="border-top: 0;" type="search" class="bx--search__input" id="search__input" aria-label="{{'products_search' | translate}}" placeholder="{{'products_search' | translate}}" ng-change="queryChange()" data-ng-model="query" data-ng-model-options="{debounce: 200}" data-ng-disabled="!fullProductVersions.$resolved">
        <button type="reset" class="iconOnlyButton" data-ng-click="query = ''" data-ng-show="query" title="{{::'resetFilter' | translate}}"><div class="closeIcon"></div></button>
        <div data-overflow-menu class="bx--search__sort bx--overflow-menu" tabindex="0" aria-label="List of options" data-ng-init="toggleFilter = false" data-ng-class="{'bx--overflow-menu--open': toggleFilter}" data-ng-click="toggleFilter = !toggleFilter">
          <bx-icon class="bx--search__icon" icon="filter--glyph"></bx-icon>
          <div class="bx--overflow-menu__options">
            <div class="filter-pane-title displayInline">{{'deploymentState' | translate}}:</div>
            <div class="typeCheck">
              <bx-checkbox
                data-ng-model="status.pending"
                bx-prevent-default="true">
                {{::'managementStatePending' | translate}}
              </bx-checkbox>
            </div>
            <div class="typeCheck">
              <bx-checkbox
                data-ng-model="status.staged"
                bx-prevent-default="true">
                {{::'managementStateStaged' | translate}}
              </bx-checkbox>
            </div>
            <div class="typeCheck">
              <bx-checkbox
                data-ng-model="status.published"
                bx-prevent-default="true">
                {{::'managementStatePublished' | translate}}
              </bx-checkbox>
            </div>
            <div class="typeCheck">
              <bx-checkbox
                data-ng-model="status.deprecated"
                bx-prevent-default="true">
                {{::'managementStateDeprecated' | translate}}
              </bx-checkbox>
            </div>
            <div class="typeCheck">
              <bx-checkbox
                data-ng-model="status.retired"
                bx-prevent-default="true">
                {{::'managementStateRetired' | translate}}
              </bx-checkbox>
            </div>
            <div class="typeCheck">
              <bx-checkbox
                data-ng-model="status.archived"
                bx-prevent-default="true">
                {{::'managementStateArchived' | translate}}
              </bx-checkbox>
            </div>
          </div>
        </div>
      </div>
    </div>
		<div data-ng-class="{expanded: panelExpanded}">
			<div class="secondaryBackground stretch listingColumn productsCollection deployedProductsCollection bxTableBackground bxTableProductPadding">
				<div class="tableHeaderBackground bxTableHeader">
					<div class="column manageProductNameColumn bxTableProductTitleHeader">{{'apiShortName' | translate}}</div>
          <div class="column manageProductStateColumn">{{'deploymentState' | translate}}</div>
          <div class="column manageProductActionsColumn"></div>
					<div class="clearBoth"></div>
				</div>
				<div data-ng-class="{'spinner': xhrProcessing}"></div>
				<div class='emptyCollectionMessage xlargePadding' data-ng-show="!xhrProcessing && products && products.length == 0">{{visibleProductVersions | deploymentNoDescriptors:'products':spaceId}}</div>
				<div on-scroll="addNextProducts" style="height: calc(100% - 30px); overflow: scroll">
          <ul class="plans" style="margin-top: -1px;" data-ng-show="!xhrProcessing">
					  <li ng-repeat="productVersion in products = (visibleProductVersions | deploymentState: status)"
            ng-class-even="'bxTableRowEven'" ng-class-odd="'bxTableRowOdd'">
						  <apim-deployed-product-version></apim-deployed-product-version>
					  </li>
				  </ul>
        </div>
			</div>
		</div>
	</div>
</div>
</div>
