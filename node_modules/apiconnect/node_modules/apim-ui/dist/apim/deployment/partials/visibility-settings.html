<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div>
	<div class="bx--form__row">
		<div class="bx--form__row-item">
        <bx-checkbox data-ng-model="disableVisibility" data-ng-show="productVersion.deploymentState == 'published'">{{::'manageDisableVisibility' | translate}}</bx-checkbox>
      <div class="bx--select labeledSelect">
        <label for="{{$id}}_visibleToSelector" class="bx--form__label ">{{::'manageVisibleTo' | translate}}:</label>
        <div data-ng-if="plan" class="material-icons infoIcon dijitInline" tooltip="{{::'planVisibilityHelp' | translate}}" tooltip-placement="bottom">info</div>
        <div data-ng-if="!plan" class="material-icons infoIcon dijitInline" tooltip="{{::'product_visibility_help' | translate}}" tooltip-placement="bottom">info</div>
        <select id="{{$id}}_visibleToSelector" class="bx--select__input " data-ng-disabled="disableVisibility && (productVersion.deploymentState == 'published')" data-ng-model="visibleTo" data-ng-options="opt.id as opt.name for opt in visibleOptions">'
        </select>
        <bx-icon class="bx--select__arrow" icon="caret--down"></bx-icon>
      </div>
      <div data-ng-if="plan" data-ng-show="visibleTo == 'public' && !disableVisibility">{{::'planPublicVisibilityMessage' | translate}}</div>
      <div data-ng-if="plan" data-ng-show="visibleTo == 'authenticated' && !disableVisibility">{{::'planAuthenticatedVisibilityMessage' | translate}}</div>
      <div data-ng-if="!plan" data-ng-show="visibleTo == 'public' && !disableVisibility">{{::'product_public_visibility_message' | translate}}</div>
      <div data-ng-if="!plan" data-ng-show="visibleTo == 'authenticated' && !disableVisibility">{{::'product_authenticated_visibility_message' | translate}}</div>
      <div class="publishContainer" data-ng-show="visibleTo == 'custom' && $parent.tags.length > 0 && (!environment || permissions[spaceId ? spaceId + '/space_developers/view' : environment.id + '/catalog_developers/view']) && !disableVisibility" data-ng-controller="AvailabilityViewController as availabilityViewController">
        <div class="tagContainer" data-ng-class="{'undeletable': disableVisibility}">
          <ul data-ng-if="$parent.selectedOrgsVisible.length > 0" class="dijitInline simpleList">
            <li class="dijitInline" data-ng-repeat="tag in $parent.selectedOrgsVisible">
              <apim-tag class="dijitInline"></apim-tag>
            </li>
          </ul>
          <ul data-ng-if="$parent.selectedCommunitiesVisible.length > 0" class="dijitInline simpleList">
            <li class="dijitInline" data-ng-repeat="tag in $parent.selectedCommunitiesVisible">
              <apim-tag class="dijitInline communityTag"></apim-tag>
            </li>
          </ul>
          <input role="combobox" class="form-control tagChooser bx--form__row-item" data-ng-show="!disableVisibility && ($parent.selectedOrgsVisible.length + $parent.selectedCommunitiesVisible.length) < $parent.tags.length" placeholder="{{'addOrgsHere' | translate}}" title="{{'addOrgsHere' | translate}}" type="text" data-ng-model="$parent.userInputVisible" typeahead-editable="false" typeahead-on-select="$parent.orgsTagsVisibleSelected($item);" typeahead="tag.label for tag in $parent.tags | filter: $viewValue | notInArray: $parent.selectedOrgsVisible | notInArray: $parent.selectedCommunitiesVisible">
        </div>
      </div>
      <div class="visibilityTags publishContainer" data-ng-show="visibleTo == 'custom' && !environment">
        <div class="tagContainer" data-ng-class="{'undeletable': disableVisibility}">
          <ul data-ng-if="selectedOrgsVisible.length > 0" class="dijitInline simpleList">
            <li class="dijitInline" data-ng-repeat="tag in selectedOrgsVisible">
              <apim-tag class="dijitInline"></apim-tag>
            </li>
          </ul>
          <input data-ng-keypress="$event.which === 13 && addVisibilityTag($event)" role="combobox" class="form-control tagChooser" data-ng-show="!disableVisibility" placeholder="{{::'addOrgsHere' | translate}}" title="{{::'addOrgsHere' | translate}}" type="text" data-ng-model="userInputVisible">
        </div>
      </div>
    </div>
	</div>
  <div class="bx--form__row--item">
    <bx-checkbox data-ng-model="disableSubscribability" data-ng-show="productVersion.deploymentState == 'published'">{{::'manageDisableSubscribability' | translate}}</bx-checkbox>
    <div data-ng-show="!environment || permissions[spaceId ? spaceId + '/space_developers/view' : environment.id + '/catalog_developers/view']">
    <div class="bx--select labeledSelect">
      <label for="{{$id}}_subscribableBySelector" class="bx--form__label">{{::'manageSubscribable' | translate}}:</label>
      <div data-ng-if="plan" class="material-icons infoIcon dijitInline" tooltip="{{::'manageSubscribableByHelp' | translate}}" tooltip-placement="bottom">info</div>
      <div data-ng-if="!plan" class="material-icons infoIcon dijitInline" tooltip="{{::'product_subscribability_help' | translate}}" tooltip-placement="bottom">info</div>
      <select id="{{$id}}_subscribableBySelector" class="bx--select__input" data-ng-disabled="disableSubscribability && (productVersion.deploymentState == 'published')"  data-ng-model="subscribableBy" data-ng-options="opt.id as opt.name for opt in subscribeOptions">
      </select>
      <bx-icon class="bx--select__arrow" icon="caret--down"></bx-icon>
    </div>
      <div data-ng-if="plan" data-ng-show="subscribableBy == 'authenticated' && !disableSubscribability">{{::'planAuthenticatedSubscribabilityMessage' | translate}}</div>
      <div data-ng-if="!plan" data-ng-show="subscribableBy == 'authenticated' && !disableSubscribability">{{::'product_authenticated_subscribability_message' | translate}}</div>
      <div class="publishContainer" data-ng-show="subscribableBy == 'custom' && !disableSubscribability && $parent.tags.length > 0 && (!environment || permissions[spaceId ? spaceId + '/space_developers/view' : environment.id + '/catalog_developers/view'])" data-ng-controller="AvailabilitySubscribeController as availabilitySubscribeController">
        <div class="tagContainer" data-ng-class="{'undeletable': disableSubscribability}">
          <ul data-ng-if="$parent.selectedOrgsSubscribable.length > 0" class="dijitInline simpleList">
            <li class="dijitInline" data-ng-repeat="tag in $parent.selectedOrgsSubscribable">
              <apim-tag class="dijitInline"></apim-tag>
            </li>
          </ul>
          <ul data-ng-if="$parent.selectedCommunitiesSubscribable.length > 0" class="dijitInline simpleList">
            <li class="dijitInline" data-ng-repeat="tag in $parent.selectedCommunitiesSubscribable">
              <apim-tag class="dijitInline communityTag"></apim-tag>
            </li>
          </ul>
          <input role="combobox" class="form-control tagChooser" data-ng-show="!disableSubscribability && ($parent.selectedOrgsSubscribable.length + $parent.selectedCommunitiesSubscribable.length) < $parent.tags.length" placeholder="{{::'addOrgsHere' | translate}}" title="{{::'addOrgsHere' | translate}}" type="text" data-ng-model="$parent.userInputSubscribable" typeahead-editable="false" typeahead-on-select="$parent.orgsTagsSubscribableSelected($item);" typeahead="tag.label for tag in $parent.tags | filter: $viewValue | notInArray: $parent.selectedOrgsSubscribable | notInArray: $parent.selectedCommunitiesSubscribable">
        </div>
      </div>
      <div class="stickyNote" data-ng-show="visibleTo != 'custom' && subscribableBy == 'custom' && $parent.tags.length == 0 && (!environment || permissions[spaceId ? spaceId + '/space_developers/view' : environment.id + '/catalog_developers/view'])">{{::'planDeploymentNoTags' | translate}}</div>
      <div class="visibilityTags publishContainer" data-ng-show="subscribableBy == 'custom' && !environment">
        <div class="tagContainer" data-ng-class="{'undeletable': disableVisibility}">
          <ul data-ng-if="selectedOrgsSubscribable.length > 0" class="dijitInline simpleList">
            <li class="dijitInline" data-ng-repeat="tag in selectedOrgsSubscribable">
              <apim-tag class="dijitInline"></apim-tag>
            </li>
          </ul>
          <input data-ng-keypress="$event.which === 13 && addSubscribabilityTag($event)" role="combobox" class="form-control tagChooser" data-ng-show="!disableVisibility" placeholder="{{::'addOrgsHere' | translate}}" title="{{::'addOrgsHere' | translate}}" type="text" data-ng-model="userInputSubscribable">
        </div>
      </div>
    </div>
    <div class="stickyNote" data-ng-show="visibleTo == 'custom' && subscribableBy == 'custom' && $parent.tags.length == 0 && (!environment || permissions[spaceId ? spaceId + '/space_developers/view' : environment.id + '/catalog_developers/view'])">{{::'planDeploymentNoTags' | translate}}</div>
    <div class="boxout centeredBoxout" data-ng-show="productVersion.deploymentState == 'published'">{{::'product_visibility_update_not_existing' | translate}}</div>
  </div>
</div>
