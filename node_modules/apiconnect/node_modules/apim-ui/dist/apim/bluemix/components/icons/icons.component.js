/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/
// Node module: apim-ui

'use strict';

/**
  *
  * @ngdoc module
  * @name bluemix.components
  *
  * @description
  *
  * Bluemix Carbon Components module.
  *
  **/
  angular.module('bluemix.components')

/**
  *
  * @ngdoc directive
  * @name bluemix.components.directive:bxIcon
  *
  * @description
  *
  * Directive for injecting SVG icons.
  *
  * *NOTE*: the directive element will be completely replaced in the DOM so
  * things should not be attached to it other than what is documented here.
  * ng-class will also probably not work on it. Target a parent if ng-show,
  * ng-hide, or ng-if is needed.
  *
  * @example
  *
  * <bx-icon class="bx--number__icon" icon="caret--down"></bx-icon>
  *
  * @param {string} class classes to apply to the element
  * @param {string} icon the svg icon to use
  *
  **/
  .directive('bxIcon', function () {
    return {
      restrict: 'E',
      scope: {
        class: '@',
        icon: '@'
      },
      link: function (scope, element) {
        var svgNs = 'http://www.w3.org/2000/svg';
        var href = '#bx-src-icons--' + scope.icon;

        var use = document.createElementNS(svgNs, 'use');
        use.setAttributeNS( 'http://www.w3.org/1999/xlink', 'xlink:href', href);

        var svg = document.createElementNS(svgNs, 'svg');
        svg.setAttributeNS(null, 'class', scope.class);
        svg.appendChild(use);
        element.replaceWith(svg);
      }
    };
  });

