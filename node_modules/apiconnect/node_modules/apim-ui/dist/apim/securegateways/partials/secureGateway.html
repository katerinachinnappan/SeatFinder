<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div data-ng-controller="SecureGatewayController">
	<div data-ng-show="secureGatewaysLoaded && softwareInstallersLoaded">
		<form name="secureGatewayForm">
			<section class="mediumPadding">
				<div class="webapiFormRow layout">
					<md-input-container flex="20">
						<label>{{::'name' | translate}}</label>
						<input type="text" name="desc" data-ng-disabled="!permissions['org_organizationManagement/manage']" data-ng-model="selectedSecureGateway.desc" data-ng-pattern="secureGatewayNamePattern" data-ng-maxlength="255" required/>
						<div data-ng-messages="secureGatewayForm.desc.$error">
							<div data-ng-message="pattern">{{::'validateSecureGatewayNamePattern' | translate}}</div>
							<div data-ng-message="maxlength">{{::'validateSecureGatewayNameMaxLength' | translate}}</div>
							<div data-ng-message="required">{{::'validateSecureGatewayNameRequired' | translate}}</div>
						</div>
					</md-input-container>
					<md-input-container flex="10">
						<label>{{::'status' | translate}}</label>
						<input type="text" style="border:none" data-ng-model="selectedSecureGateway.status" readonly/>
					</md-input-container>
					<md-input-container flex="10">
						<label>{{::'activeClients' | translate}}</label>
						<input type="text" style="border:none" data-ng-model="selectedSecureGateway.connectedClientsArr.length" readonly/>
					</md-input-container>
					<md-input-container flex="20">
						<label>{{::'id' | translate}}</label>
						<input type="text" data-ng-model="selectedSecureGateway._id" readonly/>
					</md-input-container>
					<button class="iconOnlyButton" clipboard text="selectedSecureGateway._id">
						<div class="material-icons sg-copy-icon">content_copy</div>
					</button>
					<md-input-container flex="20">
						<label>{{::'token' | translate}}</label>
						<input type="text" data-ng-model="selectedSecureGateway.jwt" readonly/>
					</md-input-container>
					<button class="iconOnlyButton" clipboard text="selectedSecureGateway.jwt">
						<div class="material-icons sg-copy-icon">content_copy</div>
					</button>
				</div>
			</section>
			<section class="mediumPadding">
				<div class="detailsSplitSection">
					<div class="editorBar secondaryBackground">
						<h3 style="padding:8px 15px 5px 0;">{{::'secureGatewayClients' | translate}}</h3>
						<button id="setupClientButton" class="textOnlyButton" style="padding:5px 0px 5px 15px;border-left: 1px solid #e0e0e0;" data-ng-click="showSetup()" tooltip="{{::'sgTourInstallTooltip' | translate}}" tooltip-popup-delay="500" tooltip-placement="right" tooltip-trigger="installSecureGatewayTooltipEvent">
							<span class="material-icons buttonIcon">add_circle_outline</span>
							<span>{{::'setUp' | translate}}</span>
						</button>
					</div>
					<div class="mediumPadding">
						<div class="cleanTableHeader">
							<div class="column twentyColumn" tabindex="0">
								{{::'id' | translate}}
							</div>
							<div class="column halfColumn" tabindex="0">
								{{::'status' | translate}}
							</div>
						</div>
						<ul class="cleanTableBody">
							<li class="cleanTableRow" data-ng-repeat="client in selectedSecureGateway.clients">
								<div class="displayInline alignTop twentyColumn" tabindex="0">
									{{client.id}}
								</div>
								<div class="displayInline alignTop halfColumn" tabindex="0">
									<div data-ng-if="client.disconnectedAt">
										{{client.status | translate}} {{client.disconnectedAt}}
									</div>
									<div data-ng-if="!client.disconnectedAt">
										{{client.status | translate}}
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</section>
			<section class="mediumPadding">
				<div class="detailsSplitSection">
					<div class="editorBar secondaryBackground">
						<h3 style="padding:5px 15px 5px 0;">{{::'allowedHostsAndPaths' | translate}}</h3>
					</div>
					<div class="mediumPadding">
						<apim-hosts-and-paths host-list="selectedSecureGateway.allowedHosts"></apim-hosts-and-paths>
					</div>
				</div>
			</section>
			<section class="mediumPadding">
				<div class="detailsSplitSection">
					<div class="editorBar secondaryBackground">
						<h3 style="padding:5px 15px 5px 0;">{{::'deniedHosts' | translate}}</h3>
					</div>
					<div class="mediumPadding">
						<div class="cleanTableHeader">
							<div class="column twentyColumn" tabindex="0">
								{{::'host' | translate}}
							</div>
						</div>
						<ul class="cleanTableBody">
							<li class="cleanTableRow" data-ng-repeat="deniedHost in selectedSecureGateway.deniedHosts">
								<div class="displayInline alignTop twentyColumn" tabindex="0">
									{{deniedHost}}
								</div>
							</li>
						</ul>
					</div>
				</div>
			</section>
		</form>
	</div>
</div>
