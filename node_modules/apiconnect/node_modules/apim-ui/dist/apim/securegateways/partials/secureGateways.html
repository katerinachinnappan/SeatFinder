<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="webapi">
<section apic-save-key="saveSecureGateway()" class="environmentsCollection centerColumn absolutelyFabulous hidden-focus" data-ng-controller="SecureGatewaysController">
	<div data-ng-class="{ 'spinner': !secureGatewaysLoaded || !softwareInstallersLoaded }"></div>
	<div data-ng-show="secureGatewaysLoaded && softwareInstallersLoaded">
		<div class="actionSection apiSelfClear">
			<span class="actionLabel">{{::'secureGateways' | translate}}</span>
			<span id="sgTechPreviewTT" class="techPreview" tooltip="{{:: 'techPreviewTooltip' | translate}}" tooltip-placement="bottom" tooltip-trigger="showTechTooltipEvent">
				{{::'techPreview' | translate}}
			</span>
			<div class="buttonArea">
        <button class="bx--btn" id="addSecureGatewayButton" data-ng-click="addSecureGateway($event)" data-ng-disabled="!secureGateways.$resolved" data-ng-show="permissions['org_organizationManagement/manage']" tooltip="{{:: 'sgTourCreateTooltip' | translate}}" tooltip-popup-delay="500" tooltip-placement="left" tooltip-trigger="createSecureGatewayTooltipEvent">
          {{::'add' | translate}}
          <bx-icon class="bx--btn--right-icon__icon" icon="add--glyph"></bx-icon>
        </button>
				<button class="highVisButton iconOnlyButton material-icons" title="{{::'save' | translate}}" data-ng-click="saveSecureGateway()" data-ng-disabled="saveDisabled" data-ng-show="permissions['org_organizationManagement/manage']">save</button>
				<button class="highVisButton iconOnlyButton material-icons" title="{{::'refresh' | translate}}" data-ng-click="refresh()">refresh</button>
			</div>
		</div>
		<div class="sg-hint" data-ng-show="secureGateways.length === 0 && permissions['org_organizationManagement/manage']">
			<div class="sg-hint-text">
				<p>{{'secureGatewayHint' | translate}}</p>
				<p class="sg-hint-subtext">{{'secureGatewayHintText' | translate}}</p>
      </div>
    </div>
		<div class="sg-gateways-column">
			<ul>
				<li data-ng-repeat="secureGateway in secureGateways track by secureGateway._id">
					<div class="roleList">
						<div tabindex="0" class="roleListItem" data-ng-class="{selected: $parent.selectedSecureGateway._id === secureGateway._id}" data-ng-keypress="$parent.selectedSecureGateway = secureGateway" data-ng-click="$parent.selectedSecureGateway = secureGateway">
							<div class="dijitInline" data-ng-show="permissions['org_organizationManagement/manage']">
								<md-switch class="md-primary" data-md-no-ink data-ng-model="secureGateway.enabled" data-ng-disabled="changingStatus" data-ng-change="confirmDisableSecureGateway($index)" aria-label="{{secureGateway.desc}}"></md-switch>
							</div>
							<div class="dijitInline">
								<h4 class="truncate" style="width: 110px;">{{secureGateway.desc}}</h4>
							</div>
							<div style="margin-top:4px;" class="dijitInline floatRight" data-ng-show="permissions['org_organizationManagement/manage']">
								<button class="iconOnlyButton" title="{{::'ttDelete' | translate}}" data-ng-disabled="beingDeleted" data-ng-click="confirmDeleteSecureGateway($index)">
									<div class="material-icons">delete</div>
								</button>
							</div>
							<div style="margin-top:5px" class="dijitInline floatRight">
								<div data-ng-if="secureGateway.connectedClientsArr.length == 0">
									<span class="redCircle">X</span>
								</div>
							</div>
						</div>
					</div>
				</li>
			</ul>
		</div>
		<div class="sg-details-page">
			<apim-secure-gateway data-ng-show="secureGateways.length > 0"></apim-secure-gateway>
		</div>
		<apim-secure-gateway-guided-tour></apim-secure-gateway-guided-tour>
	</div>
</section>
</div>
