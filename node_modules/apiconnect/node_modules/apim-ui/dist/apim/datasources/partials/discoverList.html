<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="secondaryBackground centerColumn">
  <div class="expanded">
    <div class="centerColumn listingColumn stretch amp-margin">
      <div class="detailsContainer discovery-list" layout-padding>
        <form name="vm.discoverForm" ng-submit="vm.submit()">
          <div class="detailsSection">
            <div class="bx--form__legend">{{::'DSDTitle'|translate}}: {{::vm.dbName}}</div>
          </div>

          <div class="detailsSection">
            <div class="boxout" translate="DSDTablesSelect"></div>
            <div class="detailsSplitSection">
              <div flex>
                <div ng-class="{spinner:vm.xhrProcessing}"></div>
              </div>

              <div ng-show="!vm.xhrProcessing">
                <div class="flex bx--search" role="search">
                    <bx-icon class="bx--search__icon--magnifier" icon="search"></bx-icon>
                    <label for="search__input" class="bx--search__label">Search</label>
                  <input type="search"
                         class="bx--search__input"
                         id="search__input"
                         aria-label="{{'DSDTablesSearch'|translate}}"
                         placeholder="{{'DSDTablesSearch'|translate}}"
                         ng-model="query">
                  <button type="reset" class="iconOnlyButton" ng-click="query=''" ng-show="query" title="{{::'resetFilter'|translate}}">
                    <div class="closeIcon"></div>
                  </button>
                </div>
                <div class="bx--responsive-table-container">
                  <table class="bx--responsive-table">
                    <thead class="bx--table-head tableHeaderBackground bxTableHeader">
                      <tr class="bx--table-row">
                        <th class="bx--table-header bxTablePaddingLeft"></th>
                        <th class="bx--table-header" translate="DSDTablesName"></th>
                        <th class="bx--table-header" translate="DSDTablesSchema"></th>
                        <th class="bx--table-header" translate="DSDTablesSelected"></th>
                        <th class="bx--table-header bxTablePaddingRight"></th>
                      </tr>
                    </thead>
                    <tbody class="bx--table-body">
                      <tr class="bx--table-row bx--parent-row" ng-hide="vm.tables.length">
                        <td colspan="5" translate="DSDTablesNone"></td>
                      </tr>
                      <tr ng-repeat="table in vm.tables|filter:query"
                        ng-disabled="table.dupModel"
                        title="{{::(table.dupModel?'DSDDuplicateModel':'')|translate}}"
                        ng-class-even="'bxTableRowEven'" ng-class-odd="'bxTableRowOdd'">
                        <td class="bxTablePaddingLeft">
                          <md-checkbox aria-label="{{::'select'|translate}}"
                            ng-checked="vm.selectedProps[table.name]"
                            ng-disabled="table.dupModel" class="md-primary"
                            ng-click="vm.tableClick(table)"
                          />
                        </td>
                        <td>
                          {{::table.name}}
                          <a ui-sref="model({id:table.dupModel})"
                            ng-if="table.dupModel" class="bx--link">
                            <em>({{::'DSDDuplicateModel'|translate}})</em>
                          </a>
                        </td>
                        <td ng-bind="::table.schema"></td>
                        <td>
                          <span class="small">
                            {{vm.numSelected(table.name)}}
                            {{::'DSDTablesSelected'|translate}}
                          </span>
                        </td>
                        <td class="bxTablePaddingRight">
                          <md-button ng-click="vm.selectProps(table)" md-no-ink
                            ng-disabled="table.dupModel" aria-label="DSDSelectProps"
                            translate="DSDSelectProps" />
                        </td>
                      </tr>
                    </tbody>
                  </table>

                </div>
                  <div class="pull-right bx--sets-of-buttons">
                    <a ui-sref="datasources" class="bx--btn--secondary bx--btn--sm" role="button">{{::'cancel' | translate}}</a>
                    <button class="bx--btn bx--btn--sm" type="submit"
                      ng-disabled="vm.discoverForm.$pristine" aria-label="DSDGenerate"
                      translate="DSDGenerate"></button>
                  </div>
              </div>

            </div>

          </div>
        </form>
      </div>
    </div>
  </div>
</div>
