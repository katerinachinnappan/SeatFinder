<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="spinnerOverlay" data-ng-if="modifyingObject">
  <div class="spinner"></div>
</div>
<h2 class="bx--modal-content__heading">{{::dialogTitle | translate}}</h2>
<button class="bx--modal__close" type="button" data-modal-close data-ng-click="cancel()">
  <bx-icon class="bx--modal__close--icon" icon="close"></bx-icon>
</button>
<div class="bx--modal-content">
  <div data-ng-controller="SSLProfileCtrl as sslProfileController">
    <form name="$parent.sslProfileForm" class="bx--form">
      <bx-input-container>
        <label>{{::"title" | translate}}</label>
        <input data-ng-model="selectedSSLProfile.title" required/>
      </bx-input-container>
      <bx-input-container>
        <label>{{::"name" | translate}}</label>
        <input data-ng-model="selectedSSLProfile.name" required/>
      </bx-input-container>
      <bx-input-container>
        <label>{{::"description" | translate}}</label>
        <textarea data-ng-model="selectedSSLProfile.description"></textarea>
      </bx-input-container>
      <bx-checkbox data-ng-show="context == 'cmc'" data-ng-model="selectedSSLProfile.public" aria-label="{{::'sslPublic' | translate}}">{{::'sslPublic' | translate}}</bx-checkbox>
      <section class="certificatesList" style="border-top: none;" data-ng-show="!hideCertDetails">
        <h3>{{::'presentCertificate' | translate}}</h3>
        <div style="margin: 0 0 10px 18px;">
          <apic-upload-cert data-ng-controller="KeyCertUploadController"></apic-upload-cert>
        </div>
        <div class="tableHeaderBackground">
          <span class="column sortable nameRow">{{::'name' | translate}}</span>
          <span class="column sortable issuedByRow">{{::'issuedBy' | translate}}</span>
          <span class="column sortable expiresOnRow">{{::'expiresOn' | translate}}</span>
          <span class="column actionRow"></span>
        </div>
        <div data-ng-repeat="cert in selectedSSLProfile.certs | filter: {certType:'PUBLIC'}">
          <apim-certdetails></apim-certdetails>
        </div>
        <div data-ng-repeat="cert in selectedSSLProfile.certs | filter: {certType:'INTERMEDIATE'}">
          <apim-certdetails></apim-certdetails>
        </div>
      </section>
      <section class="boxout" data-ng-show="!hideCertDetails">
        <md-switch class="md-primary" data-md-no-ink data-ng-model="selectedSSLProfile.mutualAuth" aria-label="{{::'mutualAuth' | translate}}">
          {{::'mutualAuth' | translate}}
        </md-switch>
      </section>
      <section class="certificatesList" data-ng-show="!hideCertDetails">
        <h3>{{::'trustStore' | translate}}</h3>
        <div style="margin: 0 0 10px 18px;">
          <apic-upload-cert data-ng-controller="TrustCertUploadController"></apic-upload-cert>
        </div>
        <div class="tableHeaderBackground">
          <span class="column sortable nameRow">{{::'name' | translate}}</span>
          <span class="column sortable issuedByRow">{{::'issuedBy' | translate}}</span>
          <span class="column sortable expiresOnRow">{{::'expiresOn' | translate}}</span>
          <span class="column actionRow"></span>
        </div>
        <div data-ng-repeat="cert in selectedSSLProfile.certs | filter: {certType:'CLIENT'}">
          <apim-certdetails></apim-certdetails>
        </div>
      </section>
      <section class="boxout" data-ng-show="!hideCertDetails">
        <div class="webapiLabel" data-ng-click="revealProtocols = !revealProtocols">
          <span>{{::'protocolsAndCiphers' | translate}}</span>
          <button class="iconOnlyButton" title="{{::'moreInformation' | translate}}" tabindex="0">
            <div class="webapiIcon maximizeIcon transition200" data-ng-class="{rotate180: revealProtocols}"></div>
          </button>
        </div>
        <div class="protocolsCiphersSection" data-ng-show="revealProtocols">
          <div class="bx--form__row-item">
            <bx-checkbox id="{{$id}}_protocol_ssl3" data-ng-checked="selectedSSLProfile.protocols.indexOf('SSLv3') > -1" data-ng-click="toggleProtocol('SSLv3')">{{::'protocolSSLv3' | translate}}</bx-checkbox>
          </div>
            <div class="bx--form__row-item">
              <bx-checkbox id="{{$id}}_protocol_tls1" data-ng-checked="selectedSSLProfile.protocols.indexOf('TLSv1') > -1" data-ng-click="toggleProtocol('TLSv1')">{{::'protocolTLSv1' | translate}}</bx-checkbox>
            </div>
            <div class="bx--form__row-item">
              <bx-checkbox id="{{$id}}_protocol_tls11" data-ng-checked="selectedSSLProfile.protocols.indexOf('TLSv11') > -1" data-ng-click="toggleProtocol('TLSv11')">{{::'protocolTLSv11' | translate}}</bx-checkbox>
            </div>
            <div class="bx--form__row-item">
              <bx-checkbox id="{{$id}}_protocol_tls12" data-ng-checked="selectedSSLProfile.protocols.indexOf('TLSv12') > -1" data-ng-click="toggleProtocol('TLSv12')">{{::'protocolTLSv12' | translate}}</bx-checkbox>
            </div>
        </div>
      </section>
      <section class="boxout" data-ng-show="!hideCertDetails">
        <div class="webapiLabel" data-ng-click="revealFeatures = !revealFeatures">
          <span>{{::'client_features' | translate}}</span>
          <button class="iconOnlyButton" title="{{::'moreInformation' | translate}}" tabindex="0">
            <div class="webapiIcon maximizeIcon transition200" data-ng-class="{rotate180: revealFeatures}"></div>
          </button>
        </div>
        <div class="protocolsCiphersSection" data-ng-show="revealFeatures">
          <bx-checkbox id="{{$id}}_feature_sni" data-ng-checked="selectedSSLProfile.features.indexOf('DISABLE_SNI') == -1" data-ng-click="toggleFeature('DISABLE_SNI')">{{::'featureSNI' | translate}}</bx-checkbox>
        </div>
      </section>
    </form>
  </div>
</div>
<div class="bx--modal__buttons">
  <div class="bx--modal__buttons-container">
    <button data-ng-click="cancel()" class="bx--btn--secondary" type="button" data-ng-disabled="modifyingObject">{{::'cancel' | translate}}</button>
    <button data-ng-click="commit()" class="bx--btn" type="button" data-ng-disabled="!sslProfileForm.$valid || modifyingObject">{{::'save' | translate}}</button>
  </div>
</div>
