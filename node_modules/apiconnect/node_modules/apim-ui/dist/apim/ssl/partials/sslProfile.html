<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="sslProfile" data-ng-controller="SSLProfileCtrl as sslProfileController">
    <div data-ng-show="sslProfilesLoaded">
        <form name="sslProfileForm">
			<section class="inputArea">
				<div class="webapiFormRow layout">
					<md-input-container class="flex-50">
						<label>{{::'displayName' | translate}}</label>
						<input type="text" data-ng-model="selectedSSLProfile.title" data-ng-disabled="!permissions['org_organizationManagement/manage']" ng-keypress="titleKeyPressed()" apim-auto-focus required />
					</md-input-container>
					<md-input-container class="flex-50">
						<label>{{::'name' | translate}}</label>
						<input type="text" data-ng-model="selectedSSLProfile.name" data-ng-disabled="!permissions['org_organizationManagement/manage']" data-ng-pattern="/^[a-z]+[a-z0-9]*(\-[a-z0-9]+)*$/" ng-trim="false" required />
					</md-input-container>
				</div>
				<div class="webapiFormRow layout">
					<md-input-container class="flex-100">
						<label>{{::'description' | translate}}</label>
						<input type="text" data-ng-model="selectedSSLProfile.description" data-ng-disabled="!permissions['org_organizationManagement/manage']" />
					</md-input-container>
				</div>
				<div class="webapiFormRow">
					<div class="inlineInput"  data-ng-show="context == 'cmc'">
					    <md-checkbox md-no-ink class="md-primary" data-ng-model="selectedSSLProfile.public" aria-label="{{::'sslPublic' | translate}}">{{::'sslPublic' | translate}}</md-checkbox>
					</div>
				</div>
			</section>
            <section class="certificatesList">
        		<h3>{{::'presentCertificate' | translate}}</h3>
        		<button data-ng-show="permissions['org_organizationManagement/manage']" class="iconOnlyButton" title="{{::'uploadCertificate' | translate}}" data-ng-click="showKeyUpload()" tabindex="0"><span class="material-icons">add_circle_outline</span></button>
        		<div class="tableHeaderBackground">
        			<span class="column sortable nameRow">{{::'name' | translate}}</span>
        			<span class="column sortable issuedByRow">{{::'issuedBy' | translate}}</span>
        			<span class="column sortable expiresOnRow">{{::'expiresOn' | translate}}</span>
        			<span class="column actionRow"></span>
        		</div>
        		<div data-ng-repeat="cert in selectedSSLProfile.certs | filter: {certType:'PUBLIC'}">
        			<apim-certdetails></apim-certdetails>
        		</div>
        		<div data-ng-repeat="cert in selectedSSLProfile.certs | filter: {certType:'INTERMEDIATE'}">
        			<apim-certdetails></apim-certdetails>
        		</div>
        	</section>
			<section class="boxout">
				<md-switch class="md-primary" data-md-no-ink data-ng-model="selectedSSLProfile.mutualAuth" data-ng-disabled="!permissions['org_organizationManagement/manage']" aria-label="{{::'mutualAuth' | translate}}">
					{{::'mutualAuth' | translate}}
				</md-switch>
			</section>
            <section class="certificatesList">
        		<h3>{{::'trustStore' | translate}}</h3>
        		<button data-ng-show="permissions['org_organizationManagement/manage']" class="iconOnlyButton" title="{{::'uploadCertificate' | translate}}" data-ng-click="showTrustUpload()" tabindex="0"><span class="material-icons">add_circle_outline</span></button>
        		<div class="tableHeaderBackground">
        			<span class="column sortable nameRow">{{::'name' | translate}}</span>
        			<span class="column sortable issuedByRow">{{::'issuedBy' | translate}}</span>
        			<span class="column sortable expiresOnRow">{{::'expiresOn' | translate}}</span>
        			<span class="column actionRow"></span>
        		</div>
        		<div data-ng-repeat="cert in selectedSSLProfile.certs | filter: {certType:'CLIENT'}">
        			<apim-certdetails></apim-certdetails>
        		</div>
        	</section>
			<section class="boxout">
				<div class="webapiLabel" data-ng-click="revealProtocols = !revealProtocols">
					<span>{{::'protocolsAndCiphers' | translate}}</span>
					<button class="iconOnlyButton" title="{{::'moreInformation' | translate}}" tabindex="0">
						<div class="webapiIcon maximizeIcon transition200" data-ng-class="{rotate180: revealProtocols}"></div>
					</button>
				</div>
				<div class="protocolsCiphersSection" data-ng-show="revealProtocols">
					<md-checkbox md-no-ink class="md-primary" id="{{$id}}_protocol_ssl3" data-ng-checked="selectedSSLProfile.protocols.indexOf('SSLv3') > -1" data-ng-click="toggleProtocol('SSLv3')" data-ng-disabled="!permissions['org_organizationManagement/manage']">{{::'protocolSSLv3' | translate}}</md-checkbox>
					<md-checkbox md-no-ink class="md-primary" id="{{$id}}_protocol_tls1" data-ng-checked="selectedSSLProfile.protocols.indexOf('TLSv1') > -1" data-ng-click="toggleProtocol('TLSv1')" data-ng-disabled="!permissions['org_organizationManagement/manage']">{{::'protocolTLSv1' | translate}}</md-checkbox>
					<md-checkbox md-no-ink class="md-primary" id="{{$id}}_protocol_tls11" data-ng-checked="selectedSSLProfile.protocols.indexOf('TLSv11') > -1" data-ng-click="toggleProtocol('TLSv11')" data-ng-disabled="!permissions['org_organizationManagement/manage']">{{::'protocolTLSv11' | translate}}</md-checkbox>
					<md-checkbox md-no-ink class="md-primary" id="{{$id}}_protocol_tls12" data-ng-checked="selectedSSLProfile.protocols.indexOf('TLSv12') > -1" data-ng-click="toggleProtocol('TLSv12')" data-ng-disabled="!permissions['org_organizationManagement/manage']">{{::'protocolTLSv12' | translate}}</md-checkbox>
				</div>
			</section>
          <section class="boxout">
            <div class="webapiLabel" data-ng-click="revealClientFeatures = !revealClientFeatures">
                <span>{{::'client_features' | translate}}</span>
                <button class="iconOnlyButton" title="{{::'moreInformation' | translate}}" tabindex="0">
                    <div class="webapiIcon maximizeIcon transition200" data-ng-class="{rotate180: revealClientFeatures}"></div>
                </button>
            </div>
            <div class="protocolsCiphersSection" data-ng-show="revealClientFeatures">
                <div>
                    <md-checkbox md-no-ink class="md-primary" id="{{$id}}_feature_sni" data-ng-checked="selectedSSLProfile.features.indexOf('DISABLE_SNI') == -1" data-ng-click="toggleFeature('DISABLE_SNI')">{{::'featureSNI' | translate}}</md-checkbox>
                    <button class="iconOnlyButton" title="{{::'client_features_SNI_info' | translate}}" tooltip="{{::'client_features_SNI_info' | translate}}" tooltip-placement="right" tooltip-trigger="click"><div class="material-icons infoIcon">info</div></button>
                </div>
            </div>
          </section>
          <section class="boxout">
            <div class="webapiLabel" data-ng-click="revealServerFeatures = !revealServerFeatures">
              <span>{{::'server_features' | translate}}</span>
              <button class="iconOnlyButton" title="{{::'moreInformation' | translate}}" tabindex="0">
                <div class="webapiIcon maximizeIcon transition200" data-ng-class="{rotate180: revealServerFeatures}"></div>
              </button>
            </div>
            <div class="protocolsCiphersSection" data-ng-show="revealServerFeatures">
              <div>
                <md-checkbox md-no-ink class="md-primary" id="{{$id}}_feature_renegotiation" data-ng-checked="selectedSSLProfile.features.indexOf('DISABLE_RENEGOTIATION') === -1" data-ng-click="toggleFeature('DISABLE_RENEGOTIATION')">{{::'featureRenegotiation' | translate}}</md-checkbox>
                <button class="iconOnlyButton" title="{{::'server_features_TLS_info' | translate}}" tooltip="{{::'server_features_TLS_info' | translate}}" tooltip-placement="right" tooltip-trigger="click"><div class="material-icons infoIcon">info</div></button>
              </div>
            </div>
          </section>
        </form>
    </div>
</div>
