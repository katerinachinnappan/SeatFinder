<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<h2 class="bx--modal-content__heading" role="banner" aria-label="{{::'subscriptionsSubscribeToPlan' | translate}}">
  {{::'subscriptionsSubscribeToPlan' | translate}}
</h2>
<button title="Close" class="bx--modal__close" type="button" data-ng-click="cancel();" tabindex="-1">
  <bx-icon class="bx--modal__close--icon" icon="close"></bx-icon>
</button>
<div class="bx--model-content">
  <input type="text" name="blahblah" data-ng-model="planVersionQuery" title="{{::'find' | translate}}" placeholder="{{::'find' | translate}}" class='bx--text__input' />
  <button	class="iconOnlyButton" title="{{::'find' | translate}}"><span class="searchIcon"></span></button>
  <div class="primaryBorder">
    <div class="tableHeaderBackground minimalPlanVersion" style="border-top: none;">
      <div class="column manageProductPlanNameColumn">{{'plansPlural' | translate}}</div>
    </div>
    <div data-ng-show="loadingProducts">
      <div class="spinner"></div>
    </div>
    <ul data-ng-if="!loadingProducts" class="simpleList boundedList productVersions">
      <li data-ng-if="loadingPlanVersions" class="spinner"></li>
      <li class="mediumPadding" data-ng-if="!loadingPlanVersions && filteredProductVersions.length == 0">{{productVersions | deploymentProductReplaceNoDescriptors: planVersionQuery}}</li>
      <li data-ng-if="productVersions.length > 0" data-ng-repeat="otherProductVersion in filteredProductVersions = (productVersions | publishedProductVersions | communityNotAlreadySubscribed: subscriptions: application | deploymentNameOnlyQuery: planVersionQuery)">
        <div class="tableHeaderBackground minimalPlanVersion" style="font-size: medium;" data-ng-bind-html="otherProductVersion.document.info.title + ' ' + otherProductVersion.productVersion | highlight: planVersionQuery"></div>
        <ul class="planVersions">
          <li data-ng-repeat="(planName, planVersion) in otherProductVersion.document.plans">
            <div class="planVersion secondaryBorder bottom minimalPlanVersion" data-ng-click="planVersionSelected(planName, otherProductVersion)" data-ng-class="{'backgroundDisabled': xhrProcessing, 'selected': selectedPlanName == planName && selectedProductVersion.deploymentPackageId == otherProductVersion.deploymentPackageId}">
              <div class="displayInline alignTop manageProductPlanNameColumn">
                <div class="documentName" data-ng-bind-html="planName | highlight: planVersionQuery"></div>
              </div>
            </div>
          </li>
        </ul>
      </li>
    </ul>
    <div data-ng-if="subscribingToPlan" class="spinner"></div>
  </div>
</div>
<div class="bx--modal__buttons" role="contentinfo" aria-label="{{::'footerSectionLabel' | translate}}">
  <div class="bx--modal__buttons-container">
    <button class="bx--btn--secondary" type="button" data-ng-click="cancel()">
      {{::'cancel' | translate}}
    </button>
    <button class="bx--btn" type="button" data-ng-disabled="!selectedPlanName || subscribingToPlan" data-ng-click="subscribeToPlan(selectedPlanName, selectedProductVersion)">
      {{::'subscriptionsSubscribe' | translate}}
    </button>
  </div>
</div>
