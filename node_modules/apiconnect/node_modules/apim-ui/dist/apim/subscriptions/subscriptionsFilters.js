/********************************************************* {COPYRIGHT-TOP} ***
 * Licensed Materials - Property of IBM
 * 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
 *
 * (C) Copyright IBM Corporation 2015, 2017
 *
 * All Rights Reserved.
 * US Government Users Restricted Rights - Use, duplication or disclosure
 * restricted by GSA ADP Schedule Contract with IBM Corp.
 ********************************************************** {COPYRIGHT-END} **/
// Node module: apim-ui

'use strict';

/* Filters */

var subscriptions = angular.module('apim.subscriptions');

subscriptions.filter('subscriptionsQuery', function() {
  return function (subscriptions, query) {
    if(!subscriptions) return subscriptions;
    if(!query) return subscriptions;
    var term = query.toLowerCase();
    return subscriptions.filter(function(subscription) {
      return (subscription.application.appName && subscription.application.appName.toLowerCase().indexOf(term) > -1) ||
        (subscription.application.clientId && subscription.application.clientId.toLowerCase().indexOf(term) > -1) ||
        (typeof subscription.consumerOrg == "string" && subscription.consumerOrg.toLowerCase().indexOf(term) > -1);
    });
  };
});

subscriptions.filter('noSubscriptions', ['translateFilter', function(translateFilter) {
  return function (subscriptions) {
    if (!subscriptions || subscriptions.length == 0) return translateFilter('subscriptionsNoSubscriptionsFound');
    return translateFilter('subscriptionsNoMatchingSubscriptions');
  };
}]);

