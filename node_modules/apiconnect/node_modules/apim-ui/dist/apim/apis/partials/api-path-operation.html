<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="detailsSplitSection operation layout-column" style="padding:0; margin: 10px;">
  <div class="editorBar operationTitle" style="padding-right: 0px;" data-ng-click="$ctrl.setExpanded()">
    <div class="method {{::$ctrl.operation['$$key']}}">{{::$ctrl.operation['$$key'] | uppercase}}</div>
    <div class="path">{{$ctrl.path['$$key']}}</div>
    <bx-checkbox aria-label="{{::'api_operation_deprecated' | translate}}" style="padding: 5px" data-ng-model="$ctrl.operation.deprecated">
      <span>{{::"api_operation_deprecated" | translate}}</span>
    </bx-checkbox>
    <button aria-label="{{::'api_operation_delete' | translate}}" title="{{::'api_operation_delete' | translate}}" class="iconOnlyButton"
      data-ng-click="$ctrl.delete($event)">
                  <div class="material-icons">delete</div>
                </button>
  </div>

  <div class="operationRenderer marginLeft10 marginRight10" data-ng-if="$ctrl.isExpanded()">
    <bx-input-container>
      <label>{{::'api_tag_add' | translate}}</label>
      <input name="tag" data-ng-model="$ctrl.tag.newTag"
        data-ng-blur="$ctrl.addTag($event)"
        data-ng-keydown="($event.which === 13)?$ctrl.addTag($event):0"
        typeahead="tag for tag in $ctrl.tagArray | filter:$viewValue" />
    </bx-input-container>
    <ul class="tagContainer" style="margin-top: 15px;">
      <li data-ng-repeat="tag in $ctrl.operation.tags track by tag">
        <div class="dijitInline tagNode">
          <div class="dijitInline tag smallTag tag12" value="{{::tag}}">
            <label>{{::tag}}</label>
            <div class="dijitInline deleteTagButton" style="margin-top: -3px;">
              <button title="{{::'api_tag_remove' | translate}}" aria-label="{{::'api_tag_remove' | translate}}" class="iconOnlyButton"
                data-ng-click="$ctrl.removeTag($event, tag)">
                <div class="closeIcon"></div>
              </button>
            </div>
          </div>
        </div>
      </li>
    </ul>
    <bx-input-container class="bx--form__row-item">
      <label>{{::"api_operation_summary" | translate}}</label>
      <input aria-label="{{::'api_operation_summary' | translate}}"
        data-ng-model="$ctrl.operation.summary" data-ng-model-options="{debounce:500}"/>
    </bx-input-container>

    <bx-input-container class="bx--form__row-item">
      <label>{{::"api_operation_id" | translate}}</label>
      <input area-label="{{::'api_operation_id' | translate}}"
        data-ng-model="$ctrl.$operationId"
        data-ng-model-options="{debounce:500, getterSetter: true, updateOn: 'blur'}"/>
    </bx-input-container>

    <bx-input-container>
      <label>{{::"api_operation_description" | translate}}</label>
      <input area-label="{{::'api_operation_description' | translate}}"
        data-ng-model="$ctrl.operation.description" data-ng-model-options="{debounce:500}" />
    </bx-input-container>

    <!--  Operation Parameters -->
     <div style="margin-bottom: 30px;">
      <api-path-parameters-list
        data-parameters-container="$ctrl.operation">
      </api-path-parameters-list>
    </div>

    <!--  Operation Responses -->
    <div style="margin-bottom: 30px;">
      <api-path-operation-responses-list propertyTypes="allTypes" responses="$ctrl.operation.responses"></api-path-operation-responses-list>
    </div>

    <!--  Operation Security -->
    <api-path-operation-security data-operation = "$ctrl.operation" data-api-security-defns="$ctrl.apiSecurityDefns">
    </api-path-operation-security>

    <!-- Operation Content types -->
    <div data-ng-controller="ContentTypeController">
      <!-- Consumes -->
      <div class="bx--form__legend">{{::'api_consumes' | translate}}</div>
      <div class="bx--form__row-item">
        <md-checkbox md-no-ink aria-label="{{::'api_consume_inherit' | translate}}" data-ng-model="$inheritConsumes" data-ng-model-options="{getterSetter:true}" class="md-primary">
          {{::'api_consume_inherit' | translate}}
        </md-checkbox>
      </div>
      <div data-ng-show="$ctrl.operation.consumes">
        <apic-consumes></apic-consumes>
      </div>

      <!-- Produces -->
      <div class="bx--form__legend">{{::'api_produces' | translate}}</div>
      <div class="bx--form__row-item">
        <md-checkbox md-no-ink aria-label="{{::'api_produce_inherit' | translate}}" data-ng-model="$inheritProduces" data-ng-model-options="{getterSetter:true}" class="md-primary">
          {{::'api_produce_inherit' | translate}}
        </md-checkbox>
      </div>
      <div data-ng-show="$ctrl.operation.produces">
        <apic-produces></apic-produces>
      </div>
    </div>
  </div>
</div>
