<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="detailsSplitSection" style="padding-bottom:0;">
    <div class="editorBar secondaryBackground" data-ng-click="defCtrl.setExpanded()">
        <div class="flex"><h3>{{defCtrl.definitionName()}}</h3></div>
        <apic-component-mover data-ng-if="features.components"
          style="margin: 5px 15px 0 0;"
          data-reference-source="defCtrl.definition"
          data-reference-scope="defCtrl.definitions">
        </apic-component-mover>
        <button title="{{::'assembly_edit_inline_definition' | translate}}" aria-label="{{::'assembly_edit_inline_definition' | translate}}" class="iconOnlyButton" data-ng-click="defCtrl.launchInlineEditor($event)">
          <div class="material-icons">edit</div>
        </button>
        <button title="{{::'api_definition_delete' | translate}}" aria-label="{{::'api_definition_delete' | translate}}" class="iconOnlyButton" data-ng-click="defCtrl.delete($event)">
          <div class="material-icons">delete</div>
        </button>
    </div>
    <div data-ng-show="tempName" class="editorBar stickyNote" style="vertical-align:middle; line-height:24px;">
        <div class="material-icons">warning</div>
        <div class="flex" style="margin-left:10px;">{{::'api_definition_duplicate_name' | translate}}</div>
    </div>
  <div class="marginLeft10 marginRight10" data-ng-if="defCtrl.isExpanded()">
    <bx-input-container>
      <label for="{{$id}}_definition_name_{{name}}">{{::'api_definition_name' | translate}}</label>
      <input id="{{$id}}_definition_name_{{name}}" required
        data-ng-model="defCtrl.definitionName"
        data-ng-model-options="{getterSetter:true, updateOn:'blur'}"
      />
    </bx-input-container>

    <div class="bx--select labeledSelect">
      <label class="bx--form__label">{{::'api_definition_type' | translate}}</label>
      <select class="bx--select__input" aria-label="{{::'api_property_type' | translate}}" data-ng-model="defCtrl.$propertyType" data-ng-model-options="{getterSetter:true, debounce:500}">
        <option class="bx--select__option" ng-repeat="(typeId, type) in defCtrl.propertyTypes track by typeId" data-ng-value="defCtrl.getTypeValue(type)">{{::type.name}}</option>
      </select>
      <bx-icon class="bx--select__arrow" icon="caret--down"></bx-icon>
    </div>

    <div class="bx--select labeledSelect" data-ng-if="defCtrl.definition.type == 'array'">
      <label class="bx--form__label">{{::"api_definition_array_type" | translate}}</label>
      <select class="bx--select__input" aria-label="{{::'api_definition_array_type' | translate}}" data-ng-model="defCtrl.$arrayType" data-ng-model-options="{getterSetter:true, debounce:500}">
        <option class="bx--select__option" ng-repeat="(typeId, type) in defCtrl.allTypes track by typeId" data-ng-value="defCtrl.getTypeValue(type)">{{type.name}}</option>
      </select>
      <bx-icon class="bx--select__arrow" icon="caret--down"></bx-icon>
    </div>
    <bx-input-container>
      <label>{{::"api_property_description" | translate}}</label>
      <textarea aria-label="{{::'api_property_description' | translate}}" data-ng-model="defCtrl.definition.description" data-ng-model-options="{debounce:500}"></textarea>
    </bx-input-container>
    <div class="editorBar" data-ng-if="defCtrl.isComplicatedDefinition()">
        <div class="stickyNote">{{::'api_definition_complicated' | translate}}</div>
    </div>
    <div data-ng-if="!defCtrl.isComplicatedDefinition()">
      <div data-ng-if="defCtrl.definition.type == 'object' || !defCtrl.definition.type">
        <api-definition-property-list
          definition="defCtrl.definition"
          properties="defCtrl.definition.properties"
          property-types="defCtrl.propertyTypes"
          all-types="defCtrl.allTypes"
          on-change="defCtrl.updateProperties(properties)"
        >
        </api-definition-property-list>
    </div>
  </div>
</div>
