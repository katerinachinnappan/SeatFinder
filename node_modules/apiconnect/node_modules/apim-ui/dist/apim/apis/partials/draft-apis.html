<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="apis centerColumn secondaryBackground slideContainer absolutelyFabulous fullHeightMinusBanner" data-ng-controller="ApisController">
  <div class="layout fullWidth searchBanner">
        <div class="dropdown" dropdown data-is-open="addAPIOpen" data-ng-show="offlineMode || permissions['org_draftApis/edit']">
          <button id="addApi" class="bx--btn" role="button" dropdown-toggle>
            {{::'add' | translate}}
            <bx-icon class="bx--btn--right-icon__icon" icon="add--glyph"></bx-icon>
          </button>
            <ul class="dropdown-menu tooltipContainer exclude-this" role="menu" onkeypress="addAPIOpen = true;"
                title="{{::'apiSingular' | translate}}">
                <li role="menuitem"><a href="" data-ng-click="createApi();">{{::'composeAPI' | translate}}</a></li>
                <li role="menuitem" data-ng-if="!features.experimental"><a href="" data-ng-click="createApi(true);">{{::'composeOauthAPILabel' |
                    translate}}</a></li>
                <li role="menuitem" data-ng-if="features.offlineWSDL"><a href="" data-ng-click="createWsdlApi();">{{::'composeSOAPAPILabel'
                    | translate}}</a></li>
                <li role="separator" class="divider"></li>
                <li role="menuitem"><a href="" data-ng-click="createSwaggerApi();">{{::'composeImportSwaggerLabel' |
                    translate}}</a></li>
                <li role="menuitem" id="importSampleApi" ng-if="isSaaS"
                    tooltip="{{'importSampleApiTooltip' | translate}}" tooltip-popup-delay="500"
                    tooltip-placement="right" tooltip-trigger="importApiTooltipEvent"><a href=""
                                                                                         data-ng-click="openImportSampleAPIModal()">{{::'importSampleApiLabel'
                    | translate}}</a></li>
            </ul>
        </div>
        <div data-search-with-options class="displayInline itsAllRelative flex bx--search bx--search-with-options" role="search">
            <bx-icon class="bx--search__icon--magnifier" icon="search"></bx-icon>
            <label for="search__input" class="bx--search__label">Search</label>
            <input type="search" class="bx--search__input" id="search__input"
                   aria-label="{{::'apis_search' | translate}}" placeholder="{{::'apis_search' | translate}}"
                   data-ng-model="query" data-ng-disabled="!apis.$resolved" data-ng-model-options="{'debounce': 500}">
            <button type="reset" class="iconOnlyButton" data-ng-click="query = ''" data-ng-show="query"
                    title="{{::'resetFilter' | translate}}">
                <div class="closeIcon"></div>
            </button>
          <div data-overflow-menu class="bx--search__sort bx--overflow-menu" tabindex="0" aria-label="List of options" data-ng-init="toggleFilter = false" data-ng-class="{'bx--overflow-menu--open': toggleFilter}" data-ng-click="toggleFilter = !toggleFilter" data-ng-if="!offlineMode">
            <bx-icon class="bx--search__icon" icon="filter--glyph"></bx-icon>
            <div class="bx--overflow-menu__options"><div class="filter-pane-title displayInline">{{::'apiType' | translate}}:</div>
                <div class="typeCheck">
                  <bx-checkbox
                    data-ng-change="trackFiltering()"
                    data-ng-model="typeFilterStates.REST"
                    bx-prevent-default="true">
                    {{::'apiTypeREST' | translate}}
                  </bx-checkbox>
                </div>
                <div class="typeCheck">
                  <bx-checkbox
                    data-ng-change="trackFiltering()"
                    data-ng-model="typeFilterStates.SOAP"
                    bx-prevent-default="true">
                    {{::'apiTypeSOAP' | translate}}
                  </bx-checkbox>
                </div>
                <div class="typeCheck">
                  <bx-checkbox
                    data-ng-change="trackFiltering()"
                    data-ng-model="typeFilterStates.OAUTH"
                    bx-prevent-default="true">
                    {{::'apiTypeOauth' | translate}}
                  </bx-checkbox>
                </div>
            </div>
          </div>
        </div>
    </div>
    <div class="createhintdiv" ng-if="isSaaS" ng-show="!xhrProcessing && apis.length == 0">
        <div class="createhinttext">
            <p>{{'createHint' | translate}}</p>
            <p class="subtext">{{'createHintsubtext' | translate}} <a href="" data-ng-click="importWeatherAPI()">{{'createhintlink'
                | translate}}</a>
            </p>
            <div data-ng-class="{'spinner':importingApi}" data-ng-show="importingApi"></div>
        </div>
    </div>
  <div data-ng-class="{expanded: panelExpanded}">
    <div class="listingColumn apisCollection stretch amp-margin" ng-show="!isSaaS || (!xhrProcessing && filteredApis.length > 0)">
      <div class="floatRight">
        <pagination style="margin: 0px;" data-ng-show="totalItems > pageSize" boundary-links="true" rotate="false" data-ng-change="pageChanged(currentPage)" total-items="totalItems" data-ng-model="currentPage" class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" items-per-page="pageSize" max-size="3"></pagination>
      </div>
      <div class="clearBoth"></div>
      <div class="bx--responsive-table-container">
        <table class="bx--responsive-table">
          <thead class="bx--table-head tableHeaderBackground bxTableHeader">
            <tr class="bx--table-row">
              <th class="bx--table-header bxTablePaddingLeft">{{::'api_title' | translate}}</th>
              <th class="bx--table-header">{{::'apiLastModified' | translate}}</th>
              <th class="bx--table-header">{{::'apiType' | translate}}</th>
              <th class="bx--table-header"></th>
            </tr>
          </thead>
          <tbody class="bx--table-body" data-ng-show="!xhrProcessing && filteredApis && filteredApis.length > 0">
            <tr class="bx--table-row bx--parent-row" ng-class-even="'bx--parent-row--even'" data-ng-repeat="apiVersion in filteredApis = (apis | apiTitleQuery: query | apiTag: selectedTags: allTags: tags: favourites | apiType: typeFilterStates | orderBy: ['info.title', '-info.version'])" data-ng-controller="ApiVersionController">
              <td class="bxTablePaddingLeft">
                <a class="documentNameLink" href="{{apiVersion | apiLink}}" data-ng-bind-html="apiVersion.info.title | highlight: query"></a>
                <span>{{apiVersion.info.version}}</span>
                <span style="margin-left: 10px;" data-ng-if="apiVersion.file">[{{apiVersion.file}}]</span>
              </td>
              <td>{{apiVersion.updatedAt | since}}</td>
              <td>{{apiTypeLookup[apiVersion.protocol]}}</td>
              <td>
                <button class="iconOnlyButton material-icons notFavouriteIcon" data-ng-click="setFavourite('api', apiVersion, false, apiVersion.info['x-ibm-name'] + ':' + apiVersion.info.version)" data-ng-show="!isFavourite('api', apiVersion, apiVersion.info['x-ibm-name'] + ':' + apiVersion.info.version)" data-ng-if="!offlineMode" title="{{::'addToFavouritesSpecific2' | translate:apiVersion.info}}" aria-label="{{::'addToFavouritesSpecific2' | translate:apiVersion.info}}">star</button>
                <button class="iconOnlyButton material-icons favouriteIcon" data-ng-click="setFavourite('api', apiVersion, false, apiVersion.info['x-ibm-name'] + ':' + apiVersion.info.version)" data-ng-show="isFavourite('api', apiVersion, apiVersion.info['x-ibm-name'] + ':' + apiVersion.info.version)" title="{{::'removeFromFavouritesSpecific2' | translate:apiVersion.info}}" data-ng-if="!offlineMode" aria-label="{{::'removeFromFavouritesSpecific2' | translate:apiVersion.info}}">star</button>
                <button class="iconOnlyButton material-icons" data-ng-disabled="beingDeleted" title="{{::'ttDelete' | translate}}" data-ng-click="delete(apiVersion)" data-ng-show="offlineMode || permissions['org_draftApis/edit']">delete</button>
              </td>
            </tr>
          </tbody>
        </table>
        <div data-ng-class="{'spinner': xhrProcessing}"></div>
        <div class='emptyCollectionMessage xlargePadding' data-ng-show="!xhrProcessing && filteredApis && filteredApis.length == 0">{{apis | noApis}}</div>
      </div>
    </div>
  </div>
</div>
