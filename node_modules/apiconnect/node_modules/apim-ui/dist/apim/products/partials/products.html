<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="webapi">
<div class="centerColumn secondaryBackground slideContainer absolutelyFabulous fullHeightMinusBanner" data-ng-controller="ProductsController">
    <div class="tint layout fullWidth">
        <div class="displayInline itsAllRelative flex">
            <input style="border-top: 0;" type="search" aria-label="{{'apis_search' | translate}}" placeholder="{{'products_search' | translate}}" data-ng-model="query" data-ng-disabled="!products.$resolved"/>
            <button type="reset" class="iconOnlyButton" data-ng-click="query = ''" data-ng-show="query" title="{{::'resetFilter' | translate}}"><div class="closeIcon"></div></button>
        </div>
        <div class="displayInline secondaryBorder borderBottom filterIconContainer">
			<button class="iconOnlyButton" title="{{'showHideRightPanel' | translate}}" data-ng-click="panelExpanded = !panelExpanded"><div class="filterIcon" data-ng-class="{'filtered': filtered}"></div></button>
        </div>
    </div>
	<div data-ng-class="{'spinner': !products || xhrProcessing}"></div>
	<div data-ng-show="products && !xhrProcessing" data-ng-class="{'expanded': panelExpanded}" class="secondaryBackground" style="top:28px;">
        <div class="dropdown mediumPadding" dropdown data-is-open="addProductOpen" style="line-height: 32px;">
            <button class="mediumButton apiCreateButton productCreateButton textOnlyButton dropdown-toggle" role="button" title="{{'realProductSingular' | translate}}" style="margin-top: -4px;" dropdown-toggle><div class="addButtonIconClass"></div><div class="buttonLabel">{{'realProductSingular' | translate}}</div></button>
            <ul class="dropdown-menu" role="menu" onkeypress="addProductOpen = true;" title="{{'realProductSingular' | translate}}">
                <li role="menuitem"><a href="" data-ng-click="createProduct();">{{'composeProduct' | translate}}</a></li>
                <li role="menuitem"><a href="" data-ng-click="import();">{{'importProductYaml' | translate}}</a></li>
            </ul>
        </div>
		<div class="listingColumn" style="padding:20px;">
			<table>
				<thead>
					<tr>
						<th class="fullWidth">{{'product_title' | translate}}</th>
						<th>{{'versionLastModified' | translate}}</th>
						<th>{{'categories' | translate}}</th>
						<th>{{'product_actions' | translate}}</th>
					</tr>
				</thead>
				<tbody>
					<tr data-ng-repeat="product in filteredProducts = (products | apiTitleQuery: query | apiTag: selectedTags | orderBy: ['info.title', '-info.version'])" data-ng-controller="ProductVersionController">
						<td class="fullWidth"><a data-ng-bind-html="product.info.title | highlight: query" href="#/design/products/editor/{{product.id}}"></a>&nbsp;<span>{{product.info.version}}</span></td>
						<td>{{product.updatedAt | since}}</td>
						<td>
							<ul data-ng-show="!isOffline()" class="displayInline simpleList tagContainer">
								<li class="dijitInline" data-ng-repeat="tag in productTags = (product | tagsForProduct: allTags: tags: favourites)">
									<apim-tag class="dijitInline compactTag"></apim-tag>
								</li>
								<li class="dijitInline">
									<div class="dijitInline dropdown" dropdown data-is-open="tagDropdownOpen" data-ng-show="permissions['org_draftProducts/edit']">
										<button class="mediumButton textOnlyButton dropdown-toggle" title="{{'addCategory' | translate}}" role="button" style="margin-top:-2px; font-size:24px;" dropdown-toggle>+</button>
										<ul class="dropdown-menu simpleList tagContainer tagDropdown pull-right" aria-label="{{'addTaglabel' | translate}}" role="menu" onkeypress="tagDropdownOpen = true;">
											<li role="menuitem" class="clickable" data-ng-keypress="assignTag(tag, product);" data-ng-click="assignTag(tag);" data-ng-repeat="tag in tags | notInArrayByField: productTags: 'value' | excludeUntagged">
												<apim-tag></apim-tag>
											</li>
											<li role="menuitem" data-ng-click="$event.stopPropagation();" title="{{'createNewTagPlaceholder' | translate}}">
												<input data-ng-keypress="createTag($event, product);" title="{{'createNewTagPlaceholder' | translate}}" placeholder="{{'createNewTagPlaceholder' | translate}}" style="padding: 5px; width: 148px; margin-top: 3px;" data-ng-model="newTag" maxlength="100" required>
											</li>
										</ul>
									</div>
								</li>
							</ul>
						</td>
						<td>
							<button class="iconOnlyButton"  title="{{'addToFavourites' | translate}}" data-ng-click="(isFavourite('product', product) ? deleteTag({value:'Favorite', label:'Favorite'}) : assignTag({value:'favourite', label:'Favorite'}))"><div data-ng-show="!isFavourite('product', product)" class="notFavouriteIcon" ng-if="!offlineMode"></div><div data-ng-show="isFavourite('product', product)" class="favouriteIcon" ng-if="!offlineMode"></div></button>
							<div class="displayInline buttonAndLabel" style="position: relative; text-align: center;" dropdown data-is-open="moreActionsDropdownOpen" title="{{'moreActions' | translate}}">
								<button id="{{$id}}_moreActions" title="{{'moreActions' | translate}}" role="button" class="iconOnlyButton dropdown-toggle" dropdown-toggle><div class="showMoreIcon"></div></button>
								<ul class="dropdown-menu" data-ng-class="{'pull-right':!isMobile()}" style="padding:10px; text-align:left;" role="menu" title="{{'moreActions' | translate}}" onkeypress="moreActionsDropdownOpen = true;">
									<li role="menuitem">
										<a href="" data-ng-click="delete(product);">{{'delete' | translate}}</a>
									</li>
								</ul>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div><div class="filterColumn whiteBackground stretch secondaryBorder" style="top: 27px; left: auto;">
			<div class="tagContainer">
				<h2 class="displayInline">{{'tags' | translate}}</h2>
				<div>
					<button data-ng-click="selectAllTags(true);" class="textOnlyButton">{{'all' | translate}}</button><button data-ng-click="selectAllTags(false);" style="margin-left: 10px;" class="textOnlyButton">{{'none' | translate}}</button>
				</div>
				<div class="verticallySpaced" data-ng-repeat="tag in tags">
					<input style="vertical-align: middle;" type="checkbox" class="checkBoxInput" title="{{tag.label}}" data-ng-change="trackFiltering()" data-ng-model="selectedTags[tag.value]">
					<apim-tag style="vertical-align: middle;"></apim-tag>
				</div>
			</div>
		</div>
	</div>


	<!-- <div class="dijitInline majorColumnLeft whiteBackground fullHeight" style="display: inline-table;">
		<div data-ng-class="{'spinner': xhrProcessing}"></div>
		<div data-ng-show="products && !xhrProcessing">
			<div class="draftProductsCollection" style="padding-top: 10px;" data-ng-class="{permissionDraftProductsEdit: permissions['org_draftProducts/edit']}">
				<h2 class="floatLeft" style="margin-right: 10px;" data-ng-show="!xhrProcessing && filteredProducts && filteredProducts.length">{{filteredProducts.length | translatePlurality:'productCount':'count'}}</h2>
				<div class="floatLeft" style="margin-top: -2px">
					<div class="dropdown dijitInline" dropdown data-is-open="addProductOpen" style="line-height: 32px;">
						<button class="mediumButton apiCreateButton productCreateButton textOnlyButton dropdown-toggle" role="button" title="{{'realProductSingular' | translate}}" style="margin-top: -4px;" dropdown-toggle><div class="addButtonIconClass"></div><div class="buttonLabel">{{'realProductSingular' | translate}}</div></button>
						<ul class="dropdown-menu" role="menu" onkeypress="addProductOpen = true;" title="{{'realProductSingular' | translate}}">
							<li role="menuitem"><a href="" data-ng-click="createProduct();">{{'composeProduct' | translate}}</a></li>
							<li role="menuitem"><a href="" data-ng-click="import();">{{'importProductYaml' | translate}}</a></li>
						</ul>
					</div>
				</div>
				<div class="floatRight">
					<div class="searchCollection displayInline unifiedSearch">
						<input class="dijitInline filterBox searchInput" data-ng-model="query" type="text" spellcheck="false" title="{{'find' | translate}}" placeholder="{{'find' | translate}}"><button
						class="iconOnlyButton" title="{{'find' | translate}}"><span class="searchIcon"></span></button>
					</div>
					<button data-ng-if="!isOffline()" class="iconOnlyButton" data-ng-class="{active: panelExpanded}" title="{{'showHideRightPanel' | translate}}" data-ng-click="panelExpanded = !panelExpanded"><div class="panelSlideIcon"></div></button>
				</div>
				<div class="clearBoth"></div>
				<ul class="productsCollection" data-ng-class="{'spinner': xhrProcessing}">
					<li><div class='emptyCollectionMessage xlargePadding' data-ng-show="!xhrProcessing && filteredProducts && filteredProducts.length == 0">{{products | noProducts}}</div></li>
					<li data-ng-repeat="product in filteredProducts = (products | unique: 'info.name': true | orderBy: orderProp: orderDirection)">
						<apim-product></apim-product>
					</li>
				</ul>
			</div>
		</div>
	</div><div data-ng-show="products && !xhrProcessing" class="dijitInline minorColumnRight">
		<div class="mediumPadding tagContainer">
			<h2 class="displayInline">{{'tags' | translate}}</h2>
			<div>
				<button data-ng-click="selectAllTags(true);" class="textOnlyButton">{{'all' | translate}}</button><button data-ng-click="selectAllTags(false);" style="margin-left: 10px;" class="textOnlyButton">{{'none' | translate}}</button>
			</div>
			<div class="verticallySpaced" data-ng-repeat="tag in tags">
				<input style="vertical-align: middle;" type="checkbox" class="checkBoxInput" title="{{tag.label}}" data-ng-model="selectedTags[tag.value]">
				<apim-tag style="vertical-align: middle;"></apim-tag>
			</div>
		</div>
	</div> -->
</div>
</div>
