<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="products centerColumn secondaryBackground slideContainer absolutelyFabulous fullHeightMinusBanner" data-ng-controller="ProductsController">
  <div class="layout fullWidth searchBanner">
    <div class="dropdown" dropdown data-is-open="addProductOpen" data-ng-show="offlineMode || permissions['org_draftProducts/edit']">
      <button class="bx--btn" role="button" title="{{::'product_add' | translate}}" dropdown-toggle>
        {{::'add' | translate}}
        <bx-icon class="bx--btn--right-icon__icon" icon="add--glyph"></bx-icon>
      </button>
      <ul class="dropdown-menu exclude-this" role="menu" onkeypress="addProductOpen = true;" title="{{'realProductSingular' | translate}}">
        <li role="menuitem"><a href="" data-ng-click="createProduct();">{{'composeProduct' | translate}}</a></li>
        <li role="separator" data-ng-if="!offlineMode" class="divider"></li>
        <li role="menuitem" data-ng-if="!offlineMode"><a href="" data-ng-click="import();">{{'importProductYaml' | translate}}</a></li>
      </ul>
    </div>
    <div class="displayInline itsAllRelative flex bx--search" role="search">
      <bx-icon class="bx--search__icon--magnifier" icon="search"></bx-icon>
      <label for="search__input" class="bx--search__label">Search</label>
      <input type="search" class="bx--search__input" id="search__input" aria-label="{{'products_search' | translate}}" placeholder="{{'products_search' | translate}}" data-ng-model="query" data-ng-disabled="!products.$resolved">
      <button type="reset" class="iconOnlyButton" data-ng-click="query = ''" data-ng-show="query" title="{{::'resetFilter' | translate}}">
        <div class="closeIcon"></div>
      </button>
    </div>
  </div>
  <div class="expanded">
    <div class="listingColumn stretch amp-margin">
      <div class="clearBoth"></div>
      <div class="bx--responsive-table-container">
        <table class="bx--responsive-table">
          <thead class="bx--table-head tableHeaderBackground bxTableHeader">
            <tr class="bx--table-row">
              <th class="bx--table-header bxTablePaddingLeft">{{::'assembly_title' | translate}}</th>
              <th class="bx--table-header">{{::'assemblyLastModified' | translate}}</th>
              <th class="bx--table-header"></th>
            </tr>
          </thead>
          <tbody class="bx--table-body" data-ng-show="!xhrProcessing && filteredProducts && filteredProducts.length > 0">
            <tr class="bx--table-row bx--parent-row" ng-class-even="'bx--parent-row--even'" data-ng-repeat="productVersion in filteredProducts = (products | productTitleQuery: query | productTag: selectedTags: allTags: tags: favourites | orderBy: ['info.title', '-info.version'])" data-ng-controller="ProductVersionController">
              <td class="bxTablePaddingLeft">
                <a class="documentNameLink" href="#/design/products/editor/{{productVersion.info.name}}:{{productVersion.info.version | urlEncode}}" data-ng-bind-html="productVersion.info.title | highlight: query"></a>
                <span>{{productVersion.info.version}}</span>
                <span style="margin-left: 10px;" data-ng-if="productVersion.file">[{{productVersion.file | pathToFilename}}]</span>
              </td>
              <td>{{productVersion.updatedAt | since}}</td>
              <td>
                <button class="iconOnlyButton material-icons notFavouriteIcon" data-ng-click="setFavourite('product', productVersion, false, productVersion.info.name + ':' + productVersion.info.version)" data-ng-show="!isFavourite('product', productVersion, productVersion.info.name + ':' + productVersion.info.version)" data-ng-if="!offlineMode" title="{{::'addToFavouritesSpecific2' | translate:productVersion.info}}" aria-label="{{::'addToFavouritesSpecific2' | translate:productVersion.info}}">star</button>
                <button class="iconOnlyButton material-icons favouriteIcon" data-ng-click="setFavourite('product', productVersion, false, productVersion.info.name + ':' + productVersion.info.version)" data-ng-show="isFavourite('product', productVersion, productVersion.info.name + ':' + productVersion.info.version)" title="{{::'removeFromFavouritesSpecific2' | translate:productVersion.info}}" data-ng-if="!offlineMode" aria-label="{{::'removeFromFavouritesSpecific2' | translate:productVersion.info}}">star</button>
                <button class="iconOnlyButton material-icons" data-ng-disabled="beingDeleted" title="{{::'ttDelete' | translate}}" data-ng-click="delete()" data-ng-show="offlineMode || permissions['org_draftProducts/edit']">delete</button>
              </td>
            </tr>
          </tbody>
        </table>
        <div data-ng-class="{'spinner': xhrProcessing}"></div>
        <div class='emptyCollectionMessage xlargePadding' data-ng-show="!xhrProcessing && filteredProducts && filteredProducts.length == 0">{{products | noProducts}}</div>
      </div>
    </div>
  </div>
</div>
