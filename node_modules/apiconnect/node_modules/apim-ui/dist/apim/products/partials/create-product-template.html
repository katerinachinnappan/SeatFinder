<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div class="detailsSection">
    <div class="bx--form__legend" data-ng-show="offlineMode">{{::'product_create_template' | translate}}</div>
    <div class="bx--form__fieldset" data-ng-show="offlineMode" style="margin-bottom: 2%">
        <div>
            <div class="bx--form__row-item">
                <div class="bx--select labeledSelect">
                  <label class="bx--form__label" for="cptSelector">{{::'product_create_template_label' | translate}}</label>
                  <select id="cptSelector" class="bx--select__input" data-ng-model="$parent.productTemplate">
                    <option class="bx--select__option" value="__default_product__" selected>{{::'product_create_template_default' | translate}}</option>
                    <option class="bx--select__option" data-ng-repeat="(templateName, templateString) in customProductTemplates" value="{{templateName}}">{{templateName.split("/").pop()}}</option>
                  </select>
                  <bx-icon class="bx--select__arrow" icon="caret--down"></bx-icon>
                </div>
            </div>
        </div>
    </div>
    <div class="bx--form__legend">{{::'api_info' | translate}}</div>
    <div class="bx--form__fieldset">
        <div>
            <bx-input-container>
                <label>{{::'product_title' | translate}}</label>
                <input apim-auto-focus title="{{::'product_title' | translate}}" class="marginBottom10 createProductName" required data-ng-model="newProduct.title" autofocus/>
            </bx-input-container>
        </div>
        <div>
            <bx-input-container>
                <label>{{::'product_name' | translate}}</label>
                <input title="{{::'product_name' | translate}}" class="marginBottom10 createProductName" data-ng-model="newProduct.name" required data-ng-pattern="/^[A-Za-z0-9-]+$/" ng-trim="false"/>
            </bx-input-container>
        </div>
        <div>
            <bx-input-container>
                <label>{{::'product_version' | translate}}</label>
                <input title="{{::'product_version' | translate}}" class="marginBottom10 createProductVersion" required data-ng-model="newProduct.version"/>
            </bx-input-container>
        </div>
    </div>
    <div data-ng-show="permissions['<<_deploymentAnyEnv_>>/stage'] || permissions['<<_deploymentAnyEnv_>>/manage'] || permissions['{{environments[0].id}}/<<_deploymentAnySpace_>>/stage']">
	    <div data-ng-show="!hidePublishOption" class="bx--form__legend">{{::'publishing' | translate}}</div>
	    <div data-ng-show="!hidePublishOption" class="bx--form__fieldset">
        <bx-checkbox data-ng-model="publishOptions.doPublish" id="publish-checkbox">{{ ::'generateAndPublish' | translate}}</bx-checkbox>
	    </div>
	    <div data-ng-if="publishOptions.doPublish">
        <div class="displayInline itsAllRelative flex fullWidth bx--search" role="search">
            <bx-icon class="bx--search__icon--magnifier" icon="search"></bx-icon>
            <label for="search__input" class="bx--search__label">Search</label>
          <input type="search" class="bx--search__input" id="search__input" aria-label="{{::'importSearch' | translate}}" placeholder="{{::'catalogs_only_search' | translate}}" data-ng-model="catalogQuery">
          <button type="reset" class="iconOnlyButton smallerAdjustments" data-ng-click="catalogQuery = ''" data-ng-show="catalogQuery" title="{{::'resetFilter' | translate}}"><div class="closeIcon"></div></button>
        </div>
	        <table class="scrollableTable">
	            <thead>
	            <tr>
	                <th>{{ ::'name' | translate}}</th>
	                <th>{{ ::'server' | translate}}</th>
	            </tr>
	            </thead>
	            <tbody data-ng-if="!offlineMode">
	            <tr ng-repeat="publishTarget in publishTargets | filter: catalogQuery" ng-click="publishOptions.publishTarget = publishTarget;" ng-class="{selected: publishOptions.publishTarget && publishTarget === publishOptions.publishTarget}">
	                <td data-ng-bind-html="publishTarget.displayAs | highlight: catalogQuery"></td>
	                <td data-ng-bind-html="publishTarget.invokeUrl | highlight: catalogQuery"></td>
	            </tr>
	            </tbody>
	            <tbody data-ng-if="offlineMode" data-ng-controller="StagingController">
	                <tr ng-repeat="target in bluemixStagingTargets | filter: catalogQuery" ng-click="publishOptions.publishTarget = target;" ng-class="{selected: publishOptions.publishTarget && target === publishOptions.publishTarget}">
	                    <td data-ng-bind-html="target.info.catalog.name | highlight: catalogQuery"></td>
	                    <td data-ng-bind-html="target.info.org.displayName | highlight: catalogQuery"></td>
	                </tr>
	                <tr ng-repeat="target in otherStagingTargets | filter: catalogQuery" ng-click="publishOptions.publishTarget = target;" ng-class="{selected: publishOptions.publishTarget && target === publishOptions.publishTarget}">
	                    <td data-ng-bind-html="target.info.catalog.name | highlight: catalogQuery"></td>
	                    <td data-ng-bind-html="target.info.server.host | highlight: catalogQuery"></td>
	                </tr>
	            </tbody>

	        </table>
	    </div>
    </div>
</div>
