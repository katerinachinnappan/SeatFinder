<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<h2 class="bx--modal-content__heading" role="banner" aria-label="{{::'manageMigrateTitleSingular' | translate}}">
  {{::'manageMigrateTitleSingular' | translate}}
</h2>
<button title="Close" class="bx--modal__close" type="button" data-ng-click="cancel()" tabindex="-1">
  <bx-icon class="bx--modal__close--icon" icon="close"></bx-icon>
</button>
<div class="bx--modal-content webapi">
	<div style="margin-bottom: 15px;">{{::'manageMigrateTarget' | translate}}</div>
	<div class="searchCollection unifiedSearch" style="margin-bottom: 15px;">
		<input class="bx--text__input" data-ng-model="planVersionQuery" type="text" spellcheck="false" title="{{::'find' | translate}}" placeholder="{{::'find' | translate}}"><button
			class="iconOnlyButton" title="{{::'find' | translate}}"><span class="searchIcon"></span></button>
	</div>
	<div class="primaryBorder">
		<div class="tableHeaderBackground minimalPlanVersion" style="border-top: none;">
			<div class="column manageProductPlanNameColumn">{{'plansPlural' | translate}}</div>
		</div>
		<div data-ng-if="loadingProducts">
			<div class="spinner"></div>
		</div>
		<ul data-ng-if="!loadingProducts" class="simpleList boundedList productVersions">
			<li data-ng-repeat="otherProductVersion in filteredProductVersions = (products | deploymentNameOnlyQuery: planVersionQuery | publishedProductVersionsExcludingPlan: productVersion)">
				<div class="tableHeaderBackground minimalPlanVersion" style="font-size: medium;">
					{{otherProductVersion.document.info.title}}&nbsp;&nbsp;{{otherProductVersion.productVersion}}
				</div>
				<ul class="planVersions">
					<li data-ng-repeat="planVersion in otherProductVersion.dependents.PLANVERSION | otherPublishedPlansArray: productVersion: otherProductVersion: subscription.plan.name">
						<apim-deployed-product-plan data-ng-click="planVersionSelected(planVersion.planName, otherProductVersion)" class="minimalPlanVersion"></apim-deployed-product-plan>
					</li>
				</ul>
				<!--ul class="planVersions">
					<li data-ng-repeat="(planName, planVersion) in otherProductVersion.document.plans | otherPublishedPlans: productVersion: otherProductVersion: subscription.plan.name">
						<apim-deployed-product-plan data-ng-click="planVersionSelected(planName, otherProductVersion)" class="minimalPlanVersion"></apim-deployed-product-version>
					</li>
				</ul-->
			</li>
		</ul>
		<div class="mediumPadding" data-ng-if="!loadingProducts && filteredProductVersions.length == 0">{{productVersions | deploymentProductReplaceNoDescriptors: planVersionQuery}}</div>
	</div>
</div>
<div class="bx--modal__buttons" role="contentinfo" aria-label="{{::'footerSectionLabel' | translate}}">
  <div class="bx--modal__buttons-container">
    <button class="bx--btn--secondary" type="button" data-ng-click="cancel()">{{::'cancel' | translate}}</button>
    <button class="bx--btn" type="button" data-ng-disabled="!selectedPlanName" data-ng-click="migrateVersion(selectedPlanName, selectedProductVersion)">{{::'manageMigrateAction' | translate}}</button>
  </div>
</div>
