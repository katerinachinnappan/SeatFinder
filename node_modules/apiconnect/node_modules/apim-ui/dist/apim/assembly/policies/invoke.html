<!--
/********************************************************* {COPYRIGHT-TOP} ***
* Licensed Materials - Property of IBM
* 5725-Z22, 5725-Z63, 5725-U33, 5725-Z63
*
* (C) Copyright IBM Corporation 2017
*
* All Rights Reserved.
* US Government Users Restricted Rights - Use, duplication or disclosure
* restricted by GSA ADP Schedule Contract with IBM Corp.
********************************************************** {COPYRIGHT-END} **/
-->
<div data-ng-controller="TLSProfileController as ctrl" class="infoSection">
    <fieldset data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly">
        <md-input-container>
            <label>{{::"assemblyTitle" | translate}}</label>
            <input data-ng-model="selectedNode.title" data-ng-model-options="{debounce:200}"/>
        </md-input-container>
        <md-input-container>
            <label>{{::"assemblyDescription" | translate}}</label>
            <textarea data-ng-model="selectedNode.description" data-ng-model-options="{debounce:200}"></textarea>
        </md-input-container>
        <md-input-container>
            <label>{{::"policy.invoke.property.target-url.label" | translate}}</label>
            <input data-ng-model="selectedNode['target-url']" apim-context-value required data-ng-model-options="{debounce:200}"/>
            <div class="assemblyDescription">{{::"policy.invoke.property.target-url.description" | translate}}</div>
        </md-input-container>
        <md-checkbox data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly" style="margin: 10px 3px;" md-no-ink aria-label="{{::'policy.invoke.property.secure-gateway.label' | translate}}" data-ng-model="selectedNode['secure-gateway']" data-ng-model-options="{debounce: 200}" class="md-primary">
            <span>{{::'policy.invoke.property.secure-gateway.label' | translate}}</span>
        </md-checkbox>
        <div class="assemblyDescription">{{::"policy.invoke.property.secure-gateway.description" | translate}}</div>
        <div>
            <label ng-style="tlsStyle" style="padding-left: 3px;" for="$id + '_tlsprofile'">{{::"policy.invoke.property.tls-profile.label" | translate}}</label>
            <apim-combobox id="$id + '_tlsprofile'" item-list="ctrl.tlsProfiles" selection="selectedNode['tls-profile']" apim-combobox-disabled="selectedNode['secure-gateway']"></apim-combobox>
            <div ng-style="tlsStyle" class="assemblyDescription">{{::"policy.invoke.property.tls-profile.description" | translate}}</div>
        </div>
        <md-input-container>
            <label>{{::"policy.invoke.property.timeout.label" | translate}}</label>
            <input type="number" data-ng-model="selectedNode['timeout']" apim-context-value data-ng-model-options="{debounce:200}"/>
            <div class="assemblyDescription">{{::"policy.invoke.property.timeout.description" | translate}}</div>
        </md-input-container>

        <md-input-container>
            <label>{{::"policy.invoke.property.username.label" | translate}}</label>
            <input apim-not-empty data-ng-model="selectedNode['username']" apim-context-value data-ng-model-options="{debounce:200}" autocomplete="false"/>
            <div class="assemblyDescription">{{::"policy.invoke.property.username.description" | translate}}</div>
        </md-input-container>

        <!-- hack to deal with browsers no longer honor autocomplete attr -->
        <input type='text' name='disable-auto-complete-username' style='position:absolute;width:1px;height:1px;overflow:hidden' tabindex="-1" />
        <input type='password' name='disable-auto-complete-password' style='position:absolute;width:1px;height:1px;overflow:hidden' tabindex="-1" />

        <md-input-container>
            <label>{{::"policy.invoke.property.password.label" | translate}}</label>
            <input apim-not-empty data-ng-model="selectedNode['password']" apim-context-value data-ng-model-options="{debounce:200}" type="password" autocomplete="false"/>
            <div class="assemblyDescription">{{::"policy.invoke.property.password.description" | translate}}</div>
        </md-input-container>
        <md-input-container>
            <label>{{::"policy.invoke.property.verb.label" | translate}}</label>
            <md-select data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly" data-ng-model="selectedNode['verb']" required>
                <md-option data-ng-disabled="swaggerDocument['x-ibm-configuration'].gateway === 'micro-gateway'" value="keep">{{::"assemblyVerbRequest" | translate}}</md-option>
                <md-option value="GET">{{::"assemblyVerbGet" | translate}}</md-option>
                <md-option value="POST">{{::"assemblyVerbPost" | translate}}</md-option>
                <md-option value="PUT">{{::"assemblyVerbPut" | translate}}</md-option>
                <md-option value="DELETE">{{::"assemblyVerbDelete" | translate}}</md-option>
                <md-option value="PATCH">{{::"assemblyVerbPatch" | translate}}</md-option>
                <md-option value="HEAD">{{::"assemblyVerbHead" | translate}}</md-option>
                <md-option value="OPTIONS">{{::"assemblyVerbOptions" | translate}}</md-option>
            </md-select>
            <div class="assemblyDescription" data-ng-if="selectedNode.$$type !== 'proxy'">{{::"policy.invoke.property.verb.description" | translate}}</div>
            <div class="assemblyDescription" data-ng-if="selectedNode.$$type === 'proxy'">{{::"policy.proxy.property.verb.description" | translate}}</div>
        </md-input-container>
        <md-checkbox data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly" style="margin: 10px 3px;" md-no-ink aria-label="{{::'policy.invoke.property.compression.label' | translate}}" data-ng-model="selectedNode['compression']" data-ng-model-options="{debounce: 200}" class="md-primary">
            <span>{{::"policy.invoke.property.compression.label" | translate}}</span>
        </md-checkbox>
        <div class="assemblyDescription">{{::"policy.invoke.property.compression.description" | translate}}</div>
        <md-input-container>
            <label>{{::"policy.invoke.property.cache-response.label" | translate}}</label>
            <md-select data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly" data-ng-model="selectedNode['cache-response']" required data-ng-init="Protocol">
                <md-option value="protocol">{{::"assemblyCacheNone" | translate}}</md-option>
                <md-option value="no-cache">{{::"assemblyCacheNoCache" | translate}}</md-option>
                <md-option value="time-to-live">{{::"assemblyCacheTimeToLive" | translate}}</md-option>
            </md-select>
            <div class="assemblyDescription">{{::"policy.invoke.property.cache-response.description" | translate}}</div>
        </md-input-container>
        <md-input-container>
            <label>{{::"policy.invoke.property.cache-ttl.label" | translate}}</label>
            <input type="number" data-ng-model="selectedNode['cache-ttl']" apim-context-value data-ng-model-options="{debounce:200}"/>
            <div class="assemblyDescription">{{::"policy.invoke.property.cache-ttl.description" | translate}}</div>
        </md-input-container>
        <md-input-container>
            <label>{{::"policy.invoke.property.cache-key.label" | translate}}</label>
            <input data-ng-model="selectedNode['cache-key']" apim-context-value data-ng-model-options="{debounce:200}"/>
            <div class="assemblyDescription">{{::"policy.invoke.property.cache-key.description" | translate}}</div>
        </md-input-container>
        <div data-ng-if="selectedNode.$$type !== 'proxy'">
          <md-checkbox data-ng-disabled="selectedNode.$$readOnly || selectedNode.$$parentReadOnly" style="margin: 10px 3px;" md-no-ink aria-label="{{::'policy.invoke.property.stop-on-error.label' | translate}}" data-ng-model="selectedNode.$$stopOnError" data-ng-model-options="{debounce: 200}" class="md-primary">
              <span>{{::"policy.invoke.property.stop-on-error.label" | translate}}</span>
          </md-checkbox>
          <div data-ng-show="selectedNode.$$stopOnError" data-ng-controller="ErrorFilterController as errorCtrl">
              <md-chips data-ng-model="selectedNode['stop-on-error']" md-autocomplete-snap md-require-match="true">
                  <md-autocomplete md-min-length="0" md-search-text="errorCtrl.searchText" md-no-cache="true" md-items="error in errorCtrl.filter()" placeholder="{{::'assemblySearchErrors' | translate}}">
                      <md-item-template>
                          <span md-highlight-text="errorCtrl.searchText">{{error}}</span>
                      </md-item-template>
                  </md-autocomplete>
                  <md-chip-template>
                      <span>{{$chip}}</span>
                  </md-chip-template>
              </md-chips>
          </div>
          <div style="margin: 10px 0pc;" class="assemblyDescription">{{::"policy.invoke.property.stop-on-error.description" | translate}}</div>
        </div>
        <md-input-container>
            <label>{{::"policy.invoke.property.output.label" | translate}}</label>
            <input apim-not-empty data-ng-model="selectedNode['output']" apim-context-value data-ng-model-options="{debounce:200}"/>
            <div class="assemblyDescription">{{::"policy.invoke.property.output.description" | translate}}</div>
        </md-input-container>
    </fieldset>
</div>
