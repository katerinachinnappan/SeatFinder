<h2 class="bx--modal-content__heading no-animate" ng-show="!projectsFilepicker.show">{{::'projects_list_add_existing' | translate}}</h2>
<h2 class="bx--modal-content__heading no-animate" ng-show="projectsFilepicker.show">{{::'projectSelectProject' | translate}}</h2>
<button title="Close" class="bx--modal__close no-animate" type="button" ng-disabled="isSubmittingProject" data-ng-click="cancelAddProject()" tabindex="-1" ng-show="!projectsFilepicker.show">
  <bx-icon class="bx--modal__close--icon" icon="close"></bx-icon>
</button>
<button title="Close" class="bx--modal__close no-animate" type="button" data-ng-click="cancelAddProject(false)" tabindex="-1" ng-show="projectsFilepicker.show">
  <bx-icon class="bx--modal__close--icon" icon="close"></bx-icon>
</button>
<div class="bx--modal-content bx--new-project-modal no-animate" ng-show="!projectsFilepicker.show">
  <form id="new-project-form" class="bx--form" name="form" novalidate>
    <bx-input-container>
      <label for="new-project-display-name">{{::'projects_add_label_display' | translate}}</label>
      <input type="text"
             ng-model="newProject.displayName"
             id="new-project-display-name"
             name="displayName"
             unique-project-attrib="displayName"
             required/>
      <div ng-messages="form.displayName.$error">
        <div class="bx--form__requirements" ng-message="required">{{::'projects_add_field_required' | translate}}</div>
        <div class="bx--form__requirements" ng-message="unique-project-displayName">{{::'projects_invalid_displayName' | translate:duplicateProject}}</div>
      </div>
    </bx-input-container>
    <bx-input-container>
      <label for="new-project-name">{{::'projects_add_label_name' | translate}}</label>
      <input type="text"
             ng-model="newProject.name"
             id="new-project-name"
             name="name"
             unique-project-attrib="name"
             required
             readonly/>
      <div ng-messages="form.name.$error">
        <div class="bx--form__requirements" ng-message="required">{{::'projects_add_field_required' | translate}}</div>
        <div class="bx--form__requirements" ng-message="unique-project-name">{{::'projects_invalid_name' | translate:duplicateProject}}</div>
      </div>
    </bx-input-container>
    <bx-input-container flex="100" class="has-link">
      <label for="new-project-path">{{::'projects_add_label_directory' | translate}}</label>
      <div class="displayInline itsAllRelative flex">
        <input type="text"
               ng-model="newProject.path"
               id="new-project-path"
               name="path"
               unique-project-attrib="path"
               placeholder="{{::'browseFolders' | translate}}"
               ng-click="openFilepicker()"
               required
               readonly/>
        <button class="bx--btn open-filepicker" ng-click="openFilepicker()">{{::'browse' | translate}}</button>
      </div>
      <div ng-messages="form.path.$error">
        <div class="bx--form__requirements" ng-message="required">{{::'projects_add_field_required' | translate}}</div>
        <div class="bx--form__requirements" ng-message="unique-project-path">{{::'projects_invalid_path' | translate:duplicateProject}}</div>
      </div>
    </bx-input-container>
  </form>
</div>
<div class="bx--modal-content filepicker no-animate" ng-class="projectsFilepicker.flow" ng-show="projectsFilepicker.show">
  <apim-projects-filepicker
    project="newProject"
    projects-filepicker="projectsFilepicker"
    update-path="updatePath(path)"
    update-name="updateName(file)"
    cancel-add-project="cancelAddProject()"
    add-path-to-project="addPathToProject"></apim-projects-filepicker>
</div>
<div class="bx--modal__buttons">
  <div class="bx--modal__buttons-container no-animate" ng-show="!projectsFilepicker.show">
    <button class="bx--btn--secondary"
            ng-click="cancelAddProject()"
            type="button" class="cancelButton">{{::'cancel' | translate}}</button>
    <button class="bx--btn" ng-click="addProject(form)" ng-disabled="isSubmittingProject">{{::'projects_add_button_existing' | translate}}</button>
  </div>
  <div class="bx--modal__buttons-container no-animate" ng-show="projectsFilepicker.show">
    <button class="bx--btn--secondary"
            ng-click="cancelAddProject(false)">{{::'cancel' | translate}}</button>
    <button class="bx--btn" ng-click="addPathToProject()">{{::'ok' | translate}}</button>
  </div>
</div>
